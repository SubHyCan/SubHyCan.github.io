<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>Python 3 Study | SubHy的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="字符串，列表，元组，字典，集合购物车(1)丶要求用户输入总资产，例如：2000。(2)丶显示商品列表，让用户根据序号选择商品，加入购物车。(3)丶购买，如果商品总额大于总资产，提示账户余额不足，否则，购买成功。(4)丶附加：可充值、某商品移除购物车。例:1234567891011121314151617181920212223242526272829303132333435363738#!/usr">
<meta property="og:type" content="article">
<meta property="og:title" content="Python 3 Study">
<meta property="og:url" content="http://SubHyCan.github.io/2019/02/14/Python-3-Study/index.html">
<meta property="og:site_name" content="SubHy的博客">
<meta property="og:description" content="字符串，列表，元组，字典，集合购物车(1)丶要求用户输入总资产，例如：2000。(2)丶显示商品列表，让用户根据序号选择商品，加入购物车。(3)丶购买，如果商品总额大于总资产，提示账户余额不足，否则，购买成功。(4)丶附加：可充值、某商品移除购物车。例:1234567891011121314151617181920212223242526272829303132333435363738#!/usr">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-02-14T08:25:49.496Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Python 3 Study">
<meta name="twitter:description" content="字符串，列表，元组，字典，集合购物车(1)丶要求用户输入总资产，例如：2000。(2)丶显示商品列表，让用户根据序号选择商品，加入购物车。(3)丶购买，如果商品总额大于总资产，提示账户余额不足，否则，购买成功。(4)丶附加：可充值、某商品移除购物车。例:1234567891011121314151617181920212223242526272829303132333435363738#!/usr">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://SubHyCan.github.io"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">SubHy的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">成长之路</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Python-3-Study" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/14/Python-3-Study/" class="article-date">
  <time datetime="2019-02-14T08:25:49.496Z" itemprop="datePublished">2019-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Python 3 Study
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="字符串，列表，元组，字典，集合"><a href="#字符串，列表，元组，字典，集合" class="headerlink" title="字符串，列表，元组，字典，集合"></a>字符串，列表，元组，字典，集合</h2><h3 id="购物车"><a href="#购物车" class="headerlink" title="购物车"></a>购物车</h3><p>(1)丶要求用户输入总资产，例如：2000。<br>(2)丶显示商品列表，让用户根据序号选择商品，加入购物车。<br>(3)丶购买，如果商品总额大于总资产，提示账户余额不足，否则，购买成功。<br>(4)丶附加：可充值、某商品移除购物车。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line">goods = [</span><br><span class="line">    &#123;<span class="string">"name"</span>: <span class="string">"电脑"</span>, <span class="string">"price"</span>: <span class="number">1999</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"name"</span>: <span class="string">"鼠标"</span>, <span class="string">"price"</span>: <span class="number">10</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"name"</span>: <span class="string">"游艇"</span>, <span class="string">"price"</span>: <span class="number">20</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"name"</span>: <span class="string">"美女"</span>, <span class="string">"price"</span>: <span class="number">998</span>&#125;,</span><br><span class="line">]</span><br><span class="line">zongzichang=<span class="number">0</span></span><br><span class="line">i1=input(<span class="string">'请输入你的总资产:'</span>)</span><br><span class="line">zongzichang=int(i1)</span><br><span class="line"><span class="comment">#输出商品列表，包括商品名和价格</span></span><br><span class="line"><span class="keyword">for</span> i1 <span class="keyword">in</span> goods:</span><br><span class="line">	print(i1[<span class="string">'name'</span>], i1[<span class="string">'price'</span>])</span><br><span class="line"><span class="comment">#&#123;"电脑":&#123;"num":1,"single_price":1999&#125;&#125;</span></span><br><span class="line">car_dir=&#123;&#125;</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">	i2=input(<span class="string">'请输入购买的商品(输入q来退出购买):'</span>)</span><br><span class="line">	<span class="keyword">if</span> <span class="string">'q'</span> == i2:</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">for</span> items <span class="keyword">in</span> goods:</span><br><span class="line">		<span class="keyword">if</span> items[<span class="string">'name'</span>] == i2:</span><br><span class="line">			name=items[<span class="string">'name'</span>]</span><br><span class="line">			<span class="keyword">if</span> i2 <span class="keyword">in</span> car_dir.keys():</span><br><span class="line">				car_dir[name][<span class="string">'num'</span>]+=<span class="number">1</span></span><br><span class="line">			<span class="keyword">else</span>:</span><br><span class="line">				car_dir[i2]=&#123;<span class="string">"num"</span>:<span class="number">1</span>,<span class="string">'single_price'</span>:items[<span class="string">'price'</span>]&#125;</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">pass</span></span><br><span class="line">print(car_dir)</span><br><span class="line">sum=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i3 <span class="keyword">in</span> car_dir:</span><br><span class="line">	price=car_dir[i3][<span class="string">'num'</span>]*car_dir[i3][<span class="string">'single_price'</span>]</span><br><span class="line">	sum=sum+price</span><br><span class="line"><span class="keyword">if</span> sum &lt;= zongzichang:</span><br><span class="line">	print(<span class="string">'购买成功'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">'账户余额不足，请充值'</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="元素分类"><a href="#元素分类" class="headerlink" title="元素分类"></a>元素分类</h3><p>(1)丶有如下值集合 [11,22,33,44,55,66,77,88,99,90…]，将所有大于 66 的值保存至字典的第一个key中，<br>将小于 66 的值保存至第二个key的值中，即： {‘k1’: 大于66的所有值, ‘k2’: 小于66的所有值}。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line">a = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>,<span class="number">77</span>,<span class="number">88</span>,<span class="number">99</span>,<span class="number">90</span>]</span><br><span class="line">b = &#123;</span><br><span class="line">    <span class="string">"key1"</span>:[],</span><br><span class="line">    <span class="string">"key2"</span>:[],</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">    <span class="keyword">if</span> i &gt; <span class="number">66</span>:</span><br><span class="line">        b[<span class="string">"key1"</span>].append(i)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        b[<span class="string">"key2"</span>].append(i)</span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure></p>
<h3 id="用户登录隐藏密码-三次输入机会-。"><a href="#用户登录隐藏密码-三次输入机会-。" class="headerlink" title="用户登录隐藏密码(三次输入机会)。"></a>用户登录隐藏密码(三次输入机会)。</h3><p>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> getpass       <span class="comment">#模块功能让用户输入的内容不可见</span></span><br><span class="line">time=<span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">	user=input(<span class="string">'请输入用户名:'</span>)</span><br><span class="line">	password=getpass.getpass(<span class="string">"请输入密码:"</span>) <span class="comment">#隐藏用户输入的内容</span></span><br><span class="line">	<span class="keyword">if</span> user == <span class="string">'Hello'</span> <span class="keyword">and</span> password == <span class="string">'Python'</span>:</span><br><span class="line">		print(user,password)</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="keyword">pass</span></span><br><span class="line">	time+=<span class="number">1</span>		</span><br><span class="line">	<span class="keyword">if</span> time &gt;<span class="number">3</span>:</span><br><span class="line">		<span class="keyword">break</span></span><br></pre></td></tr></table></figure></p>
<h3 id="输出商品列表"><a href="#输出商品列表" class="headerlink" title="输出商品列表"></a>输出商品列表</h3><p>(1)丶用户输入序号，显示用户选中的商品。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="comment">#商品列表有4个，我设置了可以输入4次</span></span><br><span class="line">li = [<span class="string">"手机"</span>, <span class="string">"电脑"</span>, <span class="string">'鼠标垫'</span>, <span class="string">'游艇'</span>]</span><br><span class="line">time=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> key,i <span class="keyword">in</span> enumerate(li,<span class="number">1</span>):</span><br><span class="line">	print(key,i)</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:	</span><br><span class="line">	xuanze=int(input(<span class="string">'请输入序号:'</span>))</span><br><span class="line">	print(li[xuanze<span class="number">-1</span>])</span><br><span class="line">	time+=<span class="number">1</span></span><br><span class="line">	<span class="keyword">if</span> time &gt; <span class="number">4</span>:</span><br><span class="line">		<span class="keyword">break</span></span><br></pre></td></tr></table></figure></p>
<h3 id="查找列表元组字典"><a href="#查找列表元组字典" class="headerlink" title="查找列表元组字典"></a>查找列表元组字典</h3><p>(1)丶查找所有的元素，移除每个元素的空格，并查找以 a或A开头 并且以 c 结尾的所有元素，放在列表中并统计次数。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line">name=&#123;</span><br><span class="line">	<span class="string">"li"</span>:[<span class="string">"alec"</span>, <span class="string">" aric"</span>, <span class="string">"Alex"</span>, <span class="string">"Tony"</span>, <span class="string">"rain"</span>],</span><br><span class="line">	<span class="string">"tu"</span>:(<span class="string">"alec"</span>, <span class="string">" aric"</span>, <span class="string">"Alex"</span>, <span class="string">"Tony"</span>, <span class="string">"rain"</span>),</span><br><span class="line">	<span class="string">"dic"</span>:&#123;<span class="string">'k1'</span>: <span class="string">"alex"</span>, <span class="string">'k2'</span>: <span class="string">' aric'</span>,  <span class="string">"k3"</span>: <span class="string">"Alex"</span>, <span class="string">"k4"</span>: <span class="string">"Tony"</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line">new_dic=&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i1 <span class="keyword">in</span> name:</span><br><span class="line">	<span class="keyword">if</span> isinstance((name[i1]),list) <span class="keyword">or</span> isinstance((name[i1]),tuple):</span><br><span class="line">		<span class="keyword">for</span> i2 <span class="keyword">in</span> name[i1]:</span><br><span class="line">			i3=i2.strip()</span><br><span class="line">			<span class="keyword">if</span> (i3.startswith(<span class="string">"a"</span>) <span class="keyword">or</span> i3.startswith(<span class="string">"A"</span>)) <span class="keyword">and</span> i3.endswith(<span class="string">"c"</span>):</span><br><span class="line">				print(i3)</span><br><span class="line">				<span class="keyword">if</span> i3 <span class="keyword">in</span> new_dic:</span><br><span class="line">					new_dic[i3]+=<span class="number">1</span></span><br><span class="line">				<span class="keyword">else</span>:</span><br><span class="line">					new_dic[i3]=<span class="number">1</span></span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="keyword">for</span> i4 <span class="keyword">in</span> name[i1].values():</span><br><span class="line">			i5=i4.strip()</span><br><span class="line">			<span class="keyword">if</span> (i5.startswith(<span class="string">"a"</span>) <span class="keyword">or</span> i5.startswith(<span class="string">"A"</span>)) <span class="keyword">and</span> i5.endswith(<span class="string">"c"</span>):</span><br><span class="line">				print(i5)</span><br><span class="line">				<span class="keyword">if</span> i5 <span class="keyword">in</span> new_dic:</span><br><span class="line">					new_dic[i5]+=<span class="number">1</span></span><br><span class="line">				<span class="keyword">else</span>:</span><br><span class="line">					new_dic[i5]=<span class="number">1</span></span><br><span class="line">print(new_dic)</span><br></pre></td></tr></table></figure></p>
<h3 id="寻找差异"><a href="#寻找差异" class="headerlink" title="寻找差异"></a>寻找差异</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># 数据库中原有</span></span><br><span class="line">old_dict = &#123;</span><br><span class="line">    <span class="string">"1"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c1'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">80</span>&#125;,</span><br><span class="line">    <span class="string">"2"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c1'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">80</span>&#125;,</span><br><span class="line">    <span class="string">"3"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c1'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">80</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 新汇报的数据</span></span><br><span class="line">new_dict = &#123;</span><br><span class="line">    <span class="string">"1"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c1'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">800</span>&#125;,</span><br><span class="line">    <span class="string">"3"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c1'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">80</span>&#125;,</span><br><span class="line">    <span class="string">"4"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c2'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">80</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line">del_set=set(old_dict.keys()).difference(set(new_dict.keys()))         <span class="comment">#&#123;'2'&#125;，需要删除的key，放在set集合里</span></span><br><span class="line">add_set=set(new_dict.keys()).difference(set(old_dict.keys()))         <span class="comment">#&#123;'4'&#125;，需要新增的key，放在set集合里</span></span><br><span class="line">update_set=set(old_dict.keys()).intersection(set(new_dict.keys()))    <span class="comment">#&#123;'1','3'&#125;，交集key，放在set集合里</span></span><br></pre></td></tr></table></figure>
<h3 id="三元运算"><a href="#三元运算" class="headerlink" title="三元运算"></a>三元运算</h3><p>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line">arg1,arg2 = <span class="number">1</span>,<span class="number">2</span></span><br><span class="line">result = arg1 <span class="keyword">if</span> arg1&gt;arg2 <span class="keyword">else</span> arg2          <span class="comment">#如果条件成立，那么将 "arg1" 赋值给result变量，否则，将"arg2"赋值给result变量</span></span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure></p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="函数一"><a href="#函数一" class="headerlink" title="函数一"></a>函数一</h3><p>(1)丶写函数，检查传入字典的每一个value的长度,如果大于2，那么仅保留前两个长度的内容，并将新内容返回给调用者。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zidian</span><span class="params">(args)</span>:</span></span><br><span class="line">	<span class="keyword">for</span> key,value <span class="keyword">in</span> args.items():</span><br><span class="line">		<span class="keyword">if</span> len(value) &gt; <span class="number">2</span>:</span><br><span class="line">			args[key]=value[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">	<span class="keyword">return</span> args	</span><br><span class="line">	</span><br><span class="line">dic = &#123;<span class="string">'k1'</span>:<span class="string">"alex"</span>,<span class="string">'k2'</span>:[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>],<span class="string">"k3"</span>:(<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>),<span class="string">"k4"</span>:<span class="string">"liyunliang"</span>&#125;</span><br><span class="line">print(zidian(dic))</span><br></pre></td></tr></table></figure></p>
<h3 id="函数二"><a href="#函数二" class="headerlink" title="函数二"></a>函数二</h3><p>(1)丶写函数，检查获取传入列表或元组对象的所有奇数位索引对应的元素，并将其作为新列表返回给调用者。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">liebiao</span><span class="params">(args)</span>:</span></span><br><span class="line">	new_list=[]</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(len(args)):</span><br><span class="line">		<span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">			new_list.append(args[i])</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">pass</span></span><br><span class="line">	<span class="keyword">return</span> new_list			</span><br><span class="line">list = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>,<span class="number">77</span>] </span><br><span class="line">print(liebiao(list))</span><br></pre></td></tr></table></figure></p>
<h3 id="函数三"><a href="#函数三" class="headerlink" title="函数三"></a>函数三</h3><p>(1)写函数，检查用户传入的对象（字符串、无嵌套的列表和元组）的每一个元素是否含有空内容。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">space_jiancha</span><span class="params">(args)</span>:</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> args:</span><br><span class="line">		<span class="keyword">if</span> isinstance(i,int):   <span class="comment">#判断是否是int类型,int类型不能使用isspace</span></span><br><span class="line">			<span class="keyword">pass</span></span><br><span class="line">		<span class="keyword">else</span>:	</span><br><span class="line">			<span class="keyword">if</span> i.isspace():</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">				<span class="keyword">break</span>		</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">			</span><br><span class="line">list =[<span class="number">11</span>,<span class="number">22</span>,<span class="string">"liyunliang"</span>,<span class="string">" "</span>]</span><br><span class="line">ret=space_jiancha(list)          <span class="comment">#ret等于True或False</span></span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(<span class="string">"用户传入的对象有空格"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"用户传入的对象没有空格"</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="def和lambda定义函数区别"><a href="#def和lambda定义函数区别" class="headerlink" title="def和lambda定义函数区别"></a>def和lambda定义函数区别</h3><p>(1)丶lambda用于非常简单的函数，一行完成，如下两个函数功能相同。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sumnumber</span><span class="params">(args1,args2)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> args1+args2</span><br><span class="line"></span><br><span class="line">my_lambda=<span class="keyword">lambda</span> args1,args2:args1+args2	</span><br><span class="line"></span><br><span class="line">print(sumnumber(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">print(my_lambda(<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure></p>
<h3 id="斐波那契数列取第十个值"><a href="#斐波那契数列取第十个值" class="headerlink" title="斐波那契数列取第十个值"></a>斐波那契数列取第十个值</h3><p>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="comment"># 0 1 1 2 3 5 8 13 21 34 55 89</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(end,arg1,arg2)</span>:</span></span><br><span class="line">	<span class="keyword">if</span> end == <span class="number">10</span>:</span><br><span class="line">		<span class="keyword">return</span> arg1</span><br><span class="line">	arg3 = arg1 + arg2</span><br><span class="line">	r = f1(end+<span class="number">1</span>,arg2,arg3)</span><br><span class="line">	<span class="keyword">return</span> r</span><br><span class="line">ret= f1(<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">print(ret)</span><br></pre></td></tr></table></figure></p>
<h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><p>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line">li = [<span class="number">112</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">50</span>,<span class="number">40</span>,<span class="number">1</span>]            <span class="comment">#将列表中数字从小到大依次排列</span></span><br><span class="line">print(li)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(li)):</span><br><span class="line">	<span class="keyword">for</span> j <span class="keyword">in</span> range(len(li)-i):</span><br><span class="line">		<span class="keyword">if</span> li[j] &gt; li[j+<span class="number">1</span>]:</span><br><span class="line">			temp = li[j]</span><br><span class="line">			li[j] = li[j+<span class="number">1</span>]</span><br><span class="line">			li[j+<span class="number">1</span>] = temp</span><br><span class="line">print(li)</span><br></pre></td></tr></table></figure></p>
<h3 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h3><h4 id="单层装饰"><a href="#单层装饰" class="headerlink" title="单层装饰"></a>单层装饰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">(func)</span>:</span>                                  <span class="comment">#装饰器outer</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(*args,**argss)</span>:</span>                     <span class="comment">#可接收任意参数</span></span><br><span class="line">        print(<span class="string">"你好!"</span>)</span><br><span class="line">        r = func(*args,**argss)</span><br><span class="line">        print(<span class="string">"再见!"</span>)</span><br><span class="line">        <span class="keyword">return</span> r</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"><span class="meta">@outer	                                          #相当于outer(f2)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(a1,a2)</span>:</span>                                    <span class="comment">#此函数若需要添加一些额外的功能，不改变原函数代码的情况可以使用装饰器</span></span><br><span class="line">    <span class="keyword">return</span> a1 + a2</span><br><span class="line">print(f2(<span class="number">1</span>,<span class="number">2</span>))	                                  <span class="comment">#输出为:'你好!'  '再见!'  3</span></span><br></pre></td></tr></table></figure>
<h4 id="二层装饰"><a href="#二层装饰" class="headerlink" title="二层装饰"></a>二层装饰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">(func)</span>:</span>                                  <span class="comment">#装饰器outer</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(*args,**argss)</span>:</span>                     <span class="comment">#可接收任意参数</span></span><br><span class="line">        print(<span class="string">"你好!"</span>)</span><br><span class="line">        r = func(*args,**argss)</span><br><span class="line">        print(<span class="string">"再见!"</span>)</span><br><span class="line">        <span class="keyword">return</span> r</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer_1</span><span class="params">(func)</span>:</span>                                <span class="comment">#装饰器outer_1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(*args,**argss)</span>:</span></span><br><span class="line">        print(<span class="string">"欢迎来到测试系统!"</span>)</span><br><span class="line">        r = func(*args,**argss)</span><br><span class="line">        <span class="keyword">return</span> r</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"><span class="meta">@outer_1                                          #相当于outer_1(f2)</span></span><br><span class="line"><span class="meta">@outer                                            #相当于outer(f2)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(a1,a2)</span>:</span>                                    <span class="comment">#此函数若需要添加一些额外的功能，不改变原函数代码的情况可以使用装饰器</span></span><br><span class="line">    <span class="keyword">return</span> a1 + a2</span><br><span class="line"><span class="meta">@outer_1</span></span><br><span class="line"><span class="meta">@outer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f3</span><span class="params">(a1,a2,a3)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a1 + a2 +a3</span><br><span class="line">print(f2(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">print(f3(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2><h3 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">abs()     <span class="comment">#取绝对值</span></span><br><span class="line">all()     <span class="comment">#循环参数，如果每个元素为真，那么all的返回值为真，0,None,空值为假，其余为真</span></span><br><span class="line">any()     <span class="comment">#循环参数，只要一个元素为真，则返回值为真</span></span><br><span class="line">bin()     <span class="comment">#二进制，0b表示</span></span><br><span class="line">oct()     <span class="comment">#八进制，0o表示</span></span><br><span class="line">int()     <span class="comment">#十进制	</span></span><br><span class="line">hex()     <span class="comment">#十六进制，0x表示</span></span><br><span class="line">bool()    <span class="comment">#转换成布尔值，返回真或假</span></span><br><span class="line">bytes()   <span class="comment">#转换为字节类型</span></span><br><span class="line">str()     <span class="comment">#转换为字符类型</span></span><br><span class="line">chr()     <span class="comment">#接收一个数字，找到对应的字符，c=chr(65) ,c的值为A</span></span><br><span class="line">ord()     <span class="comment">#接收一个字符，找到对应的数字, c=ord("A"),c的值为65</span></span><br><span class="line">dir()     <span class="comment">#查看帮助</span></span><br><span class="line">help()    <span class="comment">#查看帮助</span></span><br><span class="line">divmod()  <span class="comment">#取商和余数</span></span><br><span class="line">enumrate() <span class="comment">#为可迭代的对象添加序号</span></span><br><span class="line">eval()    <span class="comment">#执行一个字符串形式的表达式,有返回值</span></span><br><span class="line">filter()  <span class="comment">#过滤器，循环可迭代的对象，获取每一个参数，函数(参数)，filter(函数，可迭代的对象)</span></span><br><span class="line">map()     <span class="comment">#map(函数，可迭代的对象)</span></span><br><span class="line">globals()   <span class="comment">#获取所有全局变量，返回一个字典</span></span><br><span class="line">locals()    <span class="comment">#获取所有局部变量，返回一个字典</span></span><br><span class="line">id()        <span class="comment">#查看变量的内存地址,如a="li"，id(a)</span></span><br><span class="line">input()      <span class="comment">#接受一个标准输入数据，返回为 string 类型，与python2的写法不同，2为raw_input()</span></span><br><span class="line">isinstance() <span class="comment">#判断一个变量是否是某种类型，返回True/False</span></span><br><span class="line">len()        <span class="comment">#输出一个变量的长度，可测量str，列表，元组，字典的长度</span></span><br><span class="line">max()        <span class="comment">#取最大值</span></span><br><span class="line">min()        <span class="comment">#取最小值</span></span><br><span class="line">pow()        <span class="comment">#取幂数</span></span><br><span class="line">round()      <span class="comment">#对小数四舍五入</span></span><br><span class="line">range()      <span class="comment">#可创建一个整数列表，一般用在 for 循环中，用法为:range(start, stop[, step])，&gt;=start，&lt;stop，step为步长 </span></span><br><span class="line">sorted()     <span class="comment">#对所有可迭代的对象进行排序操作，sort只用于列表，用法为:sorted(iterable, key=None, reverse=False),reverse=True表示降序，False表示升序(默认)，生成新的对象，数字和字符串无法比较,字符串根据bytes值排序</span></span><br><span class="line">sum()        <span class="comment">#求和  </span></span><br><span class="line">type()       <span class="comment">#查看对象的类型</span></span><br><span class="line">open()       <span class="comment">#打开文件，用法为:open(name[, mode[, buffering]])，name为文件名,mode为打开方式，buffering可省略</span></span><br><span class="line">list()       <span class="comment">#可定义一个列表，也可用于将元组转换为列表。</span></span><br><span class="line">tuple()      <span class="comment">#可定义一个元组，也可用于将列表转换为元组。</span></span><br><span class="line">dict()       <span class="comment">#可创建一个字典 </span></span><br><span class="line">set()        <span class="comment">#可创建一个无序不重复元素集，可进行关系测试，删除重复数据，还可以计算交集、差集、并集等。</span></span><br></pre></td></tr></table></figure>
<h4 id="用法示例"><a href="#用法示例" class="headerlink" title="用法示例"></a>用法示例</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">abs(<span class="number">-1</span>)    <span class="comment">#返回值为1</span></span><br><span class="line">all([<span class="number">1</span>,<span class="number">0</span>]) <span class="comment">#0为假，返回False</span></span><br><span class="line">any([<span class="number">1</span>,<span class="number">0</span>]) <span class="comment">#1为真，返回True</span></span><br><span class="line">bin(<span class="number">17</span>)    <span class="comment">#十进制转二进制</span></span><br><span class="line">act(<span class="number">17</span>)    <span class="comment">#十进制转八进制</span></span><br><span class="line">hex(<span class="number">17</span>)    <span class="comment">#十进制转十六进制</span></span><br><span class="line">int(<span class="string">'0b11'</span>,base=<span class="number">2</span>)  <span class="comment">#二进制转换为十进制,输出为3，0b可有可无，base=2表示二进制</span></span><br><span class="line">int(<span class="string">'0o11'</span>,base=<span class="number">8</span>)  <span class="comment">#八进制转换为十进制，输出为9，0o可有可无</span></span><br><span class="line">int(<span class="string">'0x11'</span>,base=<span class="number">16</span>) <span class="comment">#十六进制转换为十进制，输出为17 ，0x可有可无</span></span><br><span class="line">bool(<span class="number">1</span>)    <span class="comment">#返回值为True</span></span><br><span class="line">bytes(<span class="string">"liyunliang"</span>,encoding=<span class="string">"utf-8"</span>) <span class="comment">#str转换为bytes，以uft-8的格式编码</span></span><br><span class="line">str(<span class="string">b"liyunliang"</span>,encoding=<span class="string">"utf-8"</span>)  <span class="comment">#bytes转换为str，以utf-8的格式编码</span></span><br><span class="line">chr(<span class="number">65</span>)    <span class="comment">#输出为字符A</span></span><br><span class="line">ord(<span class="string">"A"</span>)   <span class="comment">#输出为数字65</span></span><br><span class="line">dir(hash)  <span class="comment">#查看hash有关的用法</span></span><br><span class="line">help(hash) <span class="comment">#查看hash有关的用法</span></span><br><span class="line">divmod(<span class="number">10</span>,<span class="number">3</span>) <span class="comment">#输出为元组(3,1)</span></span><br><span class="line">li = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> enumerate(li, <span class="number">1</span>):     <span class="comment">#不指定为1的话默认从0开始</span></span><br><span class="line">    print(k,v)                   <span class="comment">#输出为1 11     2 22    3 33</span></span><br><span class="line">eval(<span class="string">"1+2"</span>)   <span class="comment">#输出为数字3</span></span><br><span class="line">eval(<span class="string">"a+2"</span>,&#123;<span class="string">"a"</span>:<span class="number">1</span>&#125;)  <span class="comment">#输出为数字3</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x &gt; <span class="number">22</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">ret=filter(f1,[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>])      <span class="comment">#ret为可迭代的filter对象</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ret:</span><br><span class="line">	print(i)                      <span class="comment">#输出为过滤得到的数字33和44</span></span><br><span class="line">ret=map(f1,[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>])		  <span class="comment">#ret为可迭代的map对象</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ret:</span><br><span class="line">	print(i)                      <span class="comment">#输出为False，False，True，True</span></span><br><span class="line">id(<span class="number">1</span>)                             <span class="comment">#查看数字1的内存地址</span></span><br><span class="line">u=input(<span class="string">"请输入用户名:"</span>)          <span class="comment">#则输入的数据为用户名</span></span><br><span class="line">isinstance(<span class="number">1</span>,(int))	              <span class="comment">#判断1是否属于int类型，返回True,判断单个类型()可加可不加;isinstance(1,(int,str))，判断1是否属于int或者str类型</span></span><br><span class="line">len(<span class="string">"li"</span>)                         <span class="comment">#返回值为2</span></span><br><span class="line">max([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>])                   <span class="comment">#返回值为33</span></span><br><span class="line">min([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>])                   <span class="comment">#返回值为11</span></span><br><span class="line">pow(<span class="number">2</span>, <span class="number">-1</span>)                        <span class="comment">#返回值为0.5,2的-1次方  </span></span><br><span class="line">round(<span class="number">0.654</span>,<span class="number">2</span>)                    <span class="comment">#返回值为0.65，2表示保留两位小数  </span></span><br><span class="line">sorted([<span class="number">22</span>,<span class="number">44</span>,<span class="number">11</span>,<span class="number">33</span>])             <span class="comment">#返回值为[11,22,33,44]</span></span><br><span class="line">sorted([<span class="number">11</span>,<span class="number">22</span>,<span class="number">44</span>,<span class="number">33</span>],key=<span class="keyword">lambda</span> x: x*<span class="number">-1</span>) <span class="comment">#返回值为[44,33,22,11]，利用key来降序</span></span><br><span class="line">sorted([<span class="number">11</span>,<span class="number">22</span>,<span class="number">44</span>,<span class="number">33</span>],reverse=<span class="keyword">True</span>)       <span class="comment">#返回值为[44,33,22,11]</span></span><br><span class="line">sum([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>])                <span class="comment">#返回值为110  </span></span><br><span class="line">type(<span class="number">1</span>)                           <span class="comment">#可查看1的类型</span></span><br><span class="line"></span><br><span class="line">f = open(<span class="string">'test.txt'</span>,<span class="string">'r'</span>)          <span class="comment">#以只读的方式打开test.txt</span></span><br><span class="line">f.read([size])                    <span class="comment">#size未指定则返回整个文件,如果文件大小&gt;2倍内存则有问题.f.read()读到文件尾时返回""(空字串)</span></span><br><span class="line">f.readline()                      <span class="comment">#读取一行</span></span><br><span class="line">f.readlines([size])               <span class="comment">#返回包含size行的列表,size 未指定则返回全部行</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f: <span class="keyword">print</span> line         <span class="comment">#通过迭代器访问</span></span><br><span class="line">f.write(<span class="string">"hello\n"</span>)                <span class="comment">#如果要写入字符串以外的数据,先将他转换为字符串.</span></span><br><span class="line">f.tell()                          <span class="comment">#返回一个整数,表示当前文件指针的位置(就是到文件头的比特数).</span></span><br><span class="line">f.seek(偏移量,[起始位置])         <span class="comment">#用来移动文件指针.</span></span><br><span class="line">f.close()                         <span class="comment">#关闭文件</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'test.txt'</span>,<span class="string">'r'</span>) <span class="keyword">as</span> f:   <span class="comment">#以只读的方式打开文件test.txt，不需要close文件</span></span><br><span class="line">模式说明：</span><br><span class="line">r	<span class="comment">#以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</span></span><br><span class="line">rb	<span class="comment">#以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。</span></span><br><span class="line">r+	<span class="comment">#打开一个文件用于读写。文件指针将会放在文件的开头。</span></span><br><span class="line">rb+	<span class="comment">#以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。</span></span><br><span class="line">w	<span class="comment">#打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">wb	<span class="comment">#以二进制格式打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">w+	<span class="comment">#打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">wb+	<span class="comment">#以二进制格式打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">a	<span class="comment">#打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</span></span><br><span class="line">ab	<span class="comment">#以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</span></span><br><span class="line">a+	<span class="comment">#打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</span></span><br><span class="line">ab+	<span class="comment">#以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</span></span><br></pre></td></tr></table></figure>
<h4 id="用户登录-密码文件"><a href="#用户登录-密码文件" class="headerlink" title="用户登录(密码文件)"></a>用户登录(密码文件)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># 基于密码数据文件的用户登录逻辑</span></span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">register</span><span class="params">(user,pwd)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    提供用户注册功能</span></span><br><span class="line"><span class="string">    :param user:</span></span><br><span class="line"><span class="string">    :param pwd:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'db'</span>,<span class="string">'a'</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f1:</span><br><span class="line">        f1.write(user+<span class="string">'|'</span>+jiami(pwd)+<span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jiami</span><span class="params">(pwd)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    提供密码MD5加密功能</span></span><br><span class="line"><span class="string">    :param pwd:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    temp = hashlib.md5(bytes(<span class="string">'curry'</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    temp.update(bytes(pwd,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    <span class="keyword">return</span> temp.hexdigest()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(user,pwd)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    提供用户登录功能</span></span><br><span class="line"><span class="string">    :param user:</span></span><br><span class="line"><span class="string">    :param pwd:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'db'</span>,<span class="string">'r'</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f2:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f2:</span><br><span class="line">            u = line.strip().split(<span class="string">"|"</span>)[<span class="number">0</span>]</span><br><span class="line">            p = line.strip().split(<span class="string">"|"</span>)[<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> u == user <span class="keyword">and</span> p == jiami(pwd):</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">chpwd</span><span class="params">(user,pwd)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    提供用户修改密码功能</span></span><br><span class="line"><span class="string">    :param user:</span></span><br><span class="line"><span class="string">    :param pwd:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    new_data = <span class="string">""</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'db'</span>,<span class="string">'r'</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f3:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f3:</span><br><span class="line">            u = line.strip().split(<span class="string">"|"</span>)[<span class="number">0</span>]</span><br><span class="line">            p = line.strip().split(<span class="string">"|"</span>)[<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> u == user <span class="keyword">and</span> p == jiami(pwd):</span><br><span class="line">                new_pwd = input(<span class="string">"请输入新的密码:"</span>)</span><br><span class="line">                line = line.replace(p,jiami(new_pwd))            <span class="comment">#文件内容替换</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            new_data += line</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'db'</span>,<span class="string">'w'</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f4:</span><br><span class="line">        f4.write(new_data)</span><br><span class="line">        print(<span class="string">"密码更改成功"</span>)</span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    主函数</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    i = input(<span class="string">"1.登录,2.注册,3.修改密码"</span>)</span><br><span class="line">    <span class="keyword">if</span> i == <span class="string">"2"</span>:</span><br><span class="line">        user = input(<span class="string">"用户名:"</span>)</span><br><span class="line">        pwd = input(<span class="string">"密码:"</span>)</span><br><span class="line">        register(user,pwd)</span><br><span class="line">    <span class="keyword">elif</span> i == <span class="string">"1"</span>:</span><br><span class="line">        user = input(<span class="string">"用户名:"</span>)</span><br><span class="line">        pwd = input(<span class="string">"密码:"</span>)</span><br><span class="line">        ret = login(user,pwd)</span><br><span class="line">        <span class="keyword">if</span> ret:</span><br><span class="line">            print(<span class="string">"登录成功"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"登录失败"</span>)</span><br><span class="line">    <span class="keyword">elif</span> i == <span class="string">"3"</span>:</span><br><span class="line">        user = input(<span class="string">"用户名:"</span>)</span><br><span class="line">        pwd = input(<span class="string">"密码:"</span>)</span><br><span class="line">        chpwd(user,pwd)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h4 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h4><p>(1)丶设计一个函数，对传入的字符串（假设字符串中只包含小写字母和空格）进行加密操作，<br>加密的规则是a变d，b变e，c变f,…….，x变a，y变b，z变c，空格不变，返回加密后的字符串<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jiami</span><span class="params">(arg)</span>:</span></span><br><span class="line">	temp = <span class="string">''</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> arg:</span><br><span class="line">		<span class="keyword">if</span> i == <span class="string">' '</span>:</span><br><span class="line">			temp += i</span><br><span class="line">		<span class="keyword">elif</span> ord(i) &lt; <span class="number">120</span>:		</span><br><span class="line">			temp += chr(ord(i) + <span class="number">3</span>)</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			temp += chr(ord(i) - <span class="number">23</span>)			</span><br><span class="line">	<span class="keyword">return</span> temp		          </span><br><span class="line">	   </span><br><span class="line">inp = input(<span class="string">"请输入字符串(只包含小写字母和空格):"</span>)</span><br><span class="line">new_inp = jiami(inp)</span><br><span class="line">print(new_inp)</span><br></pre></td></tr></table></figure></p>
<h3 id="不常用"><a href="#不常用" class="headerlink" title="不常用"></a>不常用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">ascii()       <span class="comment">#对象的类中找_repr_，获取其返回值</span></span><br><span class="line">例:</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_repr_</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span></span><br><span class="line">		</span><br><span class="line">r=ascii(Foo())</span><br><span class="line">print(r)                 <span class="comment">#返回值为&lt;__main__.Foo object at 0x013E8B10&gt;</span></span><br><span class="line"></span><br><span class="line">bytearray()   <span class="comment">#字节列表</span></span><br><span class="line">callable()    <span class="comment">#是否可执行，返回True/False，例如函数可执行，返回True</span></span><br><span class="line">compile()     <span class="comment">#接收一个字符串，把该字符串编译为python可执行的代码</span></span><br><span class="line">exec()        <span class="comment">#与eval类似，无返回值，只执行代码</span></span><br><span class="line">例:</span><br><span class="line">exec(<span class="string">"for i in range(10):print(i)"</span>)</span><br><span class="line">hash()        <span class="comment">#得到一个对象的哈希值，如字典key,hash("liyun")，输出为哈希值:-416968271</span></span><br><span class="line">issubclass()  <span class="comment">#用于判断参数 class 是否是类型参数 classinfo 的子类，语法为:issubclass(class, classinfo)</span></span><br><span class="line">例:</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">issubclass(B,A)  <span class="comment">#返回值为True</span></span><br><span class="line">iter()        <span class="comment">#用来生成迭代器，语法为:iter(object[, sentinel])</span></span><br><span class="line">例:</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> iter([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]):</span><br><span class="line">	print(i)</span><br><span class="line">obj = iter([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]) <span class="comment">#创建一个可迭代的对象  </span></span><br><span class="line">print(next(obj))       <span class="comment">#从11开始取值，每次取下一个值</span></span><br><span class="line">reversed()   <span class="comment">#反转，生成一个可迭代的对象</span></span><br><span class="line">例:</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> reversed([<span class="number">11</span>,<span class="number">44</span>,<span class="number">33</span>]):</span><br><span class="line">	print(i)               <span class="comment">#输出为33  44  11</span></span><br><span class="line">slice()                    <span class="comment">#根据索引切片</span></span><br><span class="line">例:</span><br><span class="line">[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>][slice(<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>)]       <span class="comment">#输出为[22,44]，列表截取1-4元素布长为2的切片</span></span><br><span class="line">zip()	                   <span class="comment">#用于将可迭代的对象作为参数，将对象中对应的元素打包成一个个元组</span></span><br><span class="line">例:</span><br><span class="line">li1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">li2 = [<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>]</span><br><span class="line">r = zip(li1 ,li2)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> r:</span><br><span class="line">    print(i)               <span class="comment">#输出为:(1,'a')   (2,'b')   (3,'c')   (4,'d')</span></span><br><span class="line">```	</span><br><span class="line"></span><br><span class="line"><span class="comment">## 正则表达式re</span></span><br><span class="line"><span class="comment">### 常用符号</span></span><br><span class="line">``` python</span><br><span class="line"><span class="string">'^'</span>  <span class="comment">#匹配字符串的开头，若放在[]内，则表示非。</span></span><br><span class="line">re.findall(<span class="string">'^s'</span>,<span class="string">'sb'</span>)                  <span class="comment">#输出为:['s']</span></span><br><span class="line">re.findall(<span class="string">'[^s]'</span>,<span class="string">'bssim'</span>)             <span class="comment">#输出为:['b', 'i', 'm']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'$'</span>  <span class="comment">#匹配字符串的末尾。</span></span><br><span class="line">re.findall(<span class="string">'b$'</span>,<span class="string">'sb'</span>)                  <span class="comment">#输出为:['b']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'.'</span>  <span class="comment">#匹配任意字符，除了换行符，当re.DOTALL标记被指定时，则可以匹配包括换行符的任意字符。</span></span><br><span class="line">re.findall(<span class="string">'.'</span>,<span class="string">'bssim\nc'</span>)             <span class="comment">#输出为:['b', 's', 's', 'i', 'm', 'c']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'*'</span>  <span class="comment">#匹配0个或多个的表达式。</span></span><br><span class="line">re.findall(<span class="string">'.*m'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['bssim']</span></span><br><span class="line">re.findall(<span class="string">'.*c'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['c']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'+'</span>  <span class="comment">#匹配1个或多个的表达式。</span></span><br><span class="line">re.findall(<span class="string">'.+c'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:[]</span></span><br><span class="line">re.findall(<span class="string">'.+m'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['bssim']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'?'</span>  <span class="comment">#匹配0个或1个由前面的正则表达式定义的片段，非贪婪方式</span></span><br><span class="line">re.findall(<span class="string">'.?m'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['im'] </span></span><br><span class="line">re.findall(<span class="string">'.m?'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['b', 's', 's', 'im', 'c']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'|'</span>  <span class="comment">#或运算</span></span><br><span class="line">re.findall(<span class="string">'s|i'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['s', 's', 'i']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'&#123;m&#125;'</span>    <span class="comment">#匹配前一个字符m次</span></span><br><span class="line">re.findall(<span class="string">'ab&#123;2&#125;'</span>,<span class="string">'abb abc abbcbbb'</span>)       <span class="comment">#输出为:['abb', 'abb']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'&#123;n,m&#125;'</span>  <span class="comment">#匹配前一个字符n到m次</span></span><br><span class="line">re.findall(<span class="string">"ab&#123;1,3&#125;"</span>,<span class="string">"abb abc abbcbbb"</span>)     <span class="comment">#输出为:['abb', 'ab', 'abb']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'(...)'</span>  <span class="comment">#分组匹配</span></span><br><span class="line"></span><br><span class="line"><span class="string">'\'      #后面接常用符号，可将其普通化，接普通字符，可将其特殊化</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'</span>\A<span class="string">'     #从字符开头匹配</span></span><br><span class="line"><span class="string">re.findall("\Aabc","alexabc")                #从开头匹配'</span>abc<span class="string">'，输出为:[],匹配不到</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'</span>\Z<span class="string">'     #匹配字符结尾，同'</span>$<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'</span>\d<span class="string">'     #匹配数字0-9</span></span><br><span class="line"><span class="string">re.findall('</span>\d<span class="string">','</span>ab1cd2ef3<span class="string">')           #输出为:['</span><span class="number">1</span><span class="string">','</span><span class="number">2</span><span class="string">','</span><span class="number">3</span><span class="string">']</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">'</span>\D<span class="string">'     #匹配非数字</span></span><br><span class="line"><span class="string">re.findall('</span>\D<span class="string">','</span>ab1cd2ef3<span class="string">')           #输出为:['</span>a<span class="string">','</span><span class="string">b','</span>c<span class="string">','</span>d<span class="string">','</span>e<span class="string">','</span><span class="string">f']</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'</span>\w<span class="string">'     #匹配字母和数字和下划线</span></span><br><span class="line"><span class="string">re.findall('</span>\w<span class="string">','</span>a1$_<span class="comment">#c2')             #输出为:['a','1','_','c','2']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'\W'</span>     <span class="comment">#匹配非字母和数字和下划线</span></span><br><span class="line">re.findall(<span class="string">'\W'</span>,<span class="string">'a1_$#c2'</span>)             <span class="comment">#输出为:['$','#']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'\s'</span>     <span class="comment">#匹配空白字符，如换行符等                 </span></span><br><span class="line">re.findall(<span class="string">'\s'</span>,<span class="string">'a\t\nb'</span>)              <span class="comment">#输出为:['\t','\n']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'\S'</span>	 <span class="comment">#匹配任何非空白字符，除换行符等除外</span></span><br><span class="line"></span><br><span class="line"><span class="string">'\1'</span>     <span class="comment">#表示对应的分组在此处出现一次，如'(ab)(cd)\1\2'，则\1实际指的是(ab),\2指的是(cd)</span></span><br></pre></td></tr></table></figure>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">re.findall()            <span class="comment">#把所有匹配到的字符放到以列表中的元素返回</span></span><br><span class="line">re.findall(string, start, end)                   <span class="comment">#可以与re.compile()一起使用，字符串指定位置start到end查找</span></span><br><span class="line">re.findall(<span class="string">'\d+a'</span>,<span class="string">'b13ac4ad'</span>)                    <span class="comment">#输出['13a', '4a']</span></span><br><span class="line">re.findall(<span class="string">'(\d+)a'</span>,<span class="string">'b13ac4ad'</span>)                  <span class="comment">#输出['13', '4']，找到13a和4a，并去掉a输出 </span></span><br><span class="line">re.findall(<span class="string">'((\d+)a)'</span>,<span class="string">'b13ac4ad'</span>)                <span class="comment">#输出[('13a', '13'), ('4a', '4')]，组内再分组</span></span><br><span class="line">re.findall(<span class="string">'(\w+)&#123;4&#125;'</span>,<span class="string">'lishizheng'</span>)              <span class="comment">#输出['g']，(\w)虽然重复了四次，但是表达式只有一个，默认输出末尾字符</span></span><br><span class="line"></span><br><span class="line">re.match(pattern, string, flags)              <span class="comment">#从头开始匹配,re.match只匹配字符串的开始，如果字符串开始不符合正则表达式，则匹配失败，函数返回None；而re.search匹配整个字符串，直到找到一个匹配。</span></span><br><span class="line">r1 = re.match(<span class="string">'h\w+'</span>,<span class="string">'hello world'</span>)</span><br><span class="line">r2 = re.match(<span class="string">'(h)(\w+)'</span>,<span class="string">'hello world'</span>)</span><br><span class="line">r3 = re.match(<span class="string">'(?P&lt;n1&gt;h)(?P&lt;n2&gt;\w+)'</span>,<span class="string">'hello world'</span>)</span><br><span class="line">print(r1.group(),r1.groups(),r1.groupdict())         <span class="comment">#输出为hello () &#123;&#125; ，用法和search相同</span></span><br><span class="line">print(r2.group(),r2.groups(),r2.groupdict())         <span class="comment">#输出为hello ('h', 'ello') &#123;&#125;</span></span><br><span class="line">print(r3.group(),r3.groups(),r3.groupdict())         <span class="comment">#输出为hello ('h', 'ello') &#123;'n1': 'h', 'n2': 'ello'&#125; </span></span><br><span class="line"></span><br><span class="line">re.search(pattern, string, flags)             <span class="comment">#匹配整个字符串，直到找到一个匹配，返回一个match对象，未匹配成功返回None</span></span><br><span class="line">re.search(pattern, string, flags).group()     <span class="comment">#group()默认等于group(0),即所有的元素，输出为字符串 </span></span><br><span class="line">re.search(<span class="string">'www'</span>, <span class="string">'www.runoob.com'</span>).span())    <span class="comment">#可查看匹配的位置</span></span><br><span class="line"></span><br><span class="line">re.sub(pattern, repl, string, count,flag)        <span class="comment">#匹配字符并替换，pattern为正则，repl为需要替换成的字符串,也可为函数，string为原始字符串，count为匹配模式后替换的最大数量，flag为标志位</span></span><br><span class="line">re.sub(<span class="string">'[0-9]'</span>,<span class="string">'|'</span>, <span class="string">'a1b2c3d e8'</span>,count=<span class="number">2</span>)        <span class="comment">#输出为新的字符串:'a|b|c3d e8'</span></span><br><span class="line">re.sub(<span class="string">'[0-9]'</span>,<span class="string">'|'</span>, <span class="string">'a1b2c3d e8'</span>)                <span class="comment">#没有count或者等于0默认全部替换，输出为新的字符串:'a|b|c|d e|'</span></span><br><span class="line"> </span><br><span class="line">re.compile()            <span class="comment">#编译正则表达式</span></span><br><span class="line">rule = re.compile(<span class="string">'[0-9]'</span>,re.I)          <span class="comment">#将正则编译放到一个变量</span></span><br><span class="line">rule.split(<span class="string">'a1b2c3d e8'</span>)                 <span class="comment">#根据这个规则来进行分割，输出为:['a', 'b', 'c', 'd e', '']</span></span><br><span class="line">rule.findall(<span class="string">'run88oob123google456'</span>, <span class="number">0</span>, <span class="number">10</span>)      <span class="comment">#查找字符串0-10的位置的所有数字，输出为:['8','8','1','2']</span></span><br><span class="line"></span><br><span class="line">re.finditer(pattern, string, flags=<span class="number">0</span>)    <span class="comment">#和 findall 类似，在字符串中找到正则表达式所匹配的所有子串，并把它们作为一个迭代器返回。</span></span><br><span class="line">       </span><br><span class="line">re.split()              <span class="comment">#将匹配到的格式当做分割点对字符串分割成列表</span></span><br><span class="line">re.split(<span class="string">'[0-9]'</span>, <span class="string">'a1b2c3d e8'</span>)             <span class="comment">#输出为:['a', 'b', 'c', 'd e', '']</span></span><br><span class="line">re.split(<span class="string">'(ab)'</span>,<span class="string">'123ab456ab789'</span>,<span class="number">1</span>)          <span class="comment">#输出为:['123', 'ab', '456ab789'],加()表示连表达式匹配一起输出,1表示匹配一次，默认匹配多次</span></span><br><span class="line"></span><br><span class="line">flag说明</span><br><span class="line">re.I	<span class="comment">#使匹配对大小写不敏感</span></span><br><span class="line">re.L	<span class="comment">#做本地化识别（locale-aware）匹配</span></span><br><span class="line">re.M	<span class="comment">#多行匹配，影响 ^ 和 $</span></span><br><span class="line">re.S	<span class="comment">#使 . 匹配包括换行在内的所有字符</span></span><br><span class="line">re.U	<span class="comment">#根据Unicode字符集解析字符。这个标志影响 \w, \W, \b, \B.</span></span><br><span class="line">re.X	<span class="comment">#该标志通过给予你更灵活的格式以便你将正则表达式写得更易于理解。</span></span><br></pre></td></tr></table></figure>
<h3 id="正则表达式之计算器"><a href="#正则表达式之计算器" class="headerlink" title="正则表达式之计算器"></a>正则表达式之计算器</h3><p>用户输入数学表达式，含+-<em>/和()，计算结果，例如:’1 - 2 </em> ((60-30 +(-40/5) <em> (9-2</em>5/3 + 7 /3<em>99/4</em>2998 +10 <em> 568/14 )) - (-4</em>3)/ (16-3*2))’<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(arg)</span>:</span></span><br><span class="line">	sum1 = eval(arg)             <span class="comment">#执行一个字符串形式的算术表达式</span></span><br><span class="line">	<span class="keyword">return</span> sum1	</span><br><span class="line">	</span><br><span class="line">inp = input(<span class="string">"请输入您要计算的数学表达式，其中包含加减乘除:"</span>)</span><br><span class="line">exp = inp</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">	list = re.split(<span class="string">'\(([^()]+)\)'</span>, exp , <span class="number">1</span>)         <span class="comment">#根据第一个括号内不含括号的表达式进行分割</span></span><br><span class="line">	<span class="keyword">if</span> len(list) == <span class="number">3</span>:</span><br><span class="line">		temp1 = f1(list[<span class="number">1</span>])</span><br><span class="line">		temp2 = list[<span class="number">0</span>] + str(temp1) +list[<span class="number">2</span>]</span><br><span class="line">		exp = temp2</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		sum = f1(list[<span class="number">0</span>])</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">print(<span class="string">"%s = %d"</span> %(inp,sum))</span><br></pre></td></tr></table></figure></p>
<h2 id="常用模块"><a href="#常用模块" class="headerlink" title="常用模块"></a>常用模块</h2><h3 id="time"><a href="#time" class="headerlink" title="time"></a>time</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time             <span class="comment">#导入time模块,如果执行`from time import time`,则调用时少写一个time</span></span><br><span class="line">print(time.clock())     <span class="comment">#返回处理器时间,3.3开始已废弃 , 改成了time.process_time()测量处理器运算时间,不包括sleep时间,不稳定,mac上测不出来输出为:8.552505542023591e-07</span></span><br><span class="line">print(time.altzone)     <span class="comment">#返回与utc时间的时间差,以秒计算，输出为:-32400</span></span><br><span class="line">rint(time.asctime())    <span class="comment">#返回时间格式"Fri Aug 19 11:14:16 2016",输出为:Tue Mar 27 13:45:09 2018</span></span><br><span class="line">print(time.localtime()) <span class="comment">#返回本地时间 的struct time对象格式，输出为:time.struct_time(tm_year=2018, tm_mon=3, tm_mday=27, tm_hour=13, tm_min=45, tm_sec=9, tm_wday=1, tm_yday=86, tm_isdst=0)</span></span><br><span class="line">print(time.gmtime(time.time()<span class="number">-800000</span>)) <span class="comment">#返回utc时间的struc时间对象格式,输出为:time.struct_time(tm_year=2018, tm_mon=3, tm_mday=17, tm_hour=23, tm_min=31, tm_sec=49, tm_wday=5, tm_yday=76, tm_isdst=0)</span></span><br><span class="line">print(time.asctime(time.localtime()))  <span class="comment">#输出为:Tue Mar 27 13:45:09 2018</span></span><br><span class="line">print(time.ctime())                    <span class="comment">#输出为:Tue Mar 27 13:45:09 2018</span></span><br><span class="line">truct = time.strptime(<span class="string">"2016/05/22"</span>,<span class="string">"%Y/%m/%d"</span>) <span class="comment">#将日期字符串 转成 struct时间对象格式</span></span><br><span class="line">print(string_2_struct)                         <span class="comment">#输出为:time.struct_time(tm_year=2016, tm_mon=5, tm_mday=22, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=6, tm_yday=143, tm_isdst=-1)</span></span><br><span class="line">struct_2_stamp = time.mktime(string_2_struct)  <span class="comment">#将struct时间对象转成时间戳</span></span><br><span class="line">print(struct_2_stamp)                          <span class="comment">#输出为:1463846400.0   </span></span><br><span class="line">print(time.gmtime(time.time()<span class="number">-86640</span>))          <span class="comment">#将utc时间戳转换成struct_time格式,输出为:time.struct_time(tm_year=2018, tm_mon=3, tm_mday=26, tm_hour=5, tm_min=49, tm_sec=7, tm_wday=0, tm_yday=85, tm_isdst=0)</span></span><br><span class="line">print(time.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>,time.gmtime())) <span class="comment">#将utc struct_time格式转成指定的字符串格式,输出为:2018-03-27 05:53:07</span></span><br><span class="line">print(time.strftime(<span class="string">'%Y%m%d%H%M'</span>,time.localtime(time.time())))  <span class="comment">#取本地时间的时间戳，输出为:201803271406</span></span><br><span class="line">print(time.strftime(<span class="string">'%Y%m%d%H%M'</span>,time.localtime()))             <span class="comment">#取本地时间的时间戳，输出为:201803271406</span></span><br><span class="line">print(time.strftime(<span class="string">'%Y%m%d%H%M'</span>))                              <span class="comment">#取本地时间的时间戳，输出为:201803271406</span></span><br></pre></td></tr></table></figure>
<h3 id="datetime"><a href="#datetime" class="headerlink" title="datetime"></a>datetime</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime    <span class="comment">#导入datetime模块</span></span><br><span class="line">print(datetime.datetime.now())                   <span class="comment">#输出为:2018-03-27 13:56:12.918226     </span></span><br><span class="line">print(datetime.date.fromtimestamp(time.time()))  <span class="comment">#输出为:2018-03-27</span></span><br><span class="line">print(datetime.datetime.now() + datetime.timedelta(<span class="number">3</span>))  <span class="comment">#当前时间加三天，输出为:2018-03-30 13:58:55.264512</span></span><br><span class="line">print(datetime.datetime.now() + datetime.timedelta(<span class="number">-3</span>))  <span class="comment">#当前时间减三天，输出为:2018-03-24 13:58:55.264512</span></span><br><span class="line">print(datetime.datetime.now() + datetime.timedelta(hours=<span class="number">3</span>)) <span class="comment">#当前时间加三小时，输出为:2018-03-27 16:58:55.264512</span></span><br><span class="line">print(datetime.datetime.now() + datetime.timedelta(minutes=<span class="number">30</span>)) <span class="comment">#当前时间加30分钟</span></span><br><span class="line">print(datetime.datetime.now() + datetime.timedelta(weeks=<span class="number">1</span>))    <span class="comment">#当前时间加一周</span></span><br><span class="line">c_time  = datetime.datetime.now()</span><br><span class="line">print(c_time.replace(minute=<span class="number">3</span>,hour=<span class="number">2</span>))                          <span class="comment">#时间替换</span></span><br></pre></td></tr></table></figure>
<h3 id="sys"><a href="#sys" class="headerlink" title="sys"></a>sys</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys         <span class="comment">#导入sys模块</span></span><br><span class="line">sys.argv           <span class="comment">#命令行参数List,执行python文件时可以传入多个参数,参数以列表的形式保存,第一个元素是程序本身路径</span></span><br><span class="line">sys.exit(n)        <span class="comment">#退出程序，正常退出时exit(0)</span></span><br><span class="line">sys.version        <span class="comment">#获取Python解释程序的版本信息</span></span><br><span class="line">sys.maxint         <span class="comment">#最大的Int值</span></span><br><span class="line">sys.path           <span class="comment">#返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值,默认当前路径优先,python\lib\site-packages 路径存放所有第三方安装的模块 </span></span><br><span class="line">sys.platform       <span class="comment">#返回操作系统平台名称</span></span><br><span class="line">sys.stdout.write(<span class="string">'please:'</span>)</span><br><span class="line">val = sys.stdin.readline()[:<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<h4 id="进度条作业"><a href="#进度条作业" class="headerlink" title="进度条作业"></a>进度条作业</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> sys,time</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">31</span>):</span><br><span class="line">    sys.stdout.write(<span class="string">'\r'</span>)             <span class="comment">#清除屏幕输出</span></span><br><span class="line">    sys.stdout.write(<span class="string">'%s%% | %s'</span> %(int(i/<span class="number">30</span>*<span class="number">100</span>),int(i/<span class="number">30</span>*<span class="number">100</span>)*<span class="string">'*'</span>))</span><br><span class="line">    sys.stdout.flush()                 <span class="comment">#刷新，每一次都输出</span></span><br><span class="line">    time.sleep(<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure>
<h4 id="将用户传入的参数变为文件夹"><a href="#将用户传入的参数变为文件夹" class="headerlink" title="将用户传入的参数变为文件夹"></a>将用户传入的参数变为文件夹</h4><figure class="highlight python"><figcaption><span>#例如文件名为createdir.py，则执行`python create.py a b c`就会在当前目录新建a,b,c三个目录</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> sys,os</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(sys.argv)):</span><br><span class="line">    os.mkdir(sys.argv[i])</span><br></pre></td></tr></table></figure>
<h3 id="pickle和json"><a href="#pickle和json" class="headerlink" title="pickle和json"></a>pickle和json</h3><p>用于序列化和反序列化的两个模块，提供了四个功能:dumps、dump、loads、load，pickle用于python内部，json可与其他语言共用<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pickle.loads()     <span class="comment">#将字符串转化为python数据类型列表，元组，字典，可从文件中读取列表，元组，字典类型的数据，主要使用带s的    </span></span><br><span class="line">pickle.load()</span><br><span class="line">pickle.dumps()     <span class="comment">#将python数据类型转化为字符串，与open结合可将列表，元组，字典类型的数据放进文件中</span></span><br><span class="line">pickle.dump()</span><br></pre></td></tr></table></figure></p>
<h4 id="购物车相关"><a href="#购物车相关" class="headerlink" title="购物车相关"></a>购物车相关</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line">account_info =&#123;</span><br><span class="line">    <span class="number">1</span>:&#123;</span><br><span class="line">        <span class="string">'name'</span>:<span class="string">'liyunliang'</span>,</span><br><span class="line">        <span class="string">'passwd'</span>:<span class="string">'lylapqh'</span>,</span><br><span class="line">        <span class="string">'tel'</span>:<span class="string">'13888675421'</span>,</span><br><span class="line">        <span class="string">'balance'</span>:<span class="number">15000</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">f = open(<span class="string">'account_db'</span>,<span class="string">'wb'</span>)                 </span><br><span class="line">f.write(pickle.dumps(account_info))                  <span class="comment">#将字典的信息写进数据文件中</span></span><br><span class="line"><span class="comment"># pickle.dump(account_info,f)  和上面等价</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line">account_file = open(<span class="string">'account_db'</span>,<span class="string">'rb'</span>)                   </span><br><span class="line">account_dic = pickle.loads(account_file.read())      <span class="comment">#将数据文件读到字典里</span></span><br><span class="line"><span class="comment"># account_dic = pickle.load(account_file) 和上面等价      </span></span><br><span class="line">account_file.close()</span><br><span class="line">account_dic[<span class="number">1</span>][<span class="string">'balance'</span>] -= <span class="number">500</span>                     <span class="comment">#购物后找到对应人账户余额减去商品价格</span></span><br><span class="line">f = open(<span class="string">'account_db'</span>,<span class="string">'wb'</span>)</span><br><span class="line">f.write(pickle.dumps(account_dic))                   <span class="comment">#将新的字典写入数据文件</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<h3 id="os"><a href="#os" class="headerlink" title="os"></a>os</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">os.getcwd()                 <span class="comment">#获取当前工作目录，即当前python脚本工作的目录路径</span></span><br><span class="line">os.chdir(<span class="string">"dirname"</span>)         <span class="comment">#改变当前脚本工作目录；相当于shell下cd</span></span><br><span class="line">os.curdir                   <span class="comment">#返回当前目录: ('.')</span></span><br><span class="line">os.pardir                   <span class="comment">#获取当前目录的父目录字符串名：('..')</span></span><br><span class="line">os.makedirs(<span class="string">'dir1/dir2'</span>)    <span class="comment">#可生成多层递归目录</span></span><br><span class="line">os.removedirs(<span class="string">'dirname1'</span>)   <span class="comment">#若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推</span></span><br><span class="line">os.mkdir(<span class="string">'dirname'</span>)         <span class="comment">#生成单级目录；相当于shell中mkdir dirname</span></span><br><span class="line">os.rmdir(<span class="string">'dirname'</span>)         <span class="comment">#删除单级空目录，若目录不为空则无法删除，报错；相当于shell中rmdir dirname</span></span><br><span class="line">os.listdir(<span class="string">'dirname'</span>)       <span class="comment">#列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印</span></span><br><span class="line">os.remove()                 <span class="comment">#删除一个文件</span></span><br><span class="line">os.rename(<span class="string">"oldname"</span>,<span class="string">"new"</span>)  <span class="comment">#重命名文件/目录</span></span><br><span class="line">os.stat(<span class="string">'path/filename'</span>)    <span class="comment">#获取文件/目录信息</span></span><br><span class="line">os.sep                      <span class="comment">#操作系统特定的路径分隔符，win下为"\\",Linux下为"/"</span></span><br><span class="line">os.linesep                  <span class="comment">#当前平台使用的行终止符，win下为"\t\n",Linux下为"\n"</span></span><br><span class="line">os.pathsep                  <span class="comment">#用于分割文件路径的字符串</span></span><br><span class="line">os.name                     <span class="comment">#字符串指示当前使用平台。win-&gt;'nt'; Linux-&gt;'posix'</span></span><br><span class="line">os.system(<span class="string">"bash command"</span>)   <span class="comment">#运行shell命令，直接显示</span></span><br><span class="line">os.environ                  <span class="comment">#获取系统环境变量</span></span><br><span class="line">os.path.abspath(path)       <span class="comment">#返回path规范化的绝对路径</span></span><br><span class="line">os.path.split(path)         <span class="comment">#将path分割成目录和文件名二元组返回</span></span><br><span class="line">os.path.dirname(path)       <span class="comment">#返回path的目录。其实就是os.path.split(path)的第一个元素</span></span><br><span class="line">os.path.basename(path)      <span class="comment">#返回path最后的文件名。如何path以／或\结尾，那么就会返回空值。即os.path.split(path)的第二个元素</span></span><br><span class="line">os.path.exists(path)        <span class="comment">#如果path存在，返回True；如果path不存在，返回False</span></span><br><span class="line">os.path.isabs(path)         <span class="comment">#如果path是绝对路径，返回True</span></span><br><span class="line">os.path.isfile(path)        <span class="comment">#如果path是一个存在的文件，返回True。否则返回False</span></span><br><span class="line">os.path.isdir(path)         <span class="comment">#如果path是一个存在的目录，则返回True。否则返回False</span></span><br><span class="line">os.path.join(path1[, path2[, ...]])  <span class="comment">#将多个路径组合后返回，第一个绝对路径之前的参数将被忽略</span></span><br><span class="line">os.path.getatime(path)      <span class="comment">#返回path所指向的文件或者目录的最后存取时间</span></span><br><span class="line">os.path.getmtime(path)      <span class="comment">#返回path所指向的文件或者目录的最后修改时间</span></span><br></pre></td></tr></table></figure>
<h3 id="hashlib"><a href="#hashlib" class="headerlink" title="hashlib"></a>hashlib</h3><p>用于加密相关的操作，代替了md5模块和sha模块，主要提供 SHA1, SHA224, SHA256, SHA384, SHA512 ，MD5 算法<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># ######## md5 ########</span></span><br><span class="line">hash = hashlib.md5()</span><br><span class="line"><span class="comment"># help(hash.update)</span></span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line">print(hash.digest())</span><br><span class="line"> </span><br><span class="line"><span class="comment">######## sha1 ######## </span></span><br><span class="line">hash = hashlib.sha1()</span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ######## sha256 ######## </span></span><br><span class="line">hash = hashlib.sha256()</span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ######## sha384 ########</span></span><br><span class="line">hash = hashlib.sha384()</span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ######## sha512 ######## </span></span><br><span class="line">hash = hashlib.sha512()</span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"></span><br><span class="line">以上加密算法虽然依然非常厉害，但时候存在缺陷，即：通过撞库可以反解。所以，有必要对加密算法中添加自定义key再来做加密。</span><br><span class="line"><span class="comment"># ######## md5 ########</span></span><br><span class="line">hash = hashlib.md5(bytes(<span class="string">'898oaFs09f'</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">print(hash.hexdigest())</span><br></pre></td></tr></table></figure></p>
<h3 id="hmac"><a href="#hmac" class="headerlink" title="hmac"></a>hmac</h3><p>python内置还有一个 hmac 模块，它内部对我们创建 key 和 内容 进行进一步的处理然后再加密<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hmac </span><br><span class="line">h = hmac.new(bytes(<span class="string">'898oaFs09f'</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">h.update(bytes(<span class="string">'admin'</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">print(h.hexdigest())</span><br></pre></td></tr></table></figure></p>
<h3 id="random"><a href="#random" class="headerlink" title="random"></a>random</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">print(random.random())                 <span class="comment">#随机生成0-1之间的小数</span></span><br><span class="line">print(random.randint(<span class="number">1</span>, <span class="number">2</span>))            <span class="comment">#随机生成1或者2</span></span><br><span class="line">print(random.randrange(<span class="number">1</span>, <span class="number">10</span>))         <span class="comment">#随机生成1-10中的一个数</span></span><br></pre></td></tr></table></figure>
<h4 id="4位的随机数验证码。"><a href="#4位的随机数验证码。" class="headerlink" title="4位的随机数验证码。"></a>4位的随机数验证码。</h4><p>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">	temp=<span class="string">""</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">		num = random.randrange(<span class="number">0</span>,<span class="number">4</span>)</span><br><span class="line">		<span class="keyword">if</span> num == <span class="number">0</span> <span class="keyword">or</span> num == <span class="number">2</span>:</span><br><span class="line">			rad1 = random.randrange(<span class="number">0</span>,<span class="number">10</span>)</span><br><span class="line">			temp += str(rad1)</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			rad2 = random.randrange(<span class="number">65</span>,<span class="number">91</span>)</span><br><span class="line">			temp += chr(rad2)                <span class="comment">#chr()为找到数字对应的字符</span></span><br><span class="line">	print(temp)</span><br><span class="line">	shuru = str(input(<span class="string">"请输入验证码:"</span>))</span><br><span class="line">	<span class="keyword">if</span> shuru == temp:</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="keyword">pass</span></span><br></pre></td></tr></table></figure></p>
<h3 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h3><p>XML是实现不同语言或程序之间进行数据交换的协议，XML文件格式如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Liechtenstein"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2023<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>141100<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"E"</span> <span class="attr">name</span>=<span class="string">"Austria"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"W"</span> <span class="attr">name</span>=<span class="string">"Switzerland"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Singapore"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2026<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>59900<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"N"</span> <span class="attr">name</span>=<span class="string">"Malaysia"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Panama"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>69<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2026<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>13600<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"W"</span> <span class="attr">name</span>=<span class="string">"Costa Rica"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"E"</span> <span class="attr">name</span>=<span class="string">"Colombia"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>操作XML<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET          <span class="comment">#解析文件或者字符串，做修改，都在内存中进行，原对象不改变，如需修改得重新write写入</span></span><br><span class="line">str_xml = open(<span class="string">'xo.xml'</span>, <span class="string">'r'</span>).read()             <span class="comment">#打开文件，读取XML内容，内容为xml格式的字符串</span></span><br><span class="line">print(ET.XML(str_xml))                           <span class="comment">#将xml公司的字符串解析成xml特殊对象，获取xml文件的根节点</span></span><br><span class="line">print(ET.parse(<span class="string">"xo.xml"</span>))                        <span class="comment">#直接解析xml文件</span></span><br><span class="line">print(ET.parse(<span class="string">"xo.xml"</span>).getroot())                <span class="comment">#获取xml文件的根节点</span></span><br><span class="line">print(ET.parse(<span class="string">"xo.xml"</span>).getroot().tag)            <span class="comment">#顶层标签</span></span><br><span class="line">root = ET.parse(<span class="string">"xo.xml"</span>).getroot()                <span class="comment">#与下面的相同</span></span><br><span class="line">root = ET.XML(str_xml)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> root:         <span class="comment">#遍历XML文档的第二层</span></span><br><span class="line">    print(child.tag, child.attrib)                 <span class="comment">#第二层节点的标签名称和标签属性</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> child:                                <span class="comment">#遍历XML文档的第三层</span></span><br><span class="line">        print(i.tag,i.text)                        <span class="comment">#第二层节点的标签名称和内容</span></span><br><span class="line">		</span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'year'</span>):    <span class="comment">#遍历XML中所有的指定的year节点</span></span><br><span class="line">    print(node.tag, node.text)                            <span class="comment">#节点的标签名称和内容</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'year'</span>):                 <span class="comment">#循环所有的year节点</span></span><br><span class="line">    new_year = int(node.text) + <span class="number">1</span>                         <span class="comment">#将year节点中的内容自增1</span></span><br><span class="line">    node.text = str(new_year)</span><br><span class="line">    node.set(<span class="string">'name'</span>, <span class="string">'SubHy'</span>)                             <span class="comment">#设置属性</span></span><br><span class="line">    node.set(<span class="string">'age'</span>, <span class="string">'18'</span>)</span><br><span class="line">    <span class="keyword">del</span> node.attrib[<span class="string">'name'</span>]                               <span class="comment">#删除属性</span></span><br><span class="line">tree = ET.ElementTree(root)                               <span class="comment">#保存文件</span></span><br><span class="line">tree.write(<span class="string">"newnew.xml"</span>, encoding=<span class="string">'utf-8'</span>)</span><br></pre></td></tr></table></figure></p>
<h4 id="缩进的保存一个XML文件"><a href="#缩进的保存一个XML文件" class="headerlink" title="缩进的保存一个XML文件"></a>缩进的保存一个XML文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">from</span> xml.dom <span class="keyword">import</span> minidom</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mkxml</span><span class="params">(elem,filename)</span>:</span></span><br><span class="line">    rough_string = ET.tostring(elem,<span class="string">'utf-8'</span>)</span><br><span class="line">    reparsed = minidom.parseString(rough_string)</span><br><span class="line">    raw_str = reparsed.toprettyxml(indent=<span class="string">"\t"</span>)</span><br><span class="line">    f = open(filename,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">    f.write(raw_str)</span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root = ET.Element(<span class="string">"famliy"</span>)                                     <span class="comment"># 创建根节点</span></span><br><span class="line"><span class="comment"># son1 = ET.Element('son', &#123;'name': '儿1'&#125;)                     #创建大儿子</span></span><br><span class="line">son1 = root.makeelement(<span class="string">'son'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿1'</span>&#125;)                                     </span><br><span class="line"><span class="comment"># son2 = ET.Element('son', &#123;"name": '儿2'&#125;)                     #创建小儿子</span></span><br><span class="line">son2 = root.makeelement(<span class="string">'son'</span>, &#123;<span class="string">"name"</span>: <span class="string">'儿2'</span>&#125;)</span><br><span class="line"><span class="comment"># grandson1 = ET.Element('grandson', &#123;'name': '儿11'&#125;)          #在大儿子中创建两个孙子  </span></span><br><span class="line">grandson11 = son1.makeelement(<span class="string">'grandson'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿11'</span>&#125;)</span><br><span class="line"><span class="comment"># grandson2 = ET.Element('grandson', &#123;'name': '儿12'&#125;)</span></span><br><span class="line">grandson12 = son1.makeelement(<span class="string">'grandson'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿12'</span>&#125;)</span><br><span class="line">son1.append(grandson11)                                         <span class="comment">#把孙子添加到儿子1节点中</span></span><br><span class="line">son1.append(grandson12)</span><br><span class="line">root.append(son1)                                               <span class="comment">#把儿子添加到根节点中</span></span><br><span class="line">root.append(son2)</span><br><span class="line">mkxml(root,<span class="string">"xxxoo.xml"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="xml命名空间，例如以H代指一个字符串”http-www-company-com-quot"><a href="#xml命名空间，例如以H代指一个字符串”http-www-company-com-quot" class="headerlink" title="xml命名空间，例如以H代指一个字符串”http://www.company.com&quot;"></a>xml命名空间，例如以H代指一个字符串”<a href="http://www.company.com&quot;" target="_blank" rel="noopener">http://www.company.com&quot;</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line">ET.register_namespace(<span class="string">'H'</span>,<span class="string">"http://www.company.com"</span>) <span class="comment">#some name</span></span><br><span class="line"><span class="comment"># build a tree structure</span></span><br><span class="line">root = ET.Element(<span class="string">"&#123;http://www.company.com&#125;STUFF"</span>)</span><br><span class="line">body = ET.SubElement(root, <span class="string">"&#123;http://www.company.com&#125;MORE_STUFF"</span>, attrib=&#123;<span class="string">"&#123;http://www.company.com&#125;hhh"</span>: <span class="string">"123"</span>&#125;)</span><br><span class="line">body.text = <span class="string">"STUFF EVERYWHERE!"</span></span><br><span class="line"><span class="comment"># wrap it in an ElementTree instance, and save as XML</span></span><br><span class="line">tree = ET.ElementTree(root)</span><br><span class="line">tree.write(<span class="string">"page.xml"</span>,xml_declaration=<span class="keyword">True</span>,encoding=<span class="string">'utf-8'</span>,method=<span class="string">"xml"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="requests第三方模块"><a href="#requests第三方模块" class="headerlink" title="requests第三方模块"></a>requests第三方模块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests,json</span><br><span class="line">ret = requests.get(<span class="string">'https://github.com/timeline.json'</span>)         <span class="comment">#无参数示例,get请求</span></span><br><span class="line">print(ret.url)                                                 <span class="comment">#输出请求网址的地址字符串类型'https://github.com/timeline.json' </span></span><br><span class="line">print(ret.text)                                                <span class="comment">#返回请求解析得到的字符串内容</span></span><br><span class="line">print(ret.content)                                             <span class="comment">#返回解析的二进制数据</span></span><br><span class="line">print(ret.cookies)                                             <span class="comment">#输出请求网址的cookies信息 </span></span><br><span class="line">print(ret.headers)                                             <span class="comment">#输出请求网址的headers所有信息</span></span><br><span class="line">print(ret.status_code)                                         <span class="comment">#输出请求页面的状态（状态码） </span></span><br><span class="line">print(ret.history)                                             <span class="comment">#输出请求的历史记录（以列表的形式显示）</span></span><br><span class="line">print(requests.codes.ok)                                       <span class="comment">#requests请求状态码，为200 </span></span><br><span class="line">ret.encoding = <span class="string">'utf-8'</span>                                         <span class="comment">#当解析到的输出乱码时,可设置编码 </span></span><br><span class="line"></span><br><span class="line">payload = &#123;<span class="string">'key1'</span>: <span class="string">'value1'</span>, <span class="string">'key2'</span>: <span class="string">'value2'</span>&#125;</span><br><span class="line">ret = requests.get(<span class="string">"http://httpbin.org/get"</span>, params=payload)   <span class="comment">#有参数示例,get请求</span></span><br><span class="line">print(ret.url)                                                 <span class="comment">#返回字符串'http://httpbin.org/get?key1=value1&amp;key2=value2'</span></span><br><span class="line">print(ret.text)</span><br><span class="line"></span><br><span class="line">ret = requests.post(<span class="string">"http://httpbin.org/post"</span>, data=payload)   <span class="comment">#基本POST请求示例 </span></span><br><span class="line">print(ret.text)</span><br><span class="line"></span><br><span class="line">url = <span class="string">'https://api.github.com/some/endpoint'</span></span><br><span class="line">payload = &#123;<span class="string">'some'</span>: <span class="string">'data'</span>&#125;</span><br><span class="line">headers = &#123;<span class="string">'content-type'</span>: <span class="string">'application/json'</span>&#125;</span><br><span class="line">ret = requests.post(url, data=json.dumps(payload), headers=headers)    <span class="comment">#发送请求头和数据实例</span></span><br><span class="line">print(ret.text)</span><br><span class="line">print(ret.cookies)</span><br></pre></td></tr></table></figure>
<h4 id="QQ号是否在线检测"><a href="#QQ号是否在线检测" class="headerlink" title="QQ号是否在线检测"></a>QQ号是否在线检测</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment">#输入参数：QQ号码 String。返回数据：String，Y = 在线；N = 离线；E = QQ号码错误；A = 商业用户验证失败；V = 免费用户超过数量</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">qqonlinedetect</span><span class="params">(args)</span>:</span></span><br><span class="line">    r = requests.get(<span class="string">'http://www.webxml.com.cn//webservices/qqOnlineWebService.asmx/qqCheckOnline?qqCode='</span>+args)</span><br><span class="line">    result = r.text</span><br><span class="line">    node = ET.XML(result)     <span class="comment">#解析XML格式内容</span></span><br><span class="line">    <span class="keyword">if</span> node.text == <span class="string">"Y"</span>:      <span class="comment">#获取内容</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    ret = qqonlinedetect(input(<span class="string">"请输入QQ号:"</span>))</span><br><span class="line">    <span class="keyword">if</span> ret:</span><br><span class="line">        print(<span class="string">"您的QQ号在线"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">"您的QQ号离线"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="列车时刻表"><a href="#列车时刻表" class="headerlink" title="列车时刻表"></a>列车时刻表</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="comment">#使用内置模块urllib发送HTTP请求，或者XML格式内容，该例中车次为:K113</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">f = urllib.request.urlopen('http://www.webxml.com.cn/WebServices/TrainTimeWebService.asmx/getDetailInfoByTrainCode?TrainCode=K113&amp;UserID=')</span></span><br><span class="line"><span class="string">result = f.read().decode('utf-8')</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment">#使用第三方模块requests发送HTTP请求，获取XML格式内容</span></span><br><span class="line">r = requests.get(<span class="string">'http://www.webxml.com.cn/WebServices/TrainTimeWebService.asmx/getDetailInfoByTrainCode?TrainCode=K113&amp;UserID='</span>)</span><br><span class="line">result = r.text</span><br><span class="line">root = ET.XML(result)   <span class="comment"># 解析XML格式内容</span></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'TrainDetailInfo'</span>):</span><br><span class="line">    print(node.find(<span class="string">'TrainStation'</span>).text,node.find(<span class="string">'StartTime'</span>).text,node.find(<span class="string">'KM'</span>).text)</span><br></pre></td></tr></table></figure>
<h3 id="configparser"><a href="#configparser" class="headerlink" title="configparser"></a>configparser</h3><p>configparser用于处理特定格式的文件，其本质上是利用open来操作文件。<br>xx文件如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[section1]  <span class="comment"># 节点</span></span><br><span class="line">k1 = v1     <span class="comment"># 值</span></span><br><span class="line">k2:v2       <span class="comment"># 值</span></span><br><span class="line"> </span><br><span class="line">[section2]  <span class="comment"># 节点</span></span><br><span class="line">k1 = v1     <span class="comment"># 值</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'xx'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">ret = config.sections()                        <span class="comment">#获取所有节点</span></span><br><span class="line">ret = config.items(<span class="string">'section1'</span>)                 <span class="comment">#获取指定节点下所有的键值对</span></span><br><span class="line">ret = config.options(<span class="string">'section1'</span>)               <span class="comment">#获取指定节点下所有的键</span></span><br><span class="line">v = config.get(<span class="string">'section1'</span>,<span class="string">'k1'</span>)                <span class="comment">#获取指定节点下的key</span></span><br><span class="line">has_sec = config.has_section(<span class="string">'section1'</span>)       <span class="comment">#检查指定节点是否在config中，返回True/False</span></span><br><span class="line">config.add_section(<span class="string">"SEC_1"</span>)                    <span class="comment">#添加一个节点，可以写到原文件，也可生成新文件</span></span><br><span class="line">config.write(open(<span class="string">'xx'</span>, <span class="string">'w'</span>))</span><br><span class="line">config.remove_section(<span class="string">"section1"</span>)              <span class="comment">#移除一个节点</span></span><br><span class="line">config.write(open(<span class="string">'xx'</span>, <span class="string">'w'</span>))</span><br><span class="line">has_opt = config.has_option(<span class="string">'section2'</span>, <span class="string">'k1'</span>)  <span class="comment">#检测指定节点和key是否在config中，同时存在返回True，否则返回False</span></span><br><span class="line">config.remove_option(<span class="string">'section1'</span>, <span class="string">'k1'</span>)         <span class="comment">#删除指定节点下的key及对应的值</span></span><br><span class="line">config.write(open(<span class="string">'xx'</span>, <span class="string">'w'</span>))</span><br><span class="line">config.set(<span class="string">'section1'</span>, <span class="string">'k10'</span>, <span class="string">"123"</span>)           <span class="comment">#新增一个节点，新增对应的key和值</span></span><br><span class="line">config.write(open(<span class="string">'xx'</span>, <span class="string">'w'</span>))</span><br></pre></td></tr></table></figure>
<h3 id="logging"><a href="#logging" class="headerlink" title="logging"></a>logging</h3><p>用于便捷记录日志且线程安全的模块。<br>注：只有【当前写等级】大于【日志等级】时，日志文件才被记录。<br>日志等级:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CRITICAL = <span class="number">50</span></span><br><span class="line">FATAL = CRITICAL</span><br><span class="line">ERROR = <span class="number">40</span></span><br><span class="line">WARNING = <span class="number">30</span></span><br><span class="line">WARN = WARNING</span><br><span class="line">INFO = <span class="number">20</span></span><br><span class="line">DEBUG = <span class="number">10</span></span><br><span class="line">NOTSET = <span class="number">0</span></span><br></pre></td></tr></table></figure></p>
<p>单文件日志记录<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.basicConfig(filename=<span class="string">'log.log'</span>,                                                           <span class="comment">#定义日志的格式，以及写等级</span></span><br><span class="line">                    format=<span class="string">'%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s'</span>,</span><br><span class="line">                    datefmt=<span class="string">'%Y-%m-%d %H:%M:%S %p'</span>,</span><br><span class="line">                    level=<span class="number">10</span>)                                                                     <span class="comment">#level=10也可以换成level=logging.DEBUG</span></span><br><span class="line">  </span><br><span class="line">logging.debug(<span class="string">'debug'</span>)</span><br><span class="line">logging.info(<span class="string">'info'</span>)</span><br><span class="line">logging.warning(<span class="string">'warning'</span>)</span><br><span class="line">logging.error(<span class="string">'error'</span>)</span><br><span class="line">logging.critical(<span class="string">'critical'</span>)</span><br><span class="line">logging.log(<span class="number">10</span>,<span class="string">'debug'</span>)             <span class="comment">#用法和logging.debug一致</span></span><br></pre></td></tr></table></figure></p>
<p>多文件日志记录<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="comment"># 定义文件</span></span><br><span class="line">file_1_1 = logging.FileHandler(<span class="string">'l1_1.log'</span>, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">fmt = logging.Formatter(fmt=<span class="string">"%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s"</span>)</span><br><span class="line">file_1_1.setFormatter(fmt)</span><br><span class="line">file_1_2 = logging.FileHandler(<span class="string">'l1_2.log'</span>, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">fmt = logging.Formatter()</span><br><span class="line">file_1_2.setFormatter(fmt)</span><br><span class="line"><span class="comment"># 定义日志</span></span><br><span class="line">logger1 = logging.Logger(<span class="string">'s2'</span>, level=logging.DEBUG)</span><br><span class="line">logger1.addHandler(file_1_1)</span><br><span class="line">logger1.addHandler(file_1_2)</span><br><span class="line"><span class="comment"># 写日志</span></span><br><span class="line">logger1.critical(<span class="string">'1111'</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="subprocess"><a href="#subprocess" class="headerlink" title="subprocess"></a>subprocess</h3><p>用于执行shell命令<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">ret1 = subprocess.check_output([<span class="string">"echo"</span>,<span class="string">"lyl"</span>])                <span class="comment">#执行命令不显示结果，如果正确执行 ，则返回执行结果(字节方式)，否则抛异常</span></span><br><span class="line">ret2 = subprocess.call(<span class="string">"echo lyl"</span>)                            <span class="comment">#执行命令并显示结果，如果正确执行 ，则返回0，否则抛异常</span></span><br><span class="line">ret3 = subprocess.check_call(<span class="string">"echo lyl"</span>)                      <span class="comment">#执行命令并显示结果，如果正确执行 ，则返回0，否则抛异常</span></span><br><span class="line">ret4 = subprocess.Popen(<span class="string">"echo lyl"</span>)                           <span class="comment">#执行命令并显示结果，如果正确执行，返回值为Popen对象</span></span><br><span class="line">print(ret1,ret2,ret3,ret4)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入某环境，依赖再输入，如:python</span></span><br><span class="line">obj = subprocess.Popen([<span class="string">"python"</span>], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=<span class="keyword">True</span>)</span><br><span class="line">obj.stdin.write(<span class="string">"print(1)\n"</span>)          <span class="comment">#执行的命令</span></span><br><span class="line">obj.stdin.write(<span class="string">"print(2)"</span>)</span><br><span class="line">obj.stdin.close()</span><br><span class="line">cmd_out = obj.stdout.read()            <span class="comment">#输出</span></span><br><span class="line">obj.stdout.close()</span><br><span class="line">cmd_error = obj.stderr.read()          <span class="comment">#错误 </span></span><br><span class="line">obj.stderr.close()                     </span><br><span class="line">print(cmd_out)                         <span class="comment">#输出:1,2 </span></span><br><span class="line">print(cmd_error)                </span><br><span class="line"></span><br><span class="line">out_error_list = obj.communicate()</span><br><span class="line">print(out_error_list)                  <span class="comment">#输出:('1\n2\n', '')</span></span><br><span class="line"></span><br><span class="line">out_error_list = obj.communicate(<span class="string">'print("hello")'</span>)             <span class="comment">#可直接接收命令并输出</span></span><br><span class="line">print(out_error_list)                  <span class="comment">#输出:('hello\n', '')</span></span><br></pre></td></tr></table></figure></p>
<h3 id="shutil"><a href="#shutil" class="headerlink" title="shutil"></a>shutil</h3><p>可进行高级的文件、文件夹、压缩包处理<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">shutil.copyfileobj(open(<span class="string">'old.xml'</span>,<span class="string">'r'</span>), open(<span class="string">'new.xml'</span>, <span class="string">'w'</span>))         <span class="comment">#拷贝文件</span></span><br><span class="line">shutil.copyfile(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)                                   <span class="comment">#拷贝文件</span></span><br><span class="line">shutil.copymode(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)                                   <span class="comment">#仅拷贝权限，内容、组、用户均不变，文件不存在会报错</span></span><br><span class="line">shutil.copystat(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)                                   <span class="comment">#仅拷贝状态的信息，包括：mode bits, atime, mtime, flags,文件不存在会报错</span></span><br><span class="line">shutil.copy(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)                                       <span class="comment">#拷贝文件和权限</span></span><br><span class="line">shutil.copy2(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)                                      <span class="comment">#拷贝文件和状态信息</span></span><br><span class="line">shutil.copytree(<span class="string">"G:\mysite"</span>, <span class="string">"G:\mysite1"</span>,ignore=shutil.ignore_patterns(<span class="string">'*.pyc'</span>, <span class="string">'tmp*'</span>))        <span class="comment">#递归拷贝文件夹，忽略pyc类型的文件和tmp开头的文件</span></span><br><span class="line">shutil.rmtree(<span class="string">"G:\mysite1"</span>)                                           <span class="comment">#递归的删除文件夹 </span></span><br><span class="line">shutil.move(<span class="string">"G:\mysite"</span>, <span class="string">"G:\mysite1"</span>)                                <span class="comment">#递归的去移动文件，它类似mv命令，其实就是重命名</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shutil.make_archive(base_name, format,...)</span></span><br><span class="line"><span class="comment"># 创建压缩包并返回文件路径，例如：zip、tar</span></span><br><span class="line"><span class="comment">#base_name： 压缩包的文件名，也可以是压缩包的路径。只是文件名时，则保存至当前目录，否则保存至指定路径，</span></span><br><span class="line">＃　如：www                        =&gt;保存至当前路径</span><br><span class="line">＃如：/Users/wupeiqi/www =&gt;保存至/Users/wupeiqi/</span><br><span class="line"><span class="comment"># format：	压缩包种类，“zip”, “tar”, “bztar”，“gztar”</span></span><br><span class="line"><span class="comment"># root_dir：	要压缩的文件夹路径（默认当前目录）</span></span><br><span class="line"><span class="comment"># owner：	用户，默认当前用户</span></span><br><span class="line"><span class="comment"># group：	组，默认当前组</span></span><br><span class="line"><span class="comment"># logger：	用于记录日志，通常是logging.Logger对象</span></span><br><span class="line">shutil.make_archive(<span class="string">"G:\\aaaaa"</span>,<span class="string">"zip"</span>,root_dir=<span class="string">"G:\mysite"</span>)           <span class="comment">#将G:\mysite下的文件打包到G:\aaaaa.zip</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shutil 对压缩包的处理是调用 ZipFile 和 TarFile 两个模块来进行的</span></span><br><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line">z = zipfile.ZipFile(<span class="string">'laxi.zip'</span>, <span class="string">'w'</span>)        <span class="comment">#压缩后的文件为laxi.zip</span></span><br><span class="line">z.write(<span class="string">'log.log'</span>)                          <span class="comment">#往压缩文件添加内容</span></span><br><span class="line">z.write(<span class="string">'xx'</span>)</span><br><span class="line">z.close()</span><br><span class="line">z = zipfile.ZipFile(<span class="string">'laxi.zip'</span>, <span class="string">'a'</span>)        <span class="comment">#以追加的方式打开</span></span><br><span class="line">z.write(<span class="string">'a1.py'</span>)                            <span class="comment">#往压缩文件中追加文件</span></span><br><span class="line">z.close()</span><br><span class="line">z = zipfile.ZipFile(<span class="string">'laxi.zip'</span>, <span class="string">'r'</span>)        <span class="comment">#解压缩</span></span><br><span class="line">z.extractall()                              <span class="comment">#全部解压</span></span><br><span class="line">print(z.namelist())                         <span class="comment">#查看压缩包里的文件</span></span><br><span class="line">z.extract(member=<span class="string">"log.log"</span>)                 <span class="comment">#指定文件解压</span></span><br><span class="line">z.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line">tar = tarfile.open(<span class="string">'your.zip'</span>,<span class="string">'w'</span>)          <span class="comment">#压缩后的文件为you.zip  </span></span><br><span class="line">tar.add(<span class="string">'log.log'</span>, arcname=<span class="string">'new.log'</span>)       <span class="comment">#往压缩文件添加内容并改文件名</span></span><br><span class="line">tar.add(<span class="string">'xx'</span>, arcname=<span class="string">'cmdb.log'</span>)</span><br><span class="line">tar.close()</span><br><span class="line">tar = tarfile.open(<span class="string">'your.zip'</span>,<span class="string">'r'</span>)</span><br><span class="line">print(tar.getnames())                       <span class="comment">#查看压缩包里的文件</span></span><br><span class="line">tar.extractall()                            <span class="comment">#全部解压</span></span><br><span class="line">tar.extract(member=<span class="string">"new.log"</span>)              </span><br><span class="line">tar.close()</span><br></pre></td></tr></table></figure></p>
<h3 id="paramiko"><a href="#paramiko" class="headerlink" title="paramiko"></a>paramiko</h3><p>paramiko是一个用于做远程控制的模块，使用该模块可以对远程服务器进行命令或文件操作<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line">ssh = paramiko.SSHClient()</span><br><span class="line">ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line">ssh.connect(<span class="string">'192.168.1.2'</span>, <span class="number">22</span>, <span class="string">'root'</span>, <span class="string">'rootadmin'</span>)                 <span class="comment">#使用用户名和密码远程执行命令</span></span><br><span class="line"><span class="comment"># private_key_path = '/home/auto/.ssh/id_rsa'                       #密钥认证来远程执行</span></span><br><span class="line"><span class="comment"># key = paramiko.RSAKey.from_private_key_file(private_key_path)</span></span><br><span class="line"><span class="comment"># ssh.connect('192.168.1.2', 22, 'root', key)</span></span><br><span class="line">stdin, stdout, stderr = ssh.exec_command(<span class="string">'df -h'</span>)</span><br><span class="line"><span class="keyword">print</span> (stdout.read())</span><br><span class="line">ssh.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os,sys,paramiko</span><br><span class="line">t = paramiko.Transport((<span class="string">"192.168.229.70"</span>,<span class="number">22</span>))</span><br><span class="line">t.connect(username=<span class="string">"root"</span>,password=<span class="string">"rootadmin"</span>)</span><br><span class="line"><span class="comment"># pravie_key_path = '/home/auto/.ssh/id_rsa'                       #密钥认证</span></span><br><span class="line"><span class="comment"># key = paramiko.RSAKey.from_private_key_file(pravie_key_path)</span></span><br><span class="line"><span class="comment"># t.connect(username='root',pkey=key)</span></span><br><span class="line">sftp = paramiko.SFTPClient.from_transport(t)</span><br><span class="line">sftp.put(<span class="string">"a1.py"</span>,<span class="string">"/tmp/test.py"</span>)                                   <span class="comment">#服务器上传文件</span></span><br><span class="line">sftp.get(<span class="string">"/mancenter-3.9.3.war"</span>,<span class="string">"G:\\mancenter.war"</span>)               <span class="comment">#服务器下载文件</span></span><br><span class="line">t.close()</span><br></pre></td></tr></table></figure></p>
<h3 id="模块拾遗"><a href="#模块拾遗" class="headerlink" title="模块拾遗"></a>模块拾遗</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line">print(vars())      <span class="comment">#python自带的全局变量</span></span><br><span class="line">print(__doc__)     <span class="comment">#py文件的注释</span></span><br><span class="line">print(__package__) <span class="comment">#指定文件所在的包，用.分割，当前文件返回None</span></span><br><span class="line">print(__loader__)</span><br><span class="line">print(__file__)    <span class="comment">#当前文件路径</span></span><br><span class="line">print(__name__)    <span class="comment">#如果是主文件,在当前文件执行而不是调用，__name__ == "__main__"，否则等于模块名</span></span><br><span class="line">print(__cached__)  <span class="comment">#其他文件的缓存值，当前为None</span></span><br><span class="line">print(__builtins__)  <span class="comment">#内置函数在这里面</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"执行了"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:     <span class="comment">#调用主文件前，必须加这个条件，只有当执行自身的文件才会执行f1()，被导入不执行f1()</span></span><br><span class="line">    f1()</span><br></pre></td></tr></table></figure>
<h3 id="os-path添加路径到sys-path"><a href="#os-path添加路径到sys-path" class="headerlink" title="os.path添加路径到sys.path"></a>os.path添加路径到sys.path</h3><p>(1)丶当前文件路径为0410\s2.py，想添加0410\li路径，添加路径后直接导入li下的s1.py文件<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os,sys</span><br><span class="line">temp1 = os.path.dirname(__file__)     <span class="comment">#当前文件路径</span></span><br><span class="line">temp2 = <span class="string">"li"</span></span><br><span class="line">temp = os.path.join(temp1,temp2)      <span class="comment">#路径拼接</span></span><br><span class="line">sys.path.append(temp)                 <span class="comment">#路径添加到sys.path</span></span><br><span class="line"><span class="keyword">import</span> s1</span><br></pre></td></tr></table></figure></p>
<h2 id="字符串格式化"><a href="#字符串格式化" class="headerlink" title="字符串格式化"></a>字符串格式化</h2><h3 id="百分号方式"><a href="#百分号方式" class="headerlink" title="百分号方式"></a>百分号方式</h3><p>%[(name)][flags][width].[precision]typecode<br>(1)丶(name)      可选，用于选择指定的key<br>(2)丶flags       可选，可供选择的值有:</p>
<ul>
<li>右对齐；正数前加正好，负数前加负号；</li>
</ul>
<ul>
<li>左对齐；正数前无符号，负数前加负号；<br>空格     右对齐；正数前加空格，负数前加负号；<br>0        右对齐；正数前无符号，负数前加负号；如果是数字的话用0填充空白处<br>(3)丶width       可选，占有宽度<br>(4)丶.precision  可选，小数点后保留的位数<br>(5)丶typecode    必选，可供选择的值有:<br>s，获取传入对象的<strong>str</strong>方法的返回值，并将其格式化到指定位置<br>r，获取传入对象的<strong>repr</strong>方法的返回值，并将其格式化到指定位置<br>c，整数：将数字转换成其unicode对应的值，10进制范围为 0 &lt;= i &lt;= 1114111（py27则只支持0-255）；字符：将字符添加到指定位置<br>o，将整数转换成 八  进制表示，并将其格式化到指定位置<br>x，将整数转换成十六进制表示，并将其格式化到指定位置<br>d，将整数、浮点数转换成 十 进制表示，并将其格式化到指定位置<br>e，将整数、浮点数转换成科学计数法，并将其格式化到指定位置（小写e）<br>E，将整数、浮点数转换成科学计数法，并将其格式化到指定位置（大写E）<br>f， 将整数、浮点数转换成浮点数表示，并将其格式化到指定位置（默认保留小数点后6位）<br>F，同上<br>g，自动调整将整数、浮点数转换成 浮点型或科学计数法表示（超过6位数用科学计数法），并将其格式化到指定位置（如果是科学计数则是e；）<br>G，自动调整将整数、浮点数转换成 浮点型或科学计数法表示（超过6位数用科学计数法），并将其格式化到指定位置（如果是科学计数则是E；）<br>%，当字符串中存在格式化标志时，需要用 %%表示一个百分号</li>
</ul>
<p>注：Python中百分号格式化是不存在自动将整数转换成二进制表示的方式<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"i am %s"</span> % <span class="string">"SubHyCan"</span>)</span><br><span class="line">print(<span class="string">"i am %s age %d"</span> % (<span class="string">"SubHyCan"</span>, <span class="number">24</span>))</span><br><span class="line">print(<span class="string">"i am %(name)s age %(age)d"</span> % &#123;<span class="string">"name"</span>: <span class="string">"SubHyCan"</span>, <span class="string">"age"</span>: <span class="number">18</span>&#125;)</span><br><span class="line">print(<span class="string">"percent %.2f"</span> % <span class="number">99.97623</span>)</span><br><span class="line">print(<span class="string">"i am %(pp).2f"</span> % &#123;<span class="string">"pp"</span>: <span class="number">123.425556</span>, &#125;)</span><br><span class="line">print(<span class="string">"i am %(pp).2f%%"</span> % &#123;<span class="string">"pp"</span>: <span class="number">99.425556</span>, &#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="format方式"><a href="#format方式" class="headerlink" title="format方式"></a>format方式</h3><p>[[fill]align][sign][#][0][width][,][.precision][type]<br>(1)丶fill           可选，空白处填充的字符<br>(2)丶align          可选，对齐方式（需配合width使用）<br>    &lt;，内容左对齐<br>    &gt;，内容右对齐(默认)<br>    ＝，内容右对齐，将符号放置在填充字符的左侧，且只对数字类型有效。 即使：符号+填充物+数字<br>    ^，内容居中<br>(3)丶sign           可选，有无符号数字<br>    +，正号加正，负号加负；<br>    -，正号不变，负号加负；<br>    空格 ，正号空格，负号加负；<br>(4)丶#              可选，对于二进制、八进制、十六进制，如果加上#，会显示 0b/0o/0x，否则不显示<br>(5)丶，             可选，为数字添加分隔符，如：1,000,000<br>(6)丶width          可选，格式化位所占宽度<br>(7)丶.precision     可选，小数位保留精度<br>(8)丶type           可选，格式化类型<br>    传入” 字符串类型 “的参数<br>        s，格式化字符串类型数据<br>        空白，未指定类型，则默认是None，同s<br>    传入“ 整数类型 ”的参数<br>        b，将10进制整数自动转换成2进制表示然后格式化<br>        c，将10进制整数自动转换为其对应的unicode字符<br>        d，十进制整数<br>        o，将10进制整数自动转换成8进制表示然后格式化；<br>        x，将10进制整数自动转换成16进制表示然后格式化（小写x）<br>        X，将10进制整数自动转换成16进制表示然后格式化（大写X）<br>    传入“ 浮点型或小数类型 ”的参数<br>        e， 转换为科学计数法（小写e）表示，然后格式化；<br>        E， 转换为科学计数法（大写E）表示，然后格式化;<br>        f ， 转换为浮点型（默认小数点后保留6位）表示，然后格式化；<br>        F， 转换为浮点型（默认小数点后保留6位）表示，然后格式化；<br>        g， 自动在e和f中切换<br>        G， 自动在E和F中切换<br>        %，显示百分比（默认显示小数点后6位）<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"i am &#123;&#125;, age &#123;&#125;, &#123;&#125;"</span>.format(<span class="string">"seven"</span>, <span class="number">24</span>, <span class="string">'SubHyCan'</span>)) </span><br><span class="line">print(<span class="string">"i am &#123;&#125;, age &#123;&#125;, &#123;&#125;"</span>.format(*[<span class="string">"seven"</span>, <span class="number">24</span>, <span class="string">'SubHyCan'</span>]))  </span><br><span class="line">print(<span class="string">"i am &#123;0&#125;, age &#123;1&#125;, really &#123;0&#125;"</span>.format(<span class="string">"seven"</span>, <span class="number">18</span>)) </span><br><span class="line">print(<span class="string">"i am &#123;0&#125;, age &#123;1&#125;, really &#123;0&#125;"</span>.format(*[<span class="string">"seven"</span>, <span class="number">18</span>])) </span><br><span class="line">print(<span class="string">"i am &#123;name&#125;, age &#123;age&#125;, really &#123;name&#125;"</span>.format(name=<span class="string">"seven"</span>, age=<span class="number">18</span>))  </span><br><span class="line">print(<span class="string">"i am &#123;name&#125;, age &#123;age&#125;, really &#123;name&#125;"</span>.format(**&#123;<span class="string">"name"</span>: <span class="string">"seven"</span>, <span class="string">"age"</span>: <span class="number">18</span>&#125;)) </span><br><span class="line">print(<span class="string">"i am &#123;0[0]&#125;, age &#123;0[1]&#125;, really &#123;0[2]&#125;"</span>.format([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>])) </span><br><span class="line">print(<span class="string">"i am &#123;:s&#125;, age &#123;:d&#125;, money &#123;:f&#125;"</span>.format(<span class="string">"seven"</span>, <span class="number">18</span>, <span class="number">88888.1</span>))  </span><br><span class="line">print(<span class="string">"i am &#123;:s&#125;, age &#123;:d&#125;"</span>.format(*[<span class="string">"seven"</span>, <span class="number">18</span>])) </span><br><span class="line">print(<span class="string">"i am &#123;name:s&#125;, age &#123;age:d&#125;"</span>.format(name=<span class="string">"seven"</span>, age=<span class="number">18</span>))</span><br><span class="line">print(<span class="string">"i am &#123;name:s&#125;, age &#123;age:d&#125;"</span>.format(**&#123;<span class="string">"name"</span>: <span class="string">"seven"</span>, <span class="string">"age"</span>: <span class="number">18</span>&#125;))</span><br><span class="line">print(<span class="string">"numbers: &#123;:b&#125;,&#123;:o&#125;,&#123;:d&#125;,&#123;:x&#125;,&#123;:X&#125;, &#123;:%&#125;"</span>.format(<span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15.87623</span>, <span class="number">2</span>))</span><br><span class="line">print(<span class="string">"numbers: &#123;:b&#125;,&#123;:o&#125;,&#123;:d&#125;,&#123;:x&#125;,&#123;:X&#125;, &#123;:%&#125;"</span>.format(<span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15.87623</span>, <span class="number">2</span>))</span><br><span class="line">print(<span class="string">"numbers: &#123;0:b&#125;,&#123;0:o&#125;,&#123;0:d&#125;,&#123;0:x&#125;,&#123;0:X&#125;, &#123;0:%&#125;"</span>.format(<span class="number">15</span>))</span><br><span class="line">print(<span class="string">"numbers: &#123;num:b&#125;,&#123;num:o&#125;,&#123;num:d&#125;,&#123;num:x&#125;,&#123;num:X&#125;, &#123;num:%&#125;"</span>.format(num=<span class="number">15</span>))</span><br><span class="line">```		</span><br><span class="line"></span><br><span class="line"><span class="comment">## 面向对象</span></span><br><span class="line">三种编程方式为:面向过程编程，函数式编程，面向对象编程</span><br><span class="line">面向对象三大特性:封装，继承，多态</span><br><span class="line">``` python</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span><span class="params">()</span>:</span>                               <span class="comment">#Foo后的()可省略</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(self)                        <span class="comment">#self是python内部默认的参数，指向引用类的对象或实例</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(self,arg2)</span>:</span></span><br><span class="line">		print(self,arg)</span><br><span class="line">obj = Foo()                                <span class="comment">#通过类对象指针，创建一个引用类Foo的对象或实例</span></span><br><span class="line">print(obj)                                 <span class="comment">#和类中print(self)的值是一样的</span></span><br><span class="line">obj.f1()</span><br><span class="line">obj.f2(<span class="string">"shuaiguo"</span>)		</span><br><span class="line"></span><br><span class="line"><span class="comment">### 封装</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo1</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span>        <span class="comment">#封装,__init__构造方法，在遇到将类指向一个对象或实例时，会初始化执行        </span></span><br><span class="line">        self.name = <span class="string">"lyl"</span></span><br><span class="line">        self.age = <span class="number">18</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">print</span> (self.name,self.age)</span><br><span class="line">obj1 = Foo1()</span><br><span class="line">obj1.detail()</span><br><span class="line"><span class="keyword">print</span> (obj1.name,obj1.age)                <span class="comment">#直接调用obj1对象的name属性和age属性</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo2</span><span class="params">(Foo1)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age)</span>:</span>        <span class="comment">#封装，子类Foo2和父类Foo1都封装了__init__方法，则子类会覆盖父类的方法</span></span><br><span class="line">		super().__init__()                <span class="comment">#使用super函数可直接调用父类与子类相同的方法</span></span><br><span class="line">        self.xinbie = name</span><br><span class="line">        self.xinzuo = age</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (self.xinbie,self.xinzuo)   </span><br><span class="line">obj1 = Foo2(<span class="string">'男'</span>, <span class="string">"射手"</span>)</span><br><span class="line">obj1.detail()          <span class="comment">#Python默认会将obj1传给self参数，即：obj1.detail(obj1)，所以，此时方法内部的 self ＝ obj1，即：self.name 是 lyl ；self.age 是 18</span></span><br><span class="line"><span class="keyword">print</span> (obj1.name,obj1.age)</span><br></pre></td></tr></table></figure></p>
<h4 id="游戏人生"><a href="#游戏人生" class="headerlink" title="游戏人生"></a>游戏人生</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, na, gen, age, fig)</span>:</span></span><br><span class="line">        self.name = na</span><br><span class="line">        self.gender = gen</span><br><span class="line">        self.age = age</span><br><span class="line">        self.fight =fig</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">grassland</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""注释：草丛战斗，消耗200战斗力"""</span></span><br><span class="line">        self.fight = self.fight - <span class="number">200</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">practice</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""注释：自我修炼，增长100战斗力"""</span></span><br><span class="line">        self.fight = self.fight + <span class="number">200</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">incest</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""注释：多人游戏，消耗500战斗力"""</span></span><br><span class="line">        self.fight = self.fight - <span class="number">500</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""注释：当前对象的详细情况"""</span></span><br><span class="line">        temp = <span class="string">"姓名:%s ; 性别:%s ; 年龄:%s ; 战斗力:%s"</span>  % (self.name, self.gender, self.age, self.fight)</span><br><span class="line">        <span class="keyword">print</span> (temp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># #####################  开始游戏  #####################</span></span><br><span class="line">cang = Person(<span class="string">'苍'</span>, <span class="string">'女'</span>, <span class="number">18</span>, <span class="number">1000</span>)    <span class="comment">#创建苍角色</span></span><br><span class="line">dong = Person(<span class="string">'木木'</span>, <span class="string">'男'</span>, <span class="number">20</span>, <span class="number">1800</span>)  <span class="comment">#创建木木角色</span></span><br><span class="line">bo = Person(<span class="string">'多多'</span>, <span class="string">'女'</span>, <span class="number">19</span>, <span class="number">2500</span>)    <span class="comment">#创建多多角色</span></span><br><span class="line"></span><br><span class="line">cang.incest() <span class="comment">#苍参加一次多人游戏</span></span><br><span class="line">dong.practice()<span class="comment">#木木自我修炼了一次</span></span><br><span class="line">bo.grassland() <span class="comment">#多多参加一次草丛战斗</span></span><br><span class="line"><span class="comment">#输出当前所有人的详细情况</span></span><br><span class="line">cang.detail()</span><br><span class="line">dong.detail()</span><br><span class="line">bo.detail()</span><br></pre></td></tr></table></figure>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>父类和子类，父类也称为基类，子类也称为派生类，派生类会继承基类的对象，python的类可继承多个类，Java和C#中则只能继承一个类<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'D.bar'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(D)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'C.bar'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(D)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'B.bar'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(B, C)</span>:</span>                                <span class="comment">#多类继承，A有多个基类，继承优先级B优于C</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'A.bar'</span>)</span><br><span class="line"></span><br><span class="line">a = A()</span><br><span class="line"><span class="comment"># 执行bar方法时</span></span><br><span class="line"><span class="comment"># 首先去A类中查找，如果A类中没有，则继续去B类中找，如果B类中么有，则继续去C类中找，如果C类中么有，则继续去D类中找，如果还是未找到，则报错</span></span><br><span class="line"><span class="comment"># 所以，查找顺序：A --&gt; B --&gt; C --&gt; D</span></span><br><span class="line"><span class="comment"># 在上述查找bar方法的过程中，一旦找到，则寻找过程立即中断，便不会再继续找了</span></span><br><span class="line">a.bar()</span><br></pre></td></tr></table></figure></p>
<h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><p>Pyhon不支持Java和C#这一类强类型语言中多态的写法，但是原生支持多态，其Python崇尚”鸭子类型”;python”鸭子类型”如下所示:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">F1</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">S1</span><span class="params">(F1)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'S1.show'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">S2</span><span class="params">(F1)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'S2.show'</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Func</span><span class="params">(obj)</span>:</span>                             <span class="comment">#def Func(F1 obj):      伪代码实现java和C#的多态</span></span><br><span class="line">    <span class="keyword">print</span> obj.show()                       <span class="comment">#	print obj.show() 	  </span></span><br><span class="line">s1_obj = S1()</span><br><span class="line">Func(s1_obj) </span><br><span class="line"></span><br><span class="line">s2_obj = S2()</span><br><span class="line">Func(s2_obj)</span><br></pre></td></tr></table></figure></p>
<h3 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h3><p>python中的反射功能是由以下四个内置函数提供：hasattr、getattr、setattr、delattr，该四个函数分别用于对对象内部执行：<br>检查是否含有某成员、获取成员、设置成员、删除成员，通过字符串的形式操作对象相关的成员。<br>反射是通过字符串的形式操作对象相关的成员，一切事物都是对象<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line">inp = input(<span class="string">"请输入url(以模块名/对象的格式):"</span>)           </span><br><span class="line">mode,obejects = inp.split(<span class="string">"/"</span>)</span><br><span class="line">dd = __import__(<span class="string">"lib."</span> + mode, fromlist=<span class="keyword">True</span>)      <span class="comment">#以字符串的方式导入模块，假设输入的模块都在lib下，模块都存在</span></span><br><span class="line"><span class="keyword">if</span> hasattr(dd,obejects):                           <span class="comment">#判断用户输入的对象是否在模块中，如果存在，则返回设定的值或者url  </span></span><br><span class="line">    ret= getattr(dd,obejects,)()                  </span><br><span class="line">    print(ret)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"404"</span>)                                   <span class="comment">#对象不存在，报404</span></span><br><span class="line">print(hasattr(dd,<span class="string">"f1"</span>))                            <span class="comment">#False</span></span><br><span class="line">temp = setattr(dd,<span class="string">"f1"</span>,<span class="string">"lyl"</span>)                      <span class="comment">#往内存中写入对象</span></span><br><span class="line">print(hasattr(dd,<span class="string">"f1"</span>))                            <span class="comment">#True </span></span><br><span class="line">delattr(dd,<span class="string">"f1"</span>)                                   <span class="comment">#在内存中删除对象  </span></span><br><span class="line">print(hasattr(dd,<span class="string">"f1"</span>))                            <span class="comment">#False</span></span><br></pre></td></tr></table></figure></p>
<h3 id="类成员"><a href="#类成员" class="headerlink" title="类成员"></a>类成员</h3><p>类成员分为三大类，分别为:<br>字段(普通字段，静态字段)<br>方法(普通方法，静态方法，类方法)<br>属性，也可称为特性(普通属性，也可称为普通特性);可通过@property装饰器或者静态字段方式创建</p>
<p>通过类来访问:静态字段，静态方法<br>通过对象来访问:普通字段，普通方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">F1</span>:</span></span><br><span class="line">	country = <span class="string">"静态字段"</span>                    <span class="comment">#静态字段，在内存中只保存一份，如果每个对象相同的字段，就使用它</span></span><br><span class="line"> 	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">		self.name = name                    <span class="comment">#普通字段</span></span><br><span class="line">		self.original_price = <span class="number">100</span></span><br><span class="line">		</span><br><span class="line"><span class="meta">	@classmethod                            #定义一个类方法，此方法可通过类或者对象类访问</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(cls)</span>:</span>                            <span class="comment">#cls表示这个类方法属于的类F1</span></span><br><span class="line">        print(<span class="string">"类方法"</span>)</span><br><span class="line">        print(cls)</span><br><span class="line">		     </span><br><span class="line"><span class="meta">    @staticmethod                          #定义一个静态方法，此方法类似于在类中定义了一个普通函数，此方法可通过类或对象来访问</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"静态方法"</span>)	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">PT</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">"普通方法"</span></span><br><span class="line">		</span><br><span class="line"><span class="meta">	@property                               #在普通方法的基础上添加@property装饰器，特性其实就是将普通方法伪装成字段来访问获取</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span>	<span class="title">price</span><span class="params">(self)</span>:</span>                        <span class="comment">#静态字段方式实现:如可新建三个对应函数get_price, set_price, del_price，通过PRICE = property(get_price, set_price, del_price, '价格属性描述...')来创建</span></span><br><span class="line">		print(<span class="string">"特性"</span>)              </span><br><span class="line">		<span class="keyword">return</span> self.original_price</span><br><span class="line">	</span><br><span class="line"><span class="meta">	@price.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self, value)</span>:</span>                <span class="comment">#特性的访问特性，传参，可修改特性 </span></span><br><span class="line">        self.original_price = value</span><br><span class="line">		</span><br><span class="line"><span class="meta">    @price.deleter                         #特性的访问特性，可删除特性 </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.original_price	</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">obj = F1(<span class="string">"普通字段"</span>)</span><br><span class="line"><span class="keyword">print</span> (obj.name)                           <span class="comment">#通过对象访问普通字段		</span></span><br><span class="line"><span class="keyword">print</span> (obj.price)                          <span class="comment">#通过对象访问特性</span></span><br><span class="line"><span class="keyword">print</span> (obj.PT())                           <span class="comment">#通过对象访问普通方法</span></span><br><span class="line">obj.price = <span class="number">200</span></span><br><span class="line"><span class="keyword">print</span> (obj.price)                          <span class="comment">#修改</span></span><br><span class="line"><span class="keyword">del</span> obj.price                              <span class="comment">#删除</span></span><br><span class="line"><span class="keyword">print</span> (F1.country)                         <span class="comment">#通过类访问静态字段</span></span><br></pre></td></tr></table></figure>
<h4 id="类成员修饰符"><a href="#类成员修饰符" class="headerlink" title="类成员修饰符"></a>类成员修饰符</h4><p>公有和私有，私有成员命名时，前两个字符是下划线。(特殊成员除外，例如：<strong>init</strong>、<strong>call</strong>、<strong>dict</strong>等）<br>公有成员:对象可以访问；类内部可以访问；派生类中可以访问<br>私有成员:仅类内部可以访问；外部访问可通过公有成员曲线来访问;强制访问可通过(对象._类名__私有字段)来访问，但是不建议使用<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.name = <span class="string">'公有字段'</span></span><br><span class="line">        self.__foo = <span class="string">"私有字段"</span></span><br><span class="line">		</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">F1</span><span class="params">(self)</span>:</span></span><br><span class="line">        ret = self.__foo</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">		</span><br><span class="line">obj = C()</span><br><span class="line">print(obj.__foo)                   <span class="comment">#无法访问，执行报错</span></span><br><span class="line">print(obj.F1())                    <span class="comment">#通过F1来访问，找关系</span></span><br></pre></td></tr></table></figure></p>
<h4 id="类的特殊成员"><a href="#类的特殊成员" class="headerlink" title="类的特殊成员"></a>类的特殊成员</h4><p>1.<strong>doc</strong>，表示类的描述信息<br>2.<strong>module</strong>和<strong>class</strong>，表示当前操作的对象在那个模块和当前操作的对象的类是什么<br>3.<strong>init</strong>，构造方法，通过类创建对象时，自动触发执行<br>4.<strong>del</strong>，析构方法，当对象在内存中被释放时(比如内存辣鸡回收)，自动触发执行<br>注:此方法一般无须定义，因为Python是一门高级语言，程序员在使用时无需关心内存的分配和释放，因为此工作都是交给Python解释器来执行，所以，析构函数的调用是由解释器在进行垃圾回收时自动触发执行的。<br>5.<strong>call</strong>，对象后面加括号，触发执行，即对象()或者类()()，执行类中的<strong>call</strong>方法<br>6.<strong>dict</strong>，类或对象中的所有成员，类的普通字段属于对象；类中的静态字段和方法等属于类<br>7.<strong>str</strong>，如果一个类中定义了<strong>str</strong>方法，那么在打印 对象 时，默认输出该方法的返回值<br>8.<strong>getitem</strong>、<strong>setitem</strong>、<strong>delitem</strong>,用于索引操作，如字典。以上分别表示获取、设置、删除数据<br>9.<strong>getslice</strong>、<strong>setslice</strong>、<strong>delslice</strong>，该三个方法用于分片操作，如：列表<br>10.<strong>iter</strong>，用于迭代器，之所以列表、字典、元组可以进行for循环，是因为类型内部定义了 <strong>iter</strong><br>11.<strong>new</strong> 和 <strong>metaclass</strong>;obj对象是C类的一个实例，C类对象是 type类的一个实例，即：C类对象是通过type类的构造方法创建，类其实也是对象<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(object)</span>:</span>                            <span class="comment">#object是一切类的基类</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    这是一个类</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,sq)</span>:</span></span><br><span class="line">        self.name = <span class="string">'lyl'</span></span><br><span class="line">		self.sq = sq</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"call"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"lyl"</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__getitem__"</span>,key)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__setitem__"</span>,key,value)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__delitem__"</span>,key)	</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__getslice__</span><span class="params">(self, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__getslice__"</span>,i,j)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setslice__</span><span class="params">(self, i, j, sequence)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__setslice__"</span>,i,j)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delslice__</span><span class="params">(self, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__delslice__"</span>,i,j)	</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> iter(self.sq)	</span><br><span class="line">obj = C([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">print(obj.__doc__)                        <span class="comment">#输出描述信息:这是一个类</span></span><br><span class="line">print(obj.__module__)                  </span><br><span class="line">print(obj.__class__)                      <span class="comment">#输出当前对象操作的类</span></span><br><span class="line">print(obj())                              <span class="comment">#因为定义了__call_，所以输出为:call </span></span><br><span class="line">print(C.__dict__,obj.__dict__)            <span class="comment">#输出类中的所有成员，输出对象中的所有成员  </span></span><br><span class="line">print(obj)                                <span class="comment">#因为定义了__str__，输出为:lyl，无对应则返回一个对象 </span></span><br><span class="line">result = obj[<span class="string">'k1'</span>]                        <span class="comment">#自动触发执行 __getitem__，输出:__getitem__ k1</span></span><br><span class="line">obj[<span class="string">'k2'</span>] = <span class="string">'wupeiqi'</span>                     <span class="comment">#自动触发执行 __setitem__，输出:__setitem__ k2 wupeiqi</span></span><br><span class="line"><span class="keyword">del</span> obj[<span class="string">'k1'</span>]                             <span class="comment">#自动触发执行 __delitem__，输出:__delitem__ k1</span></span><br><span class="line">obj[<span class="number">-1</span>:<span class="number">1</span>]                                 <span class="comment">#自动触发执行 __getslice__，输出:__getitem__ slice(-1, 1, None)</span></span><br><span class="line">obj[<span class="number">0</span>:<span class="number">1</span>] = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>]                  <span class="comment">#自动触发执行 __setslice__，输出:__setitem__ slice(0, 1, None) [11, 22, 33, 44]</span></span><br><span class="line"><span class="keyword">del</span> obj[<span class="number">0</span>:<span class="number">2</span>]                              <span class="comment">#自动触发执行 __delslice__，输出:__delitem__ slice(0, 2, None)</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> obj:</span><br><span class="line">    <span class="keyword">print</span> (i)                             <span class="comment">#输出1,2,3,4，如果没有指定__iter__，则会无限循环下去</span></span><br><span class="line">		</span><br><span class="line">obj = iter([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])                     <span class="comment">#以上步骤可以看出，for循环迭代的其实是  iter([1,2,3,4]),所以执行流程可以变更为这个</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> obj:</span><br><span class="line">    <span class="keyword">print</span> (i)</span><br></pre></td></tr></table></figure></p>
<p>类创建的两种方式:<br>一丶普通方法<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"nihao"</span>)</span><br></pre></td></tr></table></figure></p>
<p>二丶特殊方式(type类的构造函数)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span></span><br><span class="line">    print(<span class="string">"nihao"</span>) </span><br><span class="line">Foo = type(<span class="string">'Foo'</span>,(object,), &#123;<span class="string">'func'</span>: func&#125;)  <span class="comment">#type第一个参数：类名;第二个参数：当前类的基类;第三个参数：类的成员,可以为一个lamba表达式</span></span><br></pre></td></tr></table></figure></p>
<h4 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h4><p>常用的异常:<br>AttributeError 试图访问一个对象没有的树形，比如foo.x，但是foo没有属性x<br>IOError 输入/输出异常；基本上是无法打开文件<br>ImportError 无法引入模块或包；基本上是路径问题或名称错误<br>IndentationError 语法错误（的子类） ；代码没有正确对齐<br>IndexError 下标索引超出序列边界，比如当x只有三个元素，却试图访问x[5]<br>KeyError 试图访问字典里不存在的键<br>KeyboardInterrupt Ctrl+C被按下<br>NameError 使用一个还未被赋予对象的变量<br>SyntaxError Python代码非法，代码不能编译(个人认为这是语法错误，写错了）<br>TypeError 传入对象类型与要求的不符合<br>UnboundLocalError 试图访问一个还未被设置的局部变量，基本上是由于另有一个同名的全局变量，<br>导致你以为正在访问它<br>ValueError 传入一个调用者不期望的值，即使值的类型是正确的</p>
<p>常用的异常处理框架:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = <span class="number">1</span> + <span class="string">"lyl"</span>          <span class="comment">#主代码块</span></span><br><span class="line"><span class="keyword">except</span> IndexError <span class="keyword">as</span> e:    <span class="comment">#如果异常类型为IndexError，则执行该块，可定义多个异常处理 </span></span><br><span class="line">    print(e)               <span class="comment">#异常时，执行该块，输出为异常信息</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:     <span class="comment">#万能的异常处理，所有异常都能匹配</span></span><br><span class="line">    print(e)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">pass</span>                   <span class="comment">#主代码块执行完，执行该块</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">pass</span>                   <span class="comment">#无论异常与否，最终执行该块</span></span><br></pre></td></tr></table></figure></p>
<p>主动触法异常:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">'错误了。。。'</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">print</span> (e)                 <span class="comment">#输出为:错误了。。。</span></span><br></pre></td></tr></table></figure></p>
<p>自定义异常:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span><span class="params">(Exception)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, msg)</span>:</span></span><br><span class="line">        self.message = msg</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.message</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> MyException(<span class="string">'我的异常'</span>)</span><br><span class="line"><span class="keyword">except</span> MyException <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">print</span> (e)                <span class="comment">#输出为:我的异常</span></span><br></pre></td></tr></table></figure></p>
<h4 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h4><p>1丶单例模式，即只有一个实例<br>2丶静态方法+静态字段<br>3丶所有的实例中封装的内容相同时，用单例模式，多个实例会浪费内存<br>4丶单利模式存在的目的是保证当前内存中仅存在单个实例，避免内存浪费<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> wsgiref.simple_server <span class="keyword">import</span> make_server</span><br><span class="line"><span class="comment"># ########### 单例类定义 ###########</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DbHelper</span><span class="params">(object)</span>:</span></span><br><span class="line">    __instance = <span class="keyword">None</span>                   </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.hostname = <span class="string">'1.1.1.1'</span></span><br><span class="line">        self.port = <span class="number">3306</span></span><br><span class="line">        self.password = <span class="string">'pwd'</span></span><br><span class="line">        self.username = <span class="string">'root'</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">singleton</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">if</span> DbHelper.__instance:</span><br><span class="line">            <span class="keyword">return</span> DbHelper.__instance</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            DbHelper.__instance = DbHelper()</span><br><span class="line">            <span class="keyword">return</span> DbHelper.__instance</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fetch</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 连接数据库</span></span><br><span class="line">        <span class="comment"># 拼接sql语句</span></span><br><span class="line">        <span class="comment"># 操作</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 连接数据库</span></span><br><span class="line">        <span class="comment"># 拼接sql语句</span></span><br><span class="line">        <span class="comment"># 操作</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">remove</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 连接数据库</span></span><br><span class="line">        <span class="comment"># 拼接sql语句</span></span><br><span class="line">        <span class="comment"># 操作</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">modify</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 连接数据库</span></span><br><span class="line">        <span class="comment"># 拼接sql语句</span></span><br><span class="line">        <span class="comment"># 操作</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Handler</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(self)</span>:</span></span><br><span class="line">        obj = DbHelper.singleton()                 <span class="comment">#对于Python单例模式，创建对象时不能再直接使用：obj = Foo()，而应该调用特殊的方法：obj = Foo.singleton()</span></span><br><span class="line">        <span class="keyword">print</span> id(obj)</span><br><span class="line">        obj.create()</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'index'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">news</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'news'</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">RunServer</span><span class="params">(environ, start_response)</span>:</span></span><br><span class="line">    start_response(<span class="string">'200 OK'</span>, [(<span class="string">'Content-Type'</span>, <span class="string">'text/html'</span>)])</span><br><span class="line">    url = environ[<span class="string">'PATH_INFO'</span>]</span><br><span class="line">    temp = url.split(<span class="string">'/'</span>)[<span class="number">1</span>]</span><br><span class="line">    obj = Handler()</span><br><span class="line">    is_exist = hasattr(obj, temp)</span><br><span class="line">    <span class="keyword">if</span> is_exist:</span><br><span class="line">        func = getattr(obj, temp)</span><br><span class="line">        ret = func()</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'404 not found'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    httpd = make_server(<span class="string">''</span>, <span class="number">8002</span>, RunServer)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Serving HTTP on port 8001..."</span></span><br><span class="line">    httpd.serve_forever()</span><br></pre></td></tr></table></figure></p>
<h2 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h2><p>socket通常也称作”套接字”，用于描述IP地址和端口，是一个通信链的句柄，应用程序通常通过”套接字”向网络发出请求或者应答网络请求。<br>socket起源于Unix，而Unix/Linux基本哲学之一就是“一切皆文件”，对于文件用【打开】【读写】【关闭】模式来操作。socket就是该模式的一个实现，socket即是一种特殊的文件，一些socket函数就是对其进行的操作（读/写IO、打开、关闭）</p>
<p>socket和file的区别：<br>file模块是针对某个指定文件进行【打开】【读写】【关闭】<br>socket模块是针对 服务器端 和 客户端Socket 进行【打开】【读写】【关闭】</p>
<p><code>sk = socket.socket(socket.AF_INET,socket.SOCK_STREAM,0)</code><br>参数一：地址簇<br>　　socket.AF_INET IPv4（默认）<br>　　socket.AF_INET6 IPv6<br>　　socket.AF_UNIX 只能够用于单一的Unix系统进程间通信</p>
<p>参数二：类型<br>　　socket.SOCK_STREAM　　流式socket , for TCP （默认）<br>　　socket.SOCK_DGRAM　　 数据报式socket , for UDP<br>　　socket.SOCK_RAW 原始套接字，普通的套接字无法处理ICMP、IGMP等网络报文，而SOCK_RAW可以；其次，SOCK_RAW也可以处理特殊的IPv4报文；此外，利用原始套接字，可以通过IP_HDRINCL套接字选项由用户构造IP头。<br>　　socket.SOCK_RDM 是一种可靠的UDP形式，即保证交付数据报但不保证顺序。SOCK_RAM用来提供对原始协议的低级访问，在需要执行某些特殊操作时使用，如发送ICMP报文。SOCK_RAM通常仅限于高级用户或管理员运行的程序使用。<br>　　socket.SOCK_SEQPACKET 可靠的连续数据包服务</p>
<p>参数三：协议<br>　　0　　（默认）与特定的地址家族相关的协议,如果是 0 ，则系统就会根据地址格式和套接类别,自动选择一个合适的协议</p>
<p><code>sk.bind(address)</code><br>　 将套接字绑定到地址。address地址的格式取决于地址族。在AF_INET下，以元组（host,port）的形式表示地址。</p>
<p><code>sk.listen(backlog)</code><br>　 开始监听传入连接。backlog指定在拒绝连接之前，可以挂起的最大连接数量。<br>   backlog等于5，表示内核已经接到了连接请求，但服务器还没有调用accept进行处理的连接个数最大为5<br>   这个值不能无限大，因为要在内核中维护连接队列</p>
<p><code>sk.setblocking(bool)</code><br>　 是否阻塞（默认True），如果设置False，那么accept和recv时一旦无数据，则报错。</p>
<p><code>sk.accept()</code><br>　 接受连接并返回（conn,address）,其中conn是新的套接字对象，可以用来接收和发送数据。address是连接客户端的地址。<br>   接收TCP 客户的连接（阻塞式）等待连接的到来</p>
<p><code>sk.connect(address)</code><br>　 连接到address处的套接字。一般，address的格式为元组（hostname,port）,如果连接出错，返回socket.error错误。</p>
<p><code>sk.connect_ex(address)</code><br>　 同上，只不过会有返回值，连接成功时返回 0 ，连接失败时候返回编码，例如：10061</p>
<p><code>sk.close()</code><br>　 关闭套接字</p>
<p><code>sk.recv(bufsize[,flag])</code><br>　 接受套接字的数据。数据以字符串形式返回，bufsize指定最多可以接收的数量。flag提供有关消息的其他信息，通常可以忽略。</p>
<p><code>sk.recvfrom(bufsize[.flag])</code><br>　 与recv()类似，但返回值是（data,address）。其中data是包含接收数据的字符串，address是发送数据的套接字地址。</p>
<p><code>sk.send(string[,flag])</code><br>　 将string中的数据发送到连接的套接字。返回值是要发送的字节数量，该数量可能小于string的字节大小。即：可能未将指定内容全部发送。</p>
<p><code>sk.sendall(string[,flag])</code><br>　 将string中的数据发送到连接的套接字，但在返回之前会尝试发送所有数据。成功返回None，失败则抛出异常。<br>   内部通过递归调用send，将所有内容发送出去。</p>
<p><code>sk.sendto(string[,flag],address)</code><br>　 将数据发送到套接字，address是形式为（ipaddr，port）的元组，指定远程地址。返回值是发送的字节数。该函数主要用于UDP协议。</p>
<p><code>sk.settimeout(timeout)</code><br>　 设置套接字操作的超时期，timeout是一个浮点数，单位是秒。值为None表示没有超时期。一般，超时期应该在刚创建套接字时设置，因为它们可能用于连接的操作（如 client 连接最多等待5s ）</p>
<p><code>sk.getpeername()</code><br>　 返回连接套接字的远程地址。返回值通常是元组（ipaddr,port）。</p>
<p><code>sk.getsockname()</code><br>　 返回套接字自己的地址。通常是一个元组(ipaddr,port)</p>
<p><code>sk.fileno()</code><br>　 套接字的文件描述符</p>
<p>WEB服务应用，客户端为浏览器，在浏览器中输入:127.0.0.1:8081来与服务端交互，浏览器页面返回:Hello World<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_request</span><span class="params">(client)</span>:</span></span><br><span class="line">    buf = client.recv(<span class="number">1024</span>)</span><br><span class="line">    client.send(bytes(<span class="string">"HTTP/1.1 200 OK\r\n\r\n"</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    client.send(bytes(<span class="string">"Hello, World"</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    sock.bind((<span class="string">'localhost'</span>,<span class="number">8081</span>))</span><br><span class="line">    sock.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        connection, address = sock.accept()</span><br><span class="line">        handle_request(connection)</span><br><span class="line">        connection.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p>
<p>聊天机器人(单连接版)<br>服务端只能处理一个客户端连接，当有两个连接时，第二个连接处于等待状态，必须等到服务端处理完第一个连接，才能处理它<br>服务端:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port = (<span class="string">'127.0.0.1'</span>,<span class="number">9999</span>)        <span class="comment">#服务端用于客户端连接的ip和端口</span></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.bind(ip_port)                    <span class="comment">#开启服务端</span></span><br><span class="line">sk.listen(<span class="number">5</span>)                        <span class="comment">#监听的最大连接数</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">'server waiting...'</span>)</span><br><span class="line">    conn,addr = sk.accept()         <span class="comment">#阻塞，直到有客户端连接，才往下执行，conn为连接的对象，addr为客户端IP和端口</span></span><br><span class="line">    conn.sendall(bytes(<span class="string">'我是聊天机器人'</span>,encoding = <span class="string">"utf-8"</span>))                    <span class="comment">#发送消息给客户端</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        client_data = conn.recv(<span class="number">1024</span>)                                           <span class="comment">#接收客户端的消息</span></span><br><span class="line">        <span class="keyword">if</span> str(client_data,encoding=<span class="string">"utf-8"</span>) == <span class="string">"q"</span>:                            <span class="comment">#如果接收到的消息是q，即退出循环，等待下一个客户端连接  </span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            conn.sendall(client_data + bytes(<span class="string">"是一个大帅锅"</span>,encoding=<span class="string">"utf-8"</span>))  <span class="comment">#每次接收到除q外的字符串时，返回接收到的值加是一个大帅锅</span></span><br><span class="line">    conn.close()                                                                <span class="comment">#连接关闭</span></span><br></pre></td></tr></table></figure></p>
<p>客户端:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port = (<span class="string">'127.0.0.1'</span>,<span class="number">9999</span>)     <span class="comment">#连接服务端所用的IP和端口</span></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect(ip_port)              <span class="comment">#客户端连接到一个服务端</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    server_reply = sk.recv(<span class="number">1024</span>)                        <span class="comment">#阻塞,接收服务端发来的消息,直到接收到才继续往下执行</span></span><br><span class="line">    <span class="keyword">print</span> (str(server_reply,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    inp = input(<span class="string">"请输入内容:"</span>)</span><br><span class="line">    sk.sendall(bytes(inp,encoding=<span class="string">"utf-8"</span>))             <span class="comment">#向服务端发送输入的消息</span></span><br><span class="line">    <span class="keyword">if</span> inp == <span class="string">"q"</span>:                                      <span class="comment">#当输入q时，客户端与服务端的连接关闭</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">sk.close()                                              <span class="comment">#连接关闭</span></span><br></pre></td></tr></table></figure></p>
<h3 id="IO多路复用"><a href="#IO多路复用" class="headerlink" title="IO多路复用"></a>IO多路复用</h3><p>I/O多路复用指：通过一种机制，可以监视多个描述符，一旦某个描述符就绪（一般是读就绪或者写就绪），能够通知程序进行相应的读写操作<br>Python中有一个select模块，其中提供了：select、poll、epoll三个方法，分别调用系统的 select，poll，epoll 从而实现IO多路复用</p>
<p>select<br>select最早于1983年出现在4.2BSD中，它通过一个select()系统调用来监视多个文件描述符的数组，当select()返回后，<br>该数组中就绪的文件描述符便会被内核修改标志位，使得进程可以获得这些文件描述符从而进行后续的读写操作。<br>select目前几乎在所有的平台上支持，其良好跨平台支持也是它的一个优点，事实上从现在看来，这也是它所剩不多的优点之一。<br>select的一个缺点在于单个进程能够监视的文件描述符的数量存在最大限制，在Linux上一般为1024，不过可以通过修改宏定义甚至重新编译内核的方式提升这一限制。<br>另外，select()所维护的存储大量文件描述符的数据结构，随着文件描述符数量的增大，其复制的开销也线性增长。<br>同时，由于网络响应时间的延迟使得大量TCP连接处于非活跃状态，但调用select()会对所有socket进行一次线性扫描，所以这也浪费了一定的开销。</p>
<p>poll<br>poll在1986年诞生于System V Release 3，它和select在本质上没有多大差别，但是poll没有最大文件描述符数量的限制。<br>poll和select同样存在一个缺点就是，包含大量文件描述符的数组被整体复制于用户态和内核的地址空间之间，而不论这些文件描述符是否就绪，它的开销随着文件描述符数量的增加而线性增大。<br>另外，select()和poll()将就绪的文件描述符告诉进程后，如果进程没有对其进行IO操作，那么下次调用select()和poll()的时候将再次报告这些文件描述符，所以它们一般不会丢失就绪的消息，这种方式称为水平触发（Level Triggered）。</p>
<p>epoll<br>直到Linux2.6才出现了由内核直接支持的实现方法，那就是epoll，它几乎具备了之前所说的一切优点，被公认为Linux2.6下性能最好的多路I/O就绪通知方法。<br>epoll可以同时支持水平触发和边缘触发（Edge Triggered，只告诉进程哪些文件描述符刚刚变为就绪状态，它只说一遍，如果我们没有采取行动，那么它将不会再次告知，这种方式称为边缘触发），理论上边缘触发的性能要更高一些，但是代码实现相当复杂。<br>epoll同样只告知那些就绪的文件描述符，而且当我们调用epoll_wait()获得就绪文件描述符时，返回的不是实际的描述符，而是一个代表就绪描述符数量的值，<br>你只需要去epoll指定的一个数组中依次取得相应数量的文件描述符即可，这里也使用了内存映射（mmap）技术，这样便彻底省掉了这些文件描述符在系统调用时复制的开销。<br>另一个本质的改进在于epoll采用基于事件的就绪通知方式。在select/poll中，进程只有在调用一定的方法后，内核才对所有监视的文件描述符进行扫描，<br>而epoll事先通过epoll_ctl()来注册一个文件描述符，一旦基于某个文件描述符就绪时，内核会采用类似callback的回调机制，迅速激活这个文件描述符，当进程调用epoll_wait()时便得到通知。</p>
<p>Windows Python：<br>    提供： select<br>Mac Python：<br>    提供： select<br>Linux Python：<br>    提供： select、poll、epoll</p>
<p>对于select方法：<br>句柄列表11, 句柄列表22, 句柄列表33 = select.select(句柄序列1, 句柄序列2, 句柄序列3, 超时时间)<br>参数： 可接受四个参数（前三个必须）<br>返回值：三个列表<br>select方法用来监视文件句柄，如果句柄发生变化，则获取该句柄。<br>1、当 参数1 序列中的句柄发生可读时（accetp和read），则获取发生变化的句柄并添加到 返回值1 序列中<br>2、当 参数2 序列中含有句柄时，则将该序列中所有的句柄添加到 返回值2 序列中<br>3、当 参数3 序列中的句柄发生错误时，则将该发生错误的句柄添加到 返回值3 序列中<br>4、当 超时时间 未设置，则select会一直阻塞，直到监听的句柄发生变化<br>   当 超时时间 ＝ 1时，那么如果监听的句柄均无任何变化，则select会阻塞 1 秒，之后返回三个空列表，如果监听的句柄有变化，则直接执行。</p>
<p>利用select实现伪同时处理多个Socket客户端请求：<br>服务端<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> select</span><br><span class="line">sk1 = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sk1.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">sk1.bind((<span class="string">'127.0.0.1'</span>,<span class="number">8002</span>))</span><br><span class="line">sk1.listen(<span class="number">5</span>)</span><br><span class="line">sk1.setblocking(<span class="number">0</span>)</span><br><span class="line">inputs = [sk1,]</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    readable_list, writeable_list, error_list = select.select(inputs, [], inputs, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> readable_list:</span><br><span class="line">        print(r)</span><br><span class="line">        <span class="comment"># 当客户端第一次连接服务端时</span></span><br><span class="line">        <span class="keyword">if</span> r == sk1:</span><br><span class="line">            <span class="keyword">print</span> (<span class="string">'accept a connect'</span>)</span><br><span class="line">            request, address = r.accept()</span><br><span class="line">            request.setblocking(<span class="number">0</span>)</span><br><span class="line">            inputs.append(request)</span><br><span class="line">        <span class="comment">#当客户端连接上服务端之后，服务端接收数据</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            received = r.recv(<span class="number">1024</span>)</span><br><span class="line">            received_str = str(received,encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">            <span class="comment"># 当正常接收客户端发送的数据时</span></span><br><span class="line">            <span class="keyword">if</span> received:  <span class="comment">#如果接收到客户端的数据不为空，则给客户端返回接收到的字符串加上你好</span></span><br><span class="line">                <span class="keyword">print</span> (<span class="string">'received data:'</span>,received_str )</span><br><span class="line">                r.sendall(received + bytes(<span class="string">"你好"</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">            <span class="comment"># 当客户端关闭程序时</span></span><br><span class="line">            <span class="keyword">else</span>:        <span class="comment">#如果从客户端接收到的数据为空，则移除该客户端连接</span></span><br><span class="line">                inputs.remove(r)</span><br><span class="line">sk1.close()</span><br><span class="line">```	</span><br><span class="line">客户端</span><br><span class="line">``` python</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port = (<span class="string">'127.0.0.1'</span>,<span class="number">8002</span>)</span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect(ip_port)</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    inp = input(<span class="string">'please input:'</span>)</span><br><span class="line">    <span class="keyword">if</span> inp == <span class="string">""</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    sk.sendall(bytes(inp,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    recived_str = str(sk.recv(<span class="number">1024</span>),encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">    print(recived_str)</span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure></p>
<h3 id="socketServer模块"><a href="#socketServer模块" class="headerlink" title="socketServer模块"></a>socketServer模块</h3><p>SocketServer内部使用 IO多路复用 以及 “多线程” 和 “多进程” ，从而实现并发处理多个客户端请求的Socket服务端。<br>即：每个客户端请求连接到服务器时，Socket服务端都会在服务器是创建一个“线程”或者“进程” 专门负责处理当前客户端的所有请求。</p>
<p>ThreadingTCPServer<br>ThreadingTCPServer实现的Soket服务器内部会为每个client创建一个 “线程”，该线程用来和客户端进行交互。</p>
<p>1、ThreadingTCPServer基础<br>使用ThreadingTCPServer:<br>创建一个继承自 SocketServer.BaseRequestHandler 的类<br>类中必须定义一个名称为 handle 的方法<br>启动ThreadingTCPServer</p>
<p>2、ThreadingTCPServer源码剖析<br>内部调用流程为：<br>启动服务端程序<br>执行 TCPServer.<strong>init</strong> 方法，创建服务端Socket对象并绑定 IP 和 端口<br>执行 BaseServer.<strong>init</strong> 方法，将自定义的继承自SocketServer.BaseRequestHandler 的类 MyRequestHandle赋值给 self.RequestHandlerClass<br>执行 BaseServer.server_forever 方法，While 循环一直监听是否有客户端请求到达 …<br>当客户端连接到达服务器<br>执行 ThreadingMixIn.process_request 方法，创建一个 “线程” 用来处理请求<br>执行 ThreadingMixIn.process_request_thread 方法<br>执行 BaseServer.finish_request 方法，执行 self.RequestHandlerClass()  即：执行 自定义 MyRequestHandler 的构造方法（自动调用基类BaseRequestHandler的构造方法，在该构造方法中又会调用 MyRequestHandler的handle方法）<br>SocketServer的ThreadingTCPServer之所以可以同时处理请求得益于 select 和 Threading 两个东西，其实本质上就是在服务器端为每一个客户端创建一个线程，当前线程用来处理对应客户端的请求，所以，可以支持同时n个客户端链接（长连接）。</p>
<p>SocketServer实现服务器:<br>服务端可同时处理多个客户端连接请求<br>服务端<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socketserver</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyServer</span><span class="params">(socketserver.BaseRequestHandler)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handle</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"新的连接开始"</span>)</span><br><span class="line">        <span class="comment"># print self.request,self.client_address,self.server</span></span><br><span class="line">        conn = self.request</span><br><span class="line">        conn.sendall(bytes(<span class="string">'我是聊天机器人'</span>,encoding = <span class="string">"utf-8"</span>))</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">            client_data = conn.recv(<span class="number">1024</span>)                                           <span class="comment">#接收客户端的消息</span></span><br><span class="line">            <span class="keyword">if</span> str(client_data,encoding=<span class="string">"utf-8"</span>) == <span class="string">"q"</span>:                            <span class="comment">#如果接收到的消息是q，即退出循环，等待下一个客户端连接</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                conn.sendall(client_data + bytes(<span class="string">"是一个大帅锅"</span>,encoding=<span class="string">"utf-8"</span>))  <span class="comment">#每次接收到除q外的字符串时，返回接收到的值加是一个大帅锅</span></span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    server = socketserver.ThreadingTCPServer((<span class="string">'127.0.0.1'</span>,<span class="number">8009</span>),MyServer)</span><br><span class="line">    server.serve_forever()</span><br></pre></td></tr></table></figure></p>
<p>客户端<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port = (<span class="string">'127.0.0.1'</span>,<span class="number">8009</span>)</span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect(ip_port)</span><br><span class="line">sk.settimeout(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    data = sk.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">'receive:'</span>,str(data,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    inp = input(<span class="string">'please input:'</span>)</span><br><span class="line">    sk.sendall(bytes(inp,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    <span class="keyword">if</span> inp == <span class="string">'q'</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure></p>
<p>FTP作业<br>服务端<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>客户端<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://SubHyCan.github.io/2019/02/14/Python-3-Study/" data-id="cjsvb1729000bsyri06yjl005" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
    
 <script src="/jquery/jquery.min.js"></script>
  <div id="random_posts">
    <h2>推荐文章</h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/2019/02/14/Windows-Related/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          Windows-Related
        
      </div>
    </a>
  
  
    <a href="/2019/02/14/Other/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">Other</div>
    </a>
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
     
       
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
       
      
      
           <div id="gitment_comments"></div>
    
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    

  
    
    <div class="widget-wrap">
    
      <div class="widget" id="toc-widget-fixed">
      
        <strong class="toc-title">文章目录</strong>
        <div class="toc-widget-list">
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串，列表，元组，字典，集合"><span class="toc-number">1.</span> <span class="toc-text">字符串，列表，元组，字典，集合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#购物车"><span class="toc-number">1.1.</span> <span class="toc-text">购物车</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#元素分类"><span class="toc-number">1.2.</span> <span class="toc-text">元素分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户登录隐藏密码-三次输入机会-。"><span class="toc-number">1.3.</span> <span class="toc-text">用户登录隐藏密码(三次输入机会)。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#输出商品列表"><span class="toc-number">1.4.</span> <span class="toc-text">输出商品列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查找列表元组字典"><span class="toc-number">1.5.</span> <span class="toc-text">查找列表元组字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#寻找差异"><span class="toc-number">1.6.</span> <span class="toc-text">寻找差异</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三元运算"><span class="toc-number">1.7.</span> <span class="toc-text">三元运算</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数"><span class="toc-number">2.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#函数一"><span class="toc-number">2.1.</span> <span class="toc-text">函数一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数二"><span class="toc-number">2.2.</span> <span class="toc-text">函数二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数三"><span class="toc-number">2.3.</span> <span class="toc-text">函数三</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#def和lambda定义函数区别"><span class="toc-number">2.4.</span> <span class="toc-text">def和lambda定义函数区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#斐波那契数列取第十个值"><span class="toc-number">2.5.</span> <span class="toc-text">斐波那契数列取第十个值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#冒泡排序"><span class="toc-number">2.6.</span> <span class="toc-text">冒泡排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#装饰器"><span class="toc-number">2.7.</span> <span class="toc-text">装饰器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#单层装饰"><span class="toc-number">2.7.1.</span> <span class="toc-text">单层装饰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#二层装饰"><span class="toc-number">2.7.2.</span> <span class="toc-text">二层装饰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#内置函数"><span class="toc-number">3.</span> <span class="toc-text">内置函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#常用"><span class="toc-number">3.1.</span> <span class="toc-text">常用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#用法示例"><span class="toc-number">3.1.1.</span> <span class="toc-text">用法示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#用户登录-密码文件"><span class="toc-number">3.1.2.</span> <span class="toc-text">用户登录(密码文件)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#加密"><span class="toc-number">3.1.3.</span> <span class="toc-text">加密</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不常用"><span class="toc-number">3.2.</span> <span class="toc-text">不常用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#方法"><span class="toc-number">3.3.</span> <span class="toc-text">方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#正则表达式之计算器"><span class="toc-number">3.4.</span> <span class="toc-text">正则表达式之计算器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常用模块"><span class="toc-number">4.</span> <span class="toc-text">常用模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#time"><span class="toc-number">4.1.</span> <span class="toc-text">time</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#datetime"><span class="toc-number">4.2.</span> <span class="toc-text">datetime</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sys"><span class="toc-number">4.3.</span> <span class="toc-text">sys</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#进度条作业"><span class="toc-number">4.3.1.</span> <span class="toc-text">进度条作业</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#将用户传入的参数变为文件夹"><span class="toc-number">4.3.2.</span> <span class="toc-text">将用户传入的参数变为文件夹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pickle和json"><span class="toc-number">4.4.</span> <span class="toc-text">pickle和json</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#购物车相关"><span class="toc-number">4.4.1.</span> <span class="toc-text">购物车相关</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#os"><span class="toc-number">4.5.</span> <span class="toc-text">os</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hashlib"><span class="toc-number">4.6.</span> <span class="toc-text">hashlib</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hmac"><span class="toc-number">4.7.</span> <span class="toc-text">hmac</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#random"><span class="toc-number">4.8.</span> <span class="toc-text">random</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4位的随机数验证码。"><span class="toc-number">4.8.1.</span> <span class="toc-text">4位的随机数验证码。</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XML"><span class="toc-number">4.9.</span> <span class="toc-text">XML</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#缩进的保存一个XML文件"><span class="toc-number">4.9.1.</span> <span class="toc-text">缩进的保存一个XML文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xml命名空间，例如以H代指一个字符串”http-www-company-com-quot"><span class="toc-number">4.9.2.</span> <span class="toc-text">xml命名空间，例如以H代指一个字符串”http://www.company.com&quot;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#requests第三方模块"><span class="toc-number">4.10.</span> <span class="toc-text">requests第三方模块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#QQ号是否在线检测"><span class="toc-number">4.10.1.</span> <span class="toc-text">QQ号是否在线检测</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#列车时刻表"><span class="toc-number">4.10.2.</span> <span class="toc-text">列车时刻表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configparser"><span class="toc-number">4.11.</span> <span class="toc-text">configparser</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#logging"><span class="toc-number">4.12.</span> <span class="toc-text">logging</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#subprocess"><span class="toc-number">4.13.</span> <span class="toc-text">subprocess</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shutil"><span class="toc-number">4.14.</span> <span class="toc-text">shutil</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#paramiko"><span class="toc-number">4.15.</span> <span class="toc-text">paramiko</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模块拾遗"><span class="toc-number">4.16.</span> <span class="toc-text">模块拾遗</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#os-path添加路径到sys-path"><span class="toc-number">4.17.</span> <span class="toc-text">os.path添加路径到sys.path</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串格式化"><span class="toc-number">5.</span> <span class="toc-text">字符串格式化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#百分号方式"><span class="toc-number">5.1.</span> <span class="toc-text">百分号方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#format方式"><span class="toc-number">5.2.</span> <span class="toc-text">format方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#游戏人生"><span class="toc-number">5.2.1.</span> <span class="toc-text">游戏人生</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#继承"><span class="toc-number">5.3.</span> <span class="toc-text">继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多态"><span class="toc-number">5.4.</span> <span class="toc-text">多态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#反射"><span class="toc-number">5.5.</span> <span class="toc-text">反射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类成员"><span class="toc-number">5.6.</span> <span class="toc-text">类成员</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#类成员修饰符"><span class="toc-number">5.6.1.</span> <span class="toc-text">类成员修饰符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#类的特殊成员"><span class="toc-number">5.6.2.</span> <span class="toc-text">类的特殊成员</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#异常处理"><span class="toc-number">5.6.3.</span> <span class="toc-text">异常处理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#单例模式"><span class="toc-number">5.6.4.</span> <span class="toc-text">单例模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Socket"><span class="toc-number">6.</span> <span class="toc-text">Socket</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IO多路复用"><span class="toc-number">6.1.</span> <span class="toc-text">IO多路复用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#socketServer模块"><span class="toc-number">6.2.</span> <span class="toc-text">socketServer模块</span></a></li></ol></li></ol>
          </div>
      </div>
    </div>

  
    

  
    
  
    
  
    

  
    
  
    <!--微信公众号二维码-->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2019 SubCan&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;liyunliang@cymco.cn
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png">
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

  <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
  <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script> 
  <script>
  var gitment = new Gitment({
    // id: '页面 ID', // 可选。默认为 location.href
    owner: 'SubHyCan',
    repo: 'SubHyCan.github.io',
    oauth: {
    client_id: '642ba02e800e02a0a972',
    client_secret: '62f84805c3e00a38ae2b8f62c7ffbb789ea7c4ca',
    }
  })
  gitment.render(document.getElementById("gitment_comments"))
</script>


<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>