<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>SubHy的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="记录日常的学习">
<meta property="og:type" content="website">
<meta property="og:title" content="SubHy的博客">
<meta property="og:url" content="http://SubHyCan.github.io/index.html">
<meta property="og:site_name" content="SubHy的博客">
<meta property="og:description" content="记录日常的学习">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SubHy的博客">
<meta name="twitter:description" content="记录日常的学习">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://SubHyCan.github.io"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">SubHy的博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">成长之路</a>
        </h2>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Spotlight for DB2使用" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/14/Spotlight for DB2使用/" class="article-date">
  <time datetime="2019-02-14T08:25:49.558Z" itemprop="datePublished">2019-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/14/Spotlight for DB2使用/">Spotlight for DB2使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="一、安装流程"><a href="#一、安装流程" class="headerlink" title="一、安装流程"></a>一、安装流程</h3><p><img src="/images/DB2/1.jpg" alt="">                                </p>
<h3 id="二、Spotlight介绍"><a href="#二、Spotlight介绍" class="headerlink" title="二、Spotlight介绍"></a>二、Spotlight介绍</h3><p>Spotlight on DB2 能让你迅速发现任何性能瓶颈，无论是实时还是历史查询。Spotlight 能鉴别和诊断几千种性能问题，无论是特定用户问题、集中资源SQL事务、 I/O瓶颈、锁定等待或者其它源码问题。Spotlight for DB2 能自动为每个实例建立正常活动的底线，当检测到性能瓶颈时自动发出警告。<br>More info: <a href="https://support.quest.com/zh-cn/spotlight-on-db2/videos" target="_blank" rel="noopener">官网链接</a>                                    </p>
<h3 id="三、Spotlight安装-​"><a href="#三、Spotlight安装-​" class="headerlink" title="三、Spotlight安装                    ​"></a>三、Spotlight安装                    ​</h3><h4 id="1丶Spotlight安装"><a href="#1丶Spotlight安装" class="headerlink" title="1丶Spotlight安装"></a>1丶Spotlight安装</h4><p>使用“<strong>QuestSpotlight_DB2_6.9.1.206.exe</strong>”安装包，点击下一步完成安装过程。<br><img src="/images/DB2/2.jpg" alt="">            </p>
<h4 id="2丶Spotlight破解"><a href="#2丶Spotlight破解" class="headerlink" title="2丶Spotlight破解"></a>2丶Spotlight破解</h4><p>运行“<strong>keygen.exe</strong>”生成序列号并注册软件即可使用。<br><img src="/images/DB2/3.jpg" alt="">                        </p>
<h3 id="四、DB2-客户端配置-​"><a href="#四、DB2-客户端配置-​" class="headerlink" title="四、DB2 客户端配置                    ​"></a>四、DB2 客户端配置                    ​</h3><h4 id="1丶DB2Client安装"><a href="#1丶DB2Client安装" class="headerlink" title="1丶DB2Client安装"></a>1丶DB2Client安装</h4><p>上传并“<strong>DB2_DSClient_10.5.0.3_Win_x86-64.iso</strong>”并安装DB2客户端，用于本地编目数据库实例。<br><img src="/images/DB2/4.jpg" alt="">            </p>
<h4 id="2丶编目DB2数据库-​"><a href="#2丶编目DB2数据库-​" class="headerlink" title="2丶编目DB2数据库                    ​"></a>2丶编目DB2数据库                    ​</h4><h5 id="（1）启动DB2-Windows客户端"><a href="#（1）启动DB2-Windows客户端" class="headerlink" title="（1）启动DB2 Windows客户端"></a>（1）启动DB2 Windows客户端</h5><p>打开CMD窗口，运行“DB2cmd”，进入Windows DB2命令行模式：<br><img src="/images/DB2/5.jpg" alt="">                </p>
<h5 id="（2）-编目数据库"><a href="#（2）-编目数据库" class="headerlink" title="（2） 编目数据库"></a>（2） 编目数据库</h5><p>根据数据库情况，在本地对远程数据库进行挂载。<br>挂载命令：<br>节点名可自行定义，建议与数据库名一致方便查找及使用；<br>别名可自行定义，建议与数据库名一致方便查找及使用；<br><code>如果执行后不生效需执行db2 terminate 刷新缓存！</code><br>命令：<br><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db2 catalog tcpip node <span class="variable">%节点名%</span> remote <span class="variable">%IP%</span> server <span class="variable">%Port%</span> 															</span><br><span class="line">db2 catalog database <span class="variable">%数据库名%</span> as <span class="variable">%别名%</span> <span class="built_in">at</span> node <span class="variable">%节点名%</span></span><br></pre></td></tr></table></figure></p>
<p>范例：<br><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db2 catalog tcpip node si2db remote <span class="number">192</span>.<span class="number">168</span>.<span class="number">229</span>.<span class="number">81</span> server <span class="number">50000</span> 							</span><br><span class="line">db2 catalog database si2db as si2db <span class="built_in">at</span> node si2db</span><br></pre></td></tr></table></figure></p>
<p>一些其他命令：</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">查看编目节点： </span><br><span class="line"></span><br><span class="line">db2 list node directory  </span><br><span class="line"></span><br><span class="line">查看编目数据库： </span><br><span class="line"></span><br><span class="line">db2 list db directory  </span><br><span class="line"></span><br><span class="line">卸载编目节点： </span><br><span class="line"></span><br><span class="line">db2 uncatalog node <span class="variable">%节点名%</span> </span><br><span class="line"></span><br><span class="line">卸载编目数据库： </span><br><span class="line"></span><br><span class="line">db2 uncatalog db <span class="variable">%别名%</span></span><br></pre></td></tr></table></figure>
<p>挂载截图：<br><img src="/images/DB2/6.jpg" alt=""><br>账号清单：                    </p>
<table>
<thead>
<tr>
<th>数据库名</th>
<th>别名</th>
<th>IP</th>
<th>账号</th>
</tr>
</thead>
<tbody>
<tr>
<td>云平台</td>
<td>OMCCLOUDnue</td>
<td>略</td>
<td>monitor</td>
</tr>
<tr>
<td>驰宏数字化</td>
<td>OMCDB</td>
<td>略</td>
<td>monitor</td>
</tr>
<tr>
<td>多晶硅数字化</td>
<td>SI2DB</td>
<td>略</td>
<td>monitor</td>
</tr>
<tr>
<td>锰板块数字化</td>
<td>MNDB</td>
<td>略</td>
<td>monitor</td>
</tr>
<tr>
<td>钛板块数字化</td>
<td>TIDB</td>
<td>略</td>
<td>monitor</td>
</tr>
<tr>
<td>永昌硅数字化</td>
<td>SIDB</td>
<td>略</td>
<td>monitor</td>
</tr>
<tr>
<td>电商采购</td>
<td>SUNEPS</td>
<td>略</td>
<td>monitor</td>
</tr>
<tr>
<td>生产模块</td>
<td>MMPM</td>
<td>略</td>
<td>monitor</td>
</tr>
<tr>
<td>综合管理系统</td>
<td>GAZHDB</td>
<td>略</td>
<td>monitor​</td>
</tr>
</tbody>
</table>
<h3 id="五、Spotlight挂载DB2数据库"><a href="#五、Spotlight挂载DB2数据库" class="headerlink" title="五、Spotlight挂载DB2数据库"></a>五、Spotlight挂载DB2数据库</h3><p>启动“Spotlight”软件，点击“FILE–connect”，选择“Add new connection”：<br><img src="/images/DB2/7.jpg" alt=""><br>选择监控类型为“DB2 LUW”<br><img src="/images/DB2/8.jpg" alt=""><br>根据所挂载DB2数据库，在“Database Alias”中选择需监控数据库，输入数据库监控用户名/密码，监控方式“Method To Retrieve Data”可以为“Snapshot”或“Monitor”，由于数据库部分Monitor未开启，建议采用Snapshot进行监控。<br><img src="/images/DB2/9.jpg" alt="">                                        </p>
<h3 id="六、Spotlight监控DB2数据库"><a href="#六、Spotlight监控DB2数据库" class="headerlink" title="六、Spotlight监控DB2数据库"></a>六、Spotlight监控DB2数据库</h3><p>通过Spotlight可对数据库性能进行监控，每个图例项点击“鼠标右键”选择“show detail”可以看到更详细的监控信息。由于收集信息非实时，可按F5刷新数据库统计信息，以下为部分主要监控参数（包含但不仅限于）：                                    </p>
<h4 id="1丶表空间使用情况监控"><a href="#1丶表空间使用情况监控" class="headerlink" title="1丶表空间使用情况监控"></a>1丶表空间使用情况监控</h4><p>通过“show detail”菜单可看到数据库内所有表空间现有大小及剩余空间，由于本数据库表空间均为“Auto Extent”，该监控项可仅作监控，不作为扩容依据。<br><img src="/images/DB2/10.jpg" alt="">                    </p>
<h4 id="2丶表锁监控（重点监控）"><a href="#2丶表锁监控（重点监控）" class="headerlink" title="2丶表锁监控（重点监控）"></a>2丶表锁监控（重点监控）</h4><p>出现“黄色” “Pending Locks”可确认此时数据库出现表锁，点击该项目使用“show detail”菜单对表锁进行详细分析，包括表锁出现原因及所运行Sql以作详细分析。<br><img src="/images/DB2/11.jpg" alt="">                    </p>
<p>“show detail”页面注意“Locks Held” 、 “DeadLocks”两个参数，通过点击存在以上两种情况的行，可看在下方页面中看到详细的加锁信息。<br><img src="/images/DB2/12.jpg" alt="">    </p>
<h4 id="3丶缓冲池监控（重点监控）"><a href="#3丶缓冲池监控（重点监控）" class="headerlink" title="3丶缓冲池监控（重点监控）"></a>3丶缓冲池监控（重点监控）</h4><p>可对现有缓冲池命中率进行监控，注意：缓冲池命中率应大于95%。<br><img src="/images/DB2/13.jpg" alt="">                    </p>
<h4 id="4丶数据库读写情况监控"><a href="#4丶数据库读写情况监控" class="headerlink" title="4丶数据库读写情况监控"></a>4丶数据库读写情况监控</h4><p>从该数值可知目前从客户端代理直接调用数据库表空间的读写情况。<br><img src="/images/DB2/14.jpg" alt="">                </p>
<h4 id="5丶Sql运行情况"><a href="#5丶Sql运行情况" class="headerlink" title="5丶Sql运行情况"></a>5丶Sql运行情况</h4><p>通过对运行Sql占用时间进行排序，收集占用时间最长的Sql进行进一步调优。<br><img src="/images/DB2/15.jpg" alt="">                    </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://SubHyCan.github.io/2019/02/14/Spotlight for DB2使用/" data-id="cjsvb16u60005syri700ojp9k" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-Windows-Related" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/14/Windows-Related/" class="article-date">
  <time datetime="2019-02-14T08:25:49.558Z" itemprop="datePublished">2019-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/14/Windows-Related/">Windows-Related</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="ren用于修改文件名，可批量修改"><a href="#ren用于修改文件名，可批量修改" class="headerlink" title="ren用于修改文件名，可批量修改"></a>ren用于修改文件名，可批量修改</h2><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ren</span> *.log *.txt         #将所有log文件改为txt文件</span><br></pre></td></tr></table></figure>
<h2 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h2><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nslookup $域名          #直接解析</span><br><span class="line">nslookup                #先进入域名解析环境，再输入域名来进行解析</span><br><span class="line"></span><br><span class="line">nslookup -qt=ptr $ip    #反向解析</span><br><span class="line">nslookup -qt=ptr        #先进入域名反解析环境，再输入ip来进行解析</span><br></pre></td></tr></table></figure>
<h3 id="Notepade-基操"><a href="#Notepade-基操" class="headerlink" title="Notepade+基操"></a>Notepade+基操</h3><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>丶行首行尾空格替换，将下面的替换为想要的字符</span><br><span class="line">行首：^\s+ </span><br><span class="line">行尾：\s+$</span><br><span class="line"><span class="number">2</span>丶行首行尾添加字符，将下面的替换为想要的字符</span><br><span class="line">行首：^ </span><br><span class="line">行尾：$</span><br><span class="line"><span class="number">3</span>丶Notepade++选中多行复制(查看大日志文件特别有用)</span><br><span class="line">例:<span class="number">30000</span>-<span class="number">40000</span>行</span><br><span class="line">(<span class="number">1</span>)丶搜索--&gt;行定位--&gt;输入<span class="number">30000</span>，定位到<span class="number">30000</span>行</span><br><span class="line">(<span class="number">2</span>)丶编辑--&gt;开始/结束选择</span><br><span class="line">(<span class="number">3</span>)丶搜索--&gt;行定位--&gt;输入<span class="number">40000</span>，定位到<span class="number">40000</span>行</span><br><span class="line">(<span class="number">4</span>)丶编辑--&gt;开始/结束选择</span><br><span class="line">(<span class="number">5</span>)丶右键单机复制</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://SubHyCan.github.io/2019/02/14/Windows-Related/" data-id="cjsvb16u70006syrix5ueyzd2" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-Python-3-Study" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/14/Python-3-Study/" class="article-date">
  <time datetime="2019-02-14T08:25:49.496Z" itemprop="datePublished">2019-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/14/Python-3-Study/">Python 3 Study</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="字符串，列表，元组，字典，集合"><a href="#字符串，列表，元组，字典，集合" class="headerlink" title="字符串，列表，元组，字典，集合"></a>字符串，列表，元组，字典，集合</h2><h3 id="购物车"><a href="#购物车" class="headerlink" title="购物车"></a>购物车</h3><p>(1)丶要求用户输入总资产，例如：2000。<br>(2)丶显示商品列表，让用户根据序号选择商品，加入购物车。<br>(3)丶购买，如果商品总额大于总资产，提示账户余额不足，否则，购买成功。<br>(4)丶附加：可充值、某商品移除购物车。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line">goods = [</span><br><span class="line">    &#123;<span class="string">"name"</span>: <span class="string">"电脑"</span>, <span class="string">"price"</span>: <span class="number">1999</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"name"</span>: <span class="string">"鼠标"</span>, <span class="string">"price"</span>: <span class="number">10</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"name"</span>: <span class="string">"游艇"</span>, <span class="string">"price"</span>: <span class="number">20</span>&#125;,</span><br><span class="line">    &#123;<span class="string">"name"</span>: <span class="string">"美女"</span>, <span class="string">"price"</span>: <span class="number">998</span>&#125;,</span><br><span class="line">]</span><br><span class="line">zongzichang=<span class="number">0</span></span><br><span class="line">i1=input(<span class="string">'请输入你的总资产:'</span>)</span><br><span class="line">zongzichang=int(i1)</span><br><span class="line"><span class="comment">#输出商品列表，包括商品名和价格</span></span><br><span class="line"><span class="keyword">for</span> i1 <span class="keyword">in</span> goods:</span><br><span class="line">	print(i1[<span class="string">'name'</span>], i1[<span class="string">'price'</span>])</span><br><span class="line"><span class="comment">#&#123;"电脑":&#123;"num":1,"single_price":1999&#125;&#125;</span></span><br><span class="line">car_dir=&#123;&#125;</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">	i2=input(<span class="string">'请输入购买的商品(输入q来退出购买):'</span>)</span><br><span class="line">	<span class="keyword">if</span> <span class="string">'q'</span> == i2:</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">for</span> items <span class="keyword">in</span> goods:</span><br><span class="line">		<span class="keyword">if</span> items[<span class="string">'name'</span>] == i2:</span><br><span class="line">			name=items[<span class="string">'name'</span>]</span><br><span class="line">			<span class="keyword">if</span> i2 <span class="keyword">in</span> car_dir.keys():</span><br><span class="line">				car_dir[name][<span class="string">'num'</span>]+=<span class="number">1</span></span><br><span class="line">			<span class="keyword">else</span>:</span><br><span class="line">				car_dir[i2]=&#123;<span class="string">"num"</span>:<span class="number">1</span>,<span class="string">'single_price'</span>:items[<span class="string">'price'</span>]&#125;</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">pass</span></span><br><span class="line">print(car_dir)</span><br><span class="line">sum=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i3 <span class="keyword">in</span> car_dir:</span><br><span class="line">	price=car_dir[i3][<span class="string">'num'</span>]*car_dir[i3][<span class="string">'single_price'</span>]</span><br><span class="line">	sum=sum+price</span><br><span class="line"><span class="keyword">if</span> sum &lt;= zongzichang:</span><br><span class="line">	print(<span class="string">'购买成功'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">'账户余额不足，请充值'</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="元素分类"><a href="#元素分类" class="headerlink" title="元素分类"></a>元素分类</h3><p>(1)丶有如下值集合 [11,22,33,44,55,66,77,88,99,90…]，将所有大于 66 的值保存至字典的第一个key中，<br>将小于 66 的值保存至第二个key的值中，即： {‘k1’: 大于66的所有值, ‘k2’: 小于66的所有值}。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line">a = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>,<span class="number">77</span>,<span class="number">88</span>,<span class="number">99</span>,<span class="number">90</span>]</span><br><span class="line">b = &#123;</span><br><span class="line">    <span class="string">"key1"</span>:[],</span><br><span class="line">    <span class="string">"key2"</span>:[],</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">    <span class="keyword">if</span> i &gt; <span class="number">66</span>:</span><br><span class="line">        b[<span class="string">"key1"</span>].append(i)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        b[<span class="string">"key2"</span>].append(i)</span><br><span class="line">print(b)</span><br></pre></td></tr></table></figure></p>
<h3 id="用户登录隐藏密码-三次输入机会-。"><a href="#用户登录隐藏密码-三次输入机会-。" class="headerlink" title="用户登录隐藏密码(三次输入机会)。"></a>用户登录隐藏密码(三次输入机会)。</h3><p>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> getpass       <span class="comment">#模块功能让用户输入的内容不可见</span></span><br><span class="line">time=<span class="number">1</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">	user=input(<span class="string">'请输入用户名:'</span>)</span><br><span class="line">	password=getpass.getpass(<span class="string">"请输入密码:"</span>) <span class="comment">#隐藏用户输入的内容</span></span><br><span class="line">	<span class="keyword">if</span> user == <span class="string">'Hello'</span> <span class="keyword">and</span> password == <span class="string">'Python'</span>:</span><br><span class="line">		print(user,password)</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="keyword">pass</span></span><br><span class="line">	time+=<span class="number">1</span>		</span><br><span class="line">	<span class="keyword">if</span> time &gt;<span class="number">3</span>:</span><br><span class="line">		<span class="keyword">break</span></span><br></pre></td></tr></table></figure></p>
<h3 id="输出商品列表"><a href="#输出商品列表" class="headerlink" title="输出商品列表"></a>输出商品列表</h3><p>(1)丶用户输入序号，显示用户选中的商品。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="comment">#商品列表有4个，我设置了可以输入4次</span></span><br><span class="line">li = [<span class="string">"手机"</span>, <span class="string">"电脑"</span>, <span class="string">'鼠标垫'</span>, <span class="string">'游艇'</span>]</span><br><span class="line">time=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> key,i <span class="keyword">in</span> enumerate(li,<span class="number">1</span>):</span><br><span class="line">	print(key,i)</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:	</span><br><span class="line">	xuanze=int(input(<span class="string">'请输入序号:'</span>))</span><br><span class="line">	print(li[xuanze<span class="number">-1</span>])</span><br><span class="line">	time+=<span class="number">1</span></span><br><span class="line">	<span class="keyword">if</span> time &gt; <span class="number">4</span>:</span><br><span class="line">		<span class="keyword">break</span></span><br></pre></td></tr></table></figure></p>
<h3 id="查找列表元组字典"><a href="#查找列表元组字典" class="headerlink" title="查找列表元组字典"></a>查找列表元组字典</h3><p>(1)丶查找所有的元素，移除每个元素的空格，并查找以 a或A开头 并且以 c 结尾的所有元素，放在列表中并统计次数。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line">name=&#123;</span><br><span class="line">	<span class="string">"li"</span>:[<span class="string">"alec"</span>, <span class="string">" aric"</span>, <span class="string">"Alex"</span>, <span class="string">"Tony"</span>, <span class="string">"rain"</span>],</span><br><span class="line">	<span class="string">"tu"</span>:(<span class="string">"alec"</span>, <span class="string">" aric"</span>, <span class="string">"Alex"</span>, <span class="string">"Tony"</span>, <span class="string">"rain"</span>),</span><br><span class="line">	<span class="string">"dic"</span>:&#123;<span class="string">'k1'</span>: <span class="string">"alex"</span>, <span class="string">'k2'</span>: <span class="string">' aric'</span>,  <span class="string">"k3"</span>: <span class="string">"Alex"</span>, <span class="string">"k4"</span>: <span class="string">"Tony"</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line">new_dic=&#123;&#125;</span><br><span class="line"><span class="keyword">for</span> i1 <span class="keyword">in</span> name:</span><br><span class="line">	<span class="keyword">if</span> isinstance((name[i1]),list) <span class="keyword">or</span> isinstance((name[i1]),tuple):</span><br><span class="line">		<span class="keyword">for</span> i2 <span class="keyword">in</span> name[i1]:</span><br><span class="line">			i3=i2.strip()</span><br><span class="line">			<span class="keyword">if</span> (i3.startswith(<span class="string">"a"</span>) <span class="keyword">or</span> i3.startswith(<span class="string">"A"</span>)) <span class="keyword">and</span> i3.endswith(<span class="string">"c"</span>):</span><br><span class="line">				print(i3)</span><br><span class="line">				<span class="keyword">if</span> i3 <span class="keyword">in</span> new_dic:</span><br><span class="line">					new_dic[i3]+=<span class="number">1</span></span><br><span class="line">				<span class="keyword">else</span>:</span><br><span class="line">					new_dic[i3]=<span class="number">1</span></span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="keyword">for</span> i4 <span class="keyword">in</span> name[i1].values():</span><br><span class="line">			i5=i4.strip()</span><br><span class="line">			<span class="keyword">if</span> (i5.startswith(<span class="string">"a"</span>) <span class="keyword">or</span> i5.startswith(<span class="string">"A"</span>)) <span class="keyword">and</span> i5.endswith(<span class="string">"c"</span>):</span><br><span class="line">				print(i5)</span><br><span class="line">				<span class="keyword">if</span> i5 <span class="keyword">in</span> new_dic:</span><br><span class="line">					new_dic[i5]+=<span class="number">1</span></span><br><span class="line">				<span class="keyword">else</span>:</span><br><span class="line">					new_dic[i5]=<span class="number">1</span></span><br><span class="line">print(new_dic)</span><br></pre></td></tr></table></figure></p>
<h3 id="寻找差异"><a href="#寻找差异" class="headerlink" title="寻找差异"></a>寻找差异</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># 数据库中原有</span></span><br><span class="line">old_dict = &#123;</span><br><span class="line">    <span class="string">"1"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c1'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">80</span>&#125;,</span><br><span class="line">    <span class="string">"2"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c1'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">80</span>&#125;,</span><br><span class="line">    <span class="string">"3"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c1'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">80</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 新汇报的数据</span></span><br><span class="line">new_dict = &#123;</span><br><span class="line">    <span class="string">"1"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c1'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">800</span>&#125;,</span><br><span class="line">    <span class="string">"3"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c1'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">80</span>&#125;,</span><br><span class="line">    <span class="string">"4"</span>:&#123;<span class="string">'hostname'</span>:<span class="string">'c2'</span>,<span class="string">'cpu_count'</span>:<span class="number">2</span>,<span class="string">'mem_capicity'</span>:<span class="number">80</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line">del_set=set(old_dict.keys()).difference(set(new_dict.keys()))         <span class="comment">#&#123;'2'&#125;，需要删除的key，放在set集合里</span></span><br><span class="line">add_set=set(new_dict.keys()).difference(set(old_dict.keys()))         <span class="comment">#&#123;'4'&#125;，需要新增的key，放在set集合里</span></span><br><span class="line">update_set=set(old_dict.keys()).intersection(set(new_dict.keys()))    <span class="comment">#&#123;'1','3'&#125;，交集key，放在set集合里</span></span><br></pre></td></tr></table></figure>
<h3 id="三元运算"><a href="#三元运算" class="headerlink" title="三元运算"></a>三元运算</h3><p>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line">arg1,arg2 = <span class="number">1</span>,<span class="number">2</span></span><br><span class="line">result = arg1 <span class="keyword">if</span> arg1&gt;arg2 <span class="keyword">else</span> arg2          <span class="comment">#如果条件成立，那么将 "arg1" 赋值给result变量，否则，将"arg2"赋值给result变量</span></span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure></p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="函数一"><a href="#函数一" class="headerlink" title="函数一"></a>函数一</h3><p>(1)丶写函数，检查传入字典的每一个value的长度,如果大于2，那么仅保留前两个长度的内容，并将新内容返回给调用者。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zidian</span><span class="params">(args)</span>:</span></span><br><span class="line">	<span class="keyword">for</span> key,value <span class="keyword">in</span> args.items():</span><br><span class="line">		<span class="keyword">if</span> len(value) &gt; <span class="number">2</span>:</span><br><span class="line">			args[key]=value[<span class="number">0</span>:<span class="number">2</span>]</span><br><span class="line">	<span class="keyword">return</span> args	</span><br><span class="line">	</span><br><span class="line">dic = &#123;<span class="string">'k1'</span>:<span class="string">"alex"</span>,<span class="string">'k2'</span>:[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>],<span class="string">"k3"</span>:(<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>),<span class="string">"k4"</span>:<span class="string">"liyunliang"</span>&#125;</span><br><span class="line">print(zidian(dic))</span><br></pre></td></tr></table></figure></p>
<h3 id="函数二"><a href="#函数二" class="headerlink" title="函数二"></a>函数二</h3><p>(1)丶写函数，检查获取传入列表或元组对象的所有奇数位索引对应的元素，并将其作为新列表返回给调用者。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">liebiao</span><span class="params">(args)</span>:</span></span><br><span class="line">	new_list=[]</span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(len(args)):</span><br><span class="line">		<span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">			new_list.append(args[i])</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			<span class="keyword">pass</span></span><br><span class="line">	<span class="keyword">return</span> new_list			</span><br><span class="line">list = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>,<span class="number">77</span>] </span><br><span class="line">print(liebiao(list))</span><br></pre></td></tr></table></figure></p>
<h3 id="函数三"><a href="#函数三" class="headerlink" title="函数三"></a>函数三</h3><p>(1)写函数，检查用户传入的对象（字符串、无嵌套的列表和元组）的每一个元素是否含有空内容。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">space_jiancha</span><span class="params">(args)</span>:</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> args:</span><br><span class="line">		<span class="keyword">if</span> isinstance(i,int):   <span class="comment">#判断是否是int类型,int类型不能使用isspace</span></span><br><span class="line">			<span class="keyword">pass</span></span><br><span class="line">		<span class="keyword">else</span>:	</span><br><span class="line">			<span class="keyword">if</span> i.isspace():</span><br><span class="line">				<span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">				<span class="keyword">break</span>		</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">			</span><br><span class="line">list =[<span class="number">11</span>,<span class="number">22</span>,<span class="string">"liyunliang"</span>,<span class="string">" "</span>]</span><br><span class="line">ret=space_jiancha(list)          <span class="comment">#ret等于True或False</span></span><br><span class="line"><span class="keyword">if</span> ret:</span><br><span class="line">	print(<span class="string">"用户传入的对象有空格"</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">	print(<span class="string">"用户传入的对象没有空格"</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="def和lambda定义函数区别"><a href="#def和lambda定义函数区别" class="headerlink" title="def和lambda定义函数区别"></a>def和lambda定义函数区别</h3><p>(1)丶lambda用于非常简单的函数，一行完成，如下两个函数功能相同。<br>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sumnumber</span><span class="params">(args1,args2)</span>:</span></span><br><span class="line">	<span class="keyword">return</span> args1+args2</span><br><span class="line"></span><br><span class="line">my_lambda=<span class="keyword">lambda</span> args1,args2:args1+args2	</span><br><span class="line"></span><br><span class="line">print(sumnumber(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">print(my_lambda(<span class="number">1</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure></p>
<h3 id="斐波那契数列取第十个值"><a href="#斐波那契数列取第十个值" class="headerlink" title="斐波那契数列取第十个值"></a>斐波那契数列取第十个值</h3><p>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="comment"># 0 1 1 2 3 5 8 13 21 34 55 89</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(end,arg1,arg2)</span>:</span></span><br><span class="line">	<span class="keyword">if</span> end == <span class="number">10</span>:</span><br><span class="line">		<span class="keyword">return</span> arg1</span><br><span class="line">	arg3 = arg1 + arg2</span><br><span class="line">	r = f1(end+<span class="number">1</span>,arg2,arg3)</span><br><span class="line">	<span class="keyword">return</span> r</span><br><span class="line">ret= f1(<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">print(ret)</span><br></pre></td></tr></table></figure></p>
<h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><p>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line">li = [<span class="number">112</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">50</span>,<span class="number">40</span>,<span class="number">1</span>]            <span class="comment">#将列表中数字从小到大依次排列</span></span><br><span class="line">print(li)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(li)):</span><br><span class="line">	<span class="keyword">for</span> j <span class="keyword">in</span> range(len(li)-i):</span><br><span class="line">		<span class="keyword">if</span> li[j] &gt; li[j+<span class="number">1</span>]:</span><br><span class="line">			temp = li[j]</span><br><span class="line">			li[j] = li[j+<span class="number">1</span>]</span><br><span class="line">			li[j+<span class="number">1</span>] = temp</span><br><span class="line">print(li)</span><br></pre></td></tr></table></figure></p>
<h3 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h3><h4 id="单层装饰"><a href="#单层装饰" class="headerlink" title="单层装饰"></a>单层装饰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">(func)</span>:</span>                                  <span class="comment">#装饰器outer</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(*args,**argss)</span>:</span>                     <span class="comment">#可接收任意参数</span></span><br><span class="line">        print(<span class="string">"你好!"</span>)</span><br><span class="line">        r = func(*args,**argss)</span><br><span class="line">        print(<span class="string">"再见!"</span>)</span><br><span class="line">        <span class="keyword">return</span> r</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"><span class="meta">@outer	                                          #相当于outer(f2)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(a1,a2)</span>:</span>                                    <span class="comment">#此函数若需要添加一些额外的功能，不改变原函数代码的情况可以使用装饰器</span></span><br><span class="line">    <span class="keyword">return</span> a1 + a2</span><br><span class="line">print(f2(<span class="number">1</span>,<span class="number">2</span>))	                                  <span class="comment">#输出为:'你好!'  '再见!'  3</span></span><br></pre></td></tr></table></figure>
<h4 id="二层装饰"><a href="#二层装饰" class="headerlink" title="二层装饰"></a>二层装饰</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span><span class="params">(func)</span>:</span>                                  <span class="comment">#装饰器outer</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(*args,**argss)</span>:</span>                     <span class="comment">#可接收任意参数</span></span><br><span class="line">        print(<span class="string">"你好!"</span>)</span><br><span class="line">        r = func(*args,**argss)</span><br><span class="line">        print(<span class="string">"再见!"</span>)</span><br><span class="line">        <span class="keyword">return</span> r</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer_1</span><span class="params">(func)</span>:</span>                                <span class="comment">#装饰器outer_1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span><span class="params">(*args,**argss)</span>:</span></span><br><span class="line">        print(<span class="string">"欢迎来到测试系统!"</span>)</span><br><span class="line">        r = func(*args,**argss)</span><br><span class="line">        <span class="keyword">return</span> r</span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"><span class="meta">@outer_1                                          #相当于outer_1(f2)</span></span><br><span class="line"><span class="meta">@outer                                            #相当于outer(f2)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(a1,a2)</span>:</span>                                    <span class="comment">#此函数若需要添加一些额外的功能，不改变原函数代码的情况可以使用装饰器</span></span><br><span class="line">    <span class="keyword">return</span> a1 + a2</span><br><span class="line"><span class="meta">@outer_1</span></span><br><span class="line"><span class="meta">@outer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f3</span><span class="params">(a1,a2,a3)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a1 + a2 +a3</span><br><span class="line">print(f2(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">print(f3(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2><h3 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">abs()     <span class="comment">#取绝对值</span></span><br><span class="line">all()     <span class="comment">#循环参数，如果每个元素为真，那么all的返回值为真，0,None,空值为假，其余为真</span></span><br><span class="line">any()     <span class="comment">#循环参数，只要一个元素为真，则返回值为真</span></span><br><span class="line">bin()     <span class="comment">#二进制，0b表示</span></span><br><span class="line">oct()     <span class="comment">#八进制，0o表示</span></span><br><span class="line">int()     <span class="comment">#十进制	</span></span><br><span class="line">hex()     <span class="comment">#十六进制，0x表示</span></span><br><span class="line">bool()    <span class="comment">#转换成布尔值，返回真或假</span></span><br><span class="line">bytes()   <span class="comment">#转换为字节类型</span></span><br><span class="line">str()     <span class="comment">#转换为字符类型</span></span><br><span class="line">chr()     <span class="comment">#接收一个数字，找到对应的字符，c=chr(65) ,c的值为A</span></span><br><span class="line">ord()     <span class="comment">#接收一个字符，找到对应的数字, c=ord("A"),c的值为65</span></span><br><span class="line">dir()     <span class="comment">#查看帮助</span></span><br><span class="line">help()    <span class="comment">#查看帮助</span></span><br><span class="line">divmod()  <span class="comment">#取商和余数</span></span><br><span class="line">enumrate() <span class="comment">#为可迭代的对象添加序号</span></span><br><span class="line">eval()    <span class="comment">#执行一个字符串形式的表达式,有返回值</span></span><br><span class="line">filter()  <span class="comment">#过滤器，循环可迭代的对象，获取每一个参数，函数(参数)，filter(函数，可迭代的对象)</span></span><br><span class="line">map()     <span class="comment">#map(函数，可迭代的对象)</span></span><br><span class="line">globals()   <span class="comment">#获取所有全局变量，返回一个字典</span></span><br><span class="line">locals()    <span class="comment">#获取所有局部变量，返回一个字典</span></span><br><span class="line">id()        <span class="comment">#查看变量的内存地址,如a="li"，id(a)</span></span><br><span class="line">input()      <span class="comment">#接受一个标准输入数据，返回为 string 类型，与python2的写法不同，2为raw_input()</span></span><br><span class="line">isinstance() <span class="comment">#判断一个变量是否是某种类型，返回True/False</span></span><br><span class="line">len()        <span class="comment">#输出一个变量的长度，可测量str，列表，元组，字典的长度</span></span><br><span class="line">max()        <span class="comment">#取最大值</span></span><br><span class="line">min()        <span class="comment">#取最小值</span></span><br><span class="line">pow()        <span class="comment">#取幂数</span></span><br><span class="line">round()      <span class="comment">#对小数四舍五入</span></span><br><span class="line">range()      <span class="comment">#可创建一个整数列表，一般用在 for 循环中，用法为:range(start, stop[, step])，&gt;=start，&lt;stop，step为步长 </span></span><br><span class="line">sorted()     <span class="comment">#对所有可迭代的对象进行排序操作，sort只用于列表，用法为:sorted(iterable, key=None, reverse=False),reverse=True表示降序，False表示升序(默认)，生成新的对象，数字和字符串无法比较,字符串根据bytes值排序</span></span><br><span class="line">sum()        <span class="comment">#求和  </span></span><br><span class="line">type()       <span class="comment">#查看对象的类型</span></span><br><span class="line">open()       <span class="comment">#打开文件，用法为:open(name[, mode[, buffering]])，name为文件名,mode为打开方式，buffering可省略</span></span><br><span class="line">list()       <span class="comment">#可定义一个列表，也可用于将元组转换为列表。</span></span><br><span class="line">tuple()      <span class="comment">#可定义一个元组，也可用于将列表转换为元组。</span></span><br><span class="line">dict()       <span class="comment">#可创建一个字典 </span></span><br><span class="line">set()        <span class="comment">#可创建一个无序不重复元素集，可进行关系测试，删除重复数据，还可以计算交集、差集、并集等。</span></span><br></pre></td></tr></table></figure>
<h4 id="用法示例"><a href="#用法示例" class="headerlink" title="用法示例"></a>用法示例</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">abs(<span class="number">-1</span>)    <span class="comment">#返回值为1</span></span><br><span class="line">all([<span class="number">1</span>,<span class="number">0</span>]) <span class="comment">#0为假，返回False</span></span><br><span class="line">any([<span class="number">1</span>,<span class="number">0</span>]) <span class="comment">#1为真，返回True</span></span><br><span class="line">bin(<span class="number">17</span>)    <span class="comment">#十进制转二进制</span></span><br><span class="line">act(<span class="number">17</span>)    <span class="comment">#十进制转八进制</span></span><br><span class="line">hex(<span class="number">17</span>)    <span class="comment">#十进制转十六进制</span></span><br><span class="line">int(<span class="string">'0b11'</span>,base=<span class="number">2</span>)  <span class="comment">#二进制转换为十进制,输出为3，0b可有可无，base=2表示二进制</span></span><br><span class="line">int(<span class="string">'0o11'</span>,base=<span class="number">8</span>)  <span class="comment">#八进制转换为十进制，输出为9，0o可有可无</span></span><br><span class="line">int(<span class="string">'0x11'</span>,base=<span class="number">16</span>) <span class="comment">#十六进制转换为十进制，输出为17 ，0x可有可无</span></span><br><span class="line">bool(<span class="number">1</span>)    <span class="comment">#返回值为True</span></span><br><span class="line">bytes(<span class="string">"liyunliang"</span>,encoding=<span class="string">"utf-8"</span>) <span class="comment">#str转换为bytes，以uft-8的格式编码</span></span><br><span class="line">str(<span class="string">b"liyunliang"</span>,encoding=<span class="string">"utf-8"</span>)  <span class="comment">#bytes转换为str，以utf-8的格式编码</span></span><br><span class="line">chr(<span class="number">65</span>)    <span class="comment">#输出为字符A</span></span><br><span class="line">ord(<span class="string">"A"</span>)   <span class="comment">#输出为数字65</span></span><br><span class="line">dir(hash)  <span class="comment">#查看hash有关的用法</span></span><br><span class="line">help(hash) <span class="comment">#查看hash有关的用法</span></span><br><span class="line">divmod(<span class="number">10</span>,<span class="number">3</span>) <span class="comment">#输出为元组(3,1)</span></span><br><span class="line">li = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]</span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> enumerate(li, <span class="number">1</span>):     <span class="comment">#不指定为1的话默认从0开始</span></span><br><span class="line">    print(k,v)                   <span class="comment">#输出为1 11     2 22    3 33</span></span><br><span class="line">eval(<span class="string">"1+2"</span>)   <span class="comment">#输出为数字3</span></span><br><span class="line">eval(<span class="string">"a+2"</span>,&#123;<span class="string">"a"</span>:<span class="number">1</span>&#125;)  <span class="comment">#输出为数字3</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x &gt; <span class="number">22</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">ret=filter(f1,[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>])      <span class="comment">#ret为可迭代的filter对象</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ret:</span><br><span class="line">	print(i)                      <span class="comment">#输出为过滤得到的数字33和44</span></span><br><span class="line">ret=map(f1,[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>])		  <span class="comment">#ret为可迭代的map对象</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ret:</span><br><span class="line">	print(i)                      <span class="comment">#输出为False，False，True，True</span></span><br><span class="line">id(<span class="number">1</span>)                             <span class="comment">#查看数字1的内存地址</span></span><br><span class="line">u=input(<span class="string">"请输入用户名:"</span>)          <span class="comment">#则输入的数据为用户名</span></span><br><span class="line">isinstance(<span class="number">1</span>,(int))	              <span class="comment">#判断1是否属于int类型，返回True,判断单个类型()可加可不加;isinstance(1,(int,str))，判断1是否属于int或者str类型</span></span><br><span class="line">len(<span class="string">"li"</span>)                         <span class="comment">#返回值为2</span></span><br><span class="line">max([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>])                   <span class="comment">#返回值为33</span></span><br><span class="line">min([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>])                   <span class="comment">#返回值为11</span></span><br><span class="line">pow(<span class="number">2</span>, <span class="number">-1</span>)                        <span class="comment">#返回值为0.5,2的-1次方  </span></span><br><span class="line">round(<span class="number">0.654</span>,<span class="number">2</span>)                    <span class="comment">#返回值为0.65，2表示保留两位小数  </span></span><br><span class="line">sorted([<span class="number">22</span>,<span class="number">44</span>,<span class="number">11</span>,<span class="number">33</span>])             <span class="comment">#返回值为[11,22,33,44]</span></span><br><span class="line">sorted([<span class="number">11</span>,<span class="number">22</span>,<span class="number">44</span>,<span class="number">33</span>],key=<span class="keyword">lambda</span> x: x*<span class="number">-1</span>) <span class="comment">#返回值为[44,33,22,11]，利用key来降序</span></span><br><span class="line">sorted([<span class="number">11</span>,<span class="number">22</span>,<span class="number">44</span>,<span class="number">33</span>],reverse=<span class="keyword">True</span>)       <span class="comment">#返回值为[44,33,22,11]</span></span><br><span class="line">sum([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>])                <span class="comment">#返回值为110  </span></span><br><span class="line">type(<span class="number">1</span>)                           <span class="comment">#可查看1的类型</span></span><br><span class="line"></span><br><span class="line">f = open(<span class="string">'test.txt'</span>,<span class="string">'r'</span>)          <span class="comment">#以只读的方式打开test.txt</span></span><br><span class="line">f.read([size])                    <span class="comment">#size未指定则返回整个文件,如果文件大小&gt;2倍内存则有问题.f.read()读到文件尾时返回""(空字串)</span></span><br><span class="line">f.readline()                      <span class="comment">#读取一行</span></span><br><span class="line">f.readlines([size])               <span class="comment">#返回包含size行的列表,size 未指定则返回全部行</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f: <span class="keyword">print</span> line         <span class="comment">#通过迭代器访问</span></span><br><span class="line">f.write(<span class="string">"hello\n"</span>)                <span class="comment">#如果要写入字符串以外的数据,先将他转换为字符串.</span></span><br><span class="line">f.tell()                          <span class="comment">#返回一个整数,表示当前文件指针的位置(就是到文件头的比特数).</span></span><br><span class="line">f.seek(偏移量,[起始位置])         <span class="comment">#用来移动文件指针.</span></span><br><span class="line">f.close()                         <span class="comment">#关闭文件</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'test.txt'</span>,<span class="string">'r'</span>) <span class="keyword">as</span> f:   <span class="comment">#以只读的方式打开文件test.txt，不需要close文件</span></span><br><span class="line">模式说明：</span><br><span class="line">r	<span class="comment">#以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</span></span><br><span class="line">rb	<span class="comment">#以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。</span></span><br><span class="line">r+	<span class="comment">#打开一个文件用于读写。文件指针将会放在文件的开头。</span></span><br><span class="line">rb+	<span class="comment">#以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。</span></span><br><span class="line">w	<span class="comment">#打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">wb	<span class="comment">#以二进制格式打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">w+	<span class="comment">#打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">wb+	<span class="comment">#以二进制格式打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</span></span><br><span class="line">a	<span class="comment">#打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</span></span><br><span class="line">ab	<span class="comment">#以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</span></span><br><span class="line">a+	<span class="comment">#打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</span></span><br><span class="line">ab+	<span class="comment">#以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</span></span><br></pre></td></tr></table></figure>
<h4 id="用户登录-密码文件"><a href="#用户登录-密码文件" class="headerlink" title="用户登录(密码文件)"></a>用户登录(密码文件)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># 基于密码数据文件的用户登录逻辑</span></span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">register</span><span class="params">(user,pwd)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    提供用户注册功能</span></span><br><span class="line"><span class="string">    :param user:</span></span><br><span class="line"><span class="string">    :param pwd:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'db'</span>,<span class="string">'a'</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f1:</span><br><span class="line">        f1.write(user+<span class="string">'|'</span>+jiami(pwd)+<span class="string">'\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jiami</span><span class="params">(pwd)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    提供密码MD5加密功能</span></span><br><span class="line"><span class="string">    :param pwd:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    temp = hashlib.md5(bytes(<span class="string">'curry'</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    temp.update(bytes(pwd,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    <span class="keyword">return</span> temp.hexdigest()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span><span class="params">(user,pwd)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    提供用户登录功能</span></span><br><span class="line"><span class="string">    :param user:</span></span><br><span class="line"><span class="string">    :param pwd:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'db'</span>,<span class="string">'r'</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f2:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f2:</span><br><span class="line">            u = line.strip().split(<span class="string">"|"</span>)[<span class="number">0</span>]</span><br><span class="line">            p = line.strip().split(<span class="string">"|"</span>)[<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> u == user <span class="keyword">and</span> p == jiami(pwd):</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">chpwd</span><span class="params">(user,pwd)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    提供用户修改密码功能</span></span><br><span class="line"><span class="string">    :param user:</span></span><br><span class="line"><span class="string">    :param pwd:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    new_data = <span class="string">""</span></span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'db'</span>,<span class="string">'r'</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f3:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f3:</span><br><span class="line">            u = line.strip().split(<span class="string">"|"</span>)[<span class="number">0</span>]</span><br><span class="line">            p = line.strip().split(<span class="string">"|"</span>)[<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> u == user <span class="keyword">and</span> p == jiami(pwd):</span><br><span class="line">                new_pwd = input(<span class="string">"请输入新的密码:"</span>)</span><br><span class="line">                line = line.replace(p,jiami(new_pwd))            <span class="comment">#文件内容替换</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">            new_data += line</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'db'</span>,<span class="string">'w'</span>,encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f4:</span><br><span class="line">        f4.write(new_data)</span><br><span class="line">        print(<span class="string">"密码更改成功"</span>)</span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    主函数</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    i = input(<span class="string">"1.登录,2.注册,3.修改密码"</span>)</span><br><span class="line">    <span class="keyword">if</span> i == <span class="string">"2"</span>:</span><br><span class="line">        user = input(<span class="string">"用户名:"</span>)</span><br><span class="line">        pwd = input(<span class="string">"密码:"</span>)</span><br><span class="line">        register(user,pwd)</span><br><span class="line">    <span class="keyword">elif</span> i == <span class="string">"1"</span>:</span><br><span class="line">        user = input(<span class="string">"用户名:"</span>)</span><br><span class="line">        pwd = input(<span class="string">"密码:"</span>)</span><br><span class="line">        ret = login(user,pwd)</span><br><span class="line">        <span class="keyword">if</span> ret:</span><br><span class="line">            print(<span class="string">"登录成功"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">"登录失败"</span>)</span><br><span class="line">    <span class="keyword">elif</span> i == <span class="string">"3"</span>:</span><br><span class="line">        user = input(<span class="string">"用户名:"</span>)</span><br><span class="line">        pwd = input(<span class="string">"密码:"</span>)</span><br><span class="line">        chpwd(user,pwd)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h4 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h4><p>(1)丶设计一个函数，对传入的字符串（假设字符串中只包含小写字母和空格）进行加密操作，<br>加密的规则是a变d，b变e，c变f,…….，x变a，y变b，z变c，空格不变，返回加密后的字符串<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jiami</span><span class="params">(arg)</span>:</span></span><br><span class="line">	temp = <span class="string">''</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> arg:</span><br><span class="line">		<span class="keyword">if</span> i == <span class="string">' '</span>:</span><br><span class="line">			temp += i</span><br><span class="line">		<span class="keyword">elif</span> ord(i) &lt; <span class="number">120</span>:		</span><br><span class="line">			temp += chr(ord(i) + <span class="number">3</span>)</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			temp += chr(ord(i) - <span class="number">23</span>)			</span><br><span class="line">	<span class="keyword">return</span> temp		          </span><br><span class="line">	   </span><br><span class="line">inp = input(<span class="string">"请输入字符串(只包含小写字母和空格):"</span>)</span><br><span class="line">new_inp = jiami(inp)</span><br><span class="line">print(new_inp)</span><br></pre></td></tr></table></figure></p>
<h3 id="不常用"><a href="#不常用" class="headerlink" title="不常用"></a>不常用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">ascii()       <span class="comment">#对象的类中找_repr_，获取其返回值</span></span><br><span class="line">例:</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_repr_</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span></span><br><span class="line">		</span><br><span class="line">r=ascii(Foo())</span><br><span class="line">print(r)                 <span class="comment">#返回值为&lt;__main__.Foo object at 0x013E8B10&gt;</span></span><br><span class="line"></span><br><span class="line">bytearray()   <span class="comment">#字节列表</span></span><br><span class="line">callable()    <span class="comment">#是否可执行，返回True/False，例如函数可执行，返回True</span></span><br><span class="line">compile()     <span class="comment">#接收一个字符串，把该字符串编译为python可执行的代码</span></span><br><span class="line">exec()        <span class="comment">#与eval类似，无返回值，只执行代码</span></span><br><span class="line">例:</span><br><span class="line">exec(<span class="string">"for i in range(10):print(i)"</span>)</span><br><span class="line">hash()        <span class="comment">#得到一个对象的哈希值，如字典key,hash("liyun")，输出为哈希值:-416968271</span></span><br><span class="line">issubclass()  <span class="comment">#用于判断参数 class 是否是类型参数 classinfo 的子类，语法为:issubclass(class, classinfo)</span></span><br><span class="line">例:</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">issubclass(B,A)  <span class="comment">#返回值为True</span></span><br><span class="line">iter()        <span class="comment">#用来生成迭代器，语法为:iter(object[, sentinel])</span></span><br><span class="line">例:</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> iter([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]):</span><br><span class="line">	print(i)</span><br><span class="line">obj = iter([<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>]) <span class="comment">#创建一个可迭代的对象  </span></span><br><span class="line">print(next(obj))       <span class="comment">#从11开始取值，每次取下一个值</span></span><br><span class="line">reversed()   <span class="comment">#反转，生成一个可迭代的对象</span></span><br><span class="line">例:</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> reversed([<span class="number">11</span>,<span class="number">44</span>,<span class="number">33</span>]):</span><br><span class="line">	print(i)               <span class="comment">#输出为33  44  11</span></span><br><span class="line">slice()                    <span class="comment">#根据索引切片</span></span><br><span class="line">例:</span><br><span class="line">[<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>,<span class="number">55</span>,<span class="number">66</span>][slice(<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>)]       <span class="comment">#输出为[22,44]，列表截取1-4元素布长为2的切片</span></span><br><span class="line">zip()	                   <span class="comment">#用于将可迭代的对象作为参数，将对象中对应的元素打包成一个个元组</span></span><br><span class="line">例:</span><br><span class="line">li1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">li2 = [<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"d"</span>]</span><br><span class="line">r = zip(li1 ,li2)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> r:</span><br><span class="line">    print(i)               <span class="comment">#输出为:(1,'a')   (2,'b')   (3,'c')   (4,'d')</span></span><br><span class="line">```	</span><br><span class="line"></span><br><span class="line"><span class="comment">## 正则表达式re</span></span><br><span class="line"><span class="comment">### 常用符号</span></span><br><span class="line">``` python</span><br><span class="line"><span class="string">'^'</span>  <span class="comment">#匹配字符串的开头，若放在[]内，则表示非。</span></span><br><span class="line">re.findall(<span class="string">'^s'</span>,<span class="string">'sb'</span>)                  <span class="comment">#输出为:['s']</span></span><br><span class="line">re.findall(<span class="string">'[^s]'</span>,<span class="string">'bssim'</span>)             <span class="comment">#输出为:['b', 'i', 'm']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'$'</span>  <span class="comment">#匹配字符串的末尾。</span></span><br><span class="line">re.findall(<span class="string">'b$'</span>,<span class="string">'sb'</span>)                  <span class="comment">#输出为:['b']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'.'</span>  <span class="comment">#匹配任意字符，除了换行符，当re.DOTALL标记被指定时，则可以匹配包括换行符的任意字符。</span></span><br><span class="line">re.findall(<span class="string">'.'</span>,<span class="string">'bssim\nc'</span>)             <span class="comment">#输出为:['b', 's', 's', 'i', 'm', 'c']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'*'</span>  <span class="comment">#匹配0个或多个的表达式。</span></span><br><span class="line">re.findall(<span class="string">'.*m'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['bssim']</span></span><br><span class="line">re.findall(<span class="string">'.*c'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['c']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'+'</span>  <span class="comment">#匹配1个或多个的表达式。</span></span><br><span class="line">re.findall(<span class="string">'.+c'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:[]</span></span><br><span class="line">re.findall(<span class="string">'.+m'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['bssim']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'?'</span>  <span class="comment">#匹配0个或1个由前面的正则表达式定义的片段，非贪婪方式</span></span><br><span class="line">re.findall(<span class="string">'.?m'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['im'] </span></span><br><span class="line">re.findall(<span class="string">'.m?'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['b', 's', 's', 'im', 'c']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'|'</span>  <span class="comment">#或运算</span></span><br><span class="line">re.findall(<span class="string">'s|i'</span>,<span class="string">'bssim\nc'</span>)           <span class="comment">#输出为:['s', 's', 'i']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'&#123;m&#125;'</span>    <span class="comment">#匹配前一个字符m次</span></span><br><span class="line">re.findall(<span class="string">'ab&#123;2&#125;'</span>,<span class="string">'abb abc abbcbbb'</span>)       <span class="comment">#输出为:['abb', 'abb']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'&#123;n,m&#125;'</span>  <span class="comment">#匹配前一个字符n到m次</span></span><br><span class="line">re.findall(<span class="string">"ab&#123;1,3&#125;"</span>,<span class="string">"abb abc abbcbbb"</span>)     <span class="comment">#输出为:['abb', 'ab', 'abb']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'(...)'</span>  <span class="comment">#分组匹配</span></span><br><span class="line"></span><br><span class="line"><span class="string">'\'      #后面接常用符号，可将其普通化，接普通字符，可将其特殊化</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'</span>\A<span class="string">'     #从字符开头匹配</span></span><br><span class="line"><span class="string">re.findall("\Aabc","alexabc")                #从开头匹配'</span>abc<span class="string">'，输出为:[],匹配不到</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'</span>\Z<span class="string">'     #匹配字符结尾，同'</span>$<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'</span>\d<span class="string">'     #匹配数字0-9</span></span><br><span class="line"><span class="string">re.findall('</span>\d<span class="string">','</span>ab1cd2ef3<span class="string">')           #输出为:['</span><span class="number">1</span><span class="string">','</span><span class="number">2</span><span class="string">','</span><span class="number">3</span><span class="string">']</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">'</span>\D<span class="string">'     #匹配非数字</span></span><br><span class="line"><span class="string">re.findall('</span>\D<span class="string">','</span>ab1cd2ef3<span class="string">')           #输出为:['</span>a<span class="string">','</span><span class="string">b','</span>c<span class="string">','</span>d<span class="string">','</span>e<span class="string">','</span><span class="string">f']</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">'</span>\w<span class="string">'     #匹配字母和数字和下划线</span></span><br><span class="line"><span class="string">re.findall('</span>\w<span class="string">','</span>a1$_<span class="comment">#c2')             #输出为:['a','1','_','c','2']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'\W'</span>     <span class="comment">#匹配非字母和数字和下划线</span></span><br><span class="line">re.findall(<span class="string">'\W'</span>,<span class="string">'a1_$#c2'</span>)             <span class="comment">#输出为:['$','#']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'\s'</span>     <span class="comment">#匹配空白字符，如换行符等                 </span></span><br><span class="line">re.findall(<span class="string">'\s'</span>,<span class="string">'a\t\nb'</span>)              <span class="comment">#输出为:['\t','\n']</span></span><br><span class="line"></span><br><span class="line"><span class="string">'\S'</span>	 <span class="comment">#匹配任何非空白字符，除换行符等除外</span></span><br><span class="line"></span><br><span class="line"><span class="string">'\1'</span>     <span class="comment">#表示对应的分组在此处出现一次，如'(ab)(cd)\1\2'，则\1实际指的是(ab),\2指的是(cd)</span></span><br></pre></td></tr></table></figure>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">re.findall()            <span class="comment">#把所有匹配到的字符放到以列表中的元素返回</span></span><br><span class="line">re.findall(string, start, end)                   <span class="comment">#可以与re.compile()一起使用，字符串指定位置start到end查找</span></span><br><span class="line">re.findall(<span class="string">'\d+a'</span>,<span class="string">'b13ac4ad'</span>)                    <span class="comment">#输出['13a', '4a']</span></span><br><span class="line">re.findall(<span class="string">'(\d+)a'</span>,<span class="string">'b13ac4ad'</span>)                  <span class="comment">#输出['13', '4']，找到13a和4a，并去掉a输出 </span></span><br><span class="line">re.findall(<span class="string">'((\d+)a)'</span>,<span class="string">'b13ac4ad'</span>)                <span class="comment">#输出[('13a', '13'), ('4a', '4')]，组内再分组</span></span><br><span class="line">re.findall(<span class="string">'(\w+)&#123;4&#125;'</span>,<span class="string">'lishizheng'</span>)              <span class="comment">#输出['g']，(\w)虽然重复了四次，但是表达式只有一个，默认输出末尾字符</span></span><br><span class="line"></span><br><span class="line">re.match(pattern, string, flags)              <span class="comment">#从头开始匹配,re.match只匹配字符串的开始，如果字符串开始不符合正则表达式，则匹配失败，函数返回None；而re.search匹配整个字符串，直到找到一个匹配。</span></span><br><span class="line">r1 = re.match(<span class="string">'h\w+'</span>,<span class="string">'hello world'</span>)</span><br><span class="line">r2 = re.match(<span class="string">'(h)(\w+)'</span>,<span class="string">'hello world'</span>)</span><br><span class="line">r3 = re.match(<span class="string">'(?P&lt;n1&gt;h)(?P&lt;n2&gt;\w+)'</span>,<span class="string">'hello world'</span>)</span><br><span class="line">print(r1.group(),r1.groups(),r1.groupdict())         <span class="comment">#输出为hello () &#123;&#125; ，用法和search相同</span></span><br><span class="line">print(r2.group(),r2.groups(),r2.groupdict())         <span class="comment">#输出为hello ('h', 'ello') &#123;&#125;</span></span><br><span class="line">print(r3.group(),r3.groups(),r3.groupdict())         <span class="comment">#输出为hello ('h', 'ello') &#123;'n1': 'h', 'n2': 'ello'&#125; </span></span><br><span class="line"></span><br><span class="line">re.search(pattern, string, flags)             <span class="comment">#匹配整个字符串，直到找到一个匹配，返回一个match对象，未匹配成功返回None</span></span><br><span class="line">re.search(pattern, string, flags).group()     <span class="comment">#group()默认等于group(0),即所有的元素，输出为字符串 </span></span><br><span class="line">re.search(<span class="string">'www'</span>, <span class="string">'www.runoob.com'</span>).span())    <span class="comment">#可查看匹配的位置</span></span><br><span class="line"></span><br><span class="line">re.sub(pattern, repl, string, count,flag)        <span class="comment">#匹配字符并替换，pattern为正则，repl为需要替换成的字符串,也可为函数，string为原始字符串，count为匹配模式后替换的最大数量，flag为标志位</span></span><br><span class="line">re.sub(<span class="string">'[0-9]'</span>,<span class="string">'|'</span>, <span class="string">'a1b2c3d e8'</span>,count=<span class="number">2</span>)        <span class="comment">#输出为新的字符串:'a|b|c3d e8'</span></span><br><span class="line">re.sub(<span class="string">'[0-9]'</span>,<span class="string">'|'</span>, <span class="string">'a1b2c3d e8'</span>)                <span class="comment">#没有count或者等于0默认全部替换，输出为新的字符串:'a|b|c|d e|'</span></span><br><span class="line"> </span><br><span class="line">re.compile()            <span class="comment">#编译正则表达式</span></span><br><span class="line">rule = re.compile(<span class="string">'[0-9]'</span>,re.I)          <span class="comment">#将正则编译放到一个变量</span></span><br><span class="line">rule.split(<span class="string">'a1b2c3d e8'</span>)                 <span class="comment">#根据这个规则来进行分割，输出为:['a', 'b', 'c', 'd e', '']</span></span><br><span class="line">rule.findall(<span class="string">'run88oob123google456'</span>, <span class="number">0</span>, <span class="number">10</span>)      <span class="comment">#查找字符串0-10的位置的所有数字，输出为:['8','8','1','2']</span></span><br><span class="line"></span><br><span class="line">re.finditer(pattern, string, flags=<span class="number">0</span>)    <span class="comment">#和 findall 类似，在字符串中找到正则表达式所匹配的所有子串，并把它们作为一个迭代器返回。</span></span><br><span class="line">       </span><br><span class="line">re.split()              <span class="comment">#将匹配到的格式当做分割点对字符串分割成列表</span></span><br><span class="line">re.split(<span class="string">'[0-9]'</span>, <span class="string">'a1b2c3d e8'</span>)             <span class="comment">#输出为:['a', 'b', 'c', 'd e', '']</span></span><br><span class="line">re.split(<span class="string">'(ab)'</span>,<span class="string">'123ab456ab789'</span>,<span class="number">1</span>)          <span class="comment">#输出为:['123', 'ab', '456ab789'],加()表示连表达式匹配一起输出,1表示匹配一次，默认匹配多次</span></span><br><span class="line"></span><br><span class="line">flag说明</span><br><span class="line">re.I	<span class="comment">#使匹配对大小写不敏感</span></span><br><span class="line">re.L	<span class="comment">#做本地化识别（locale-aware）匹配</span></span><br><span class="line">re.M	<span class="comment">#多行匹配，影响 ^ 和 $</span></span><br><span class="line">re.S	<span class="comment">#使 . 匹配包括换行在内的所有字符</span></span><br><span class="line">re.U	<span class="comment">#根据Unicode字符集解析字符。这个标志影响 \w, \W, \b, \B.</span></span><br><span class="line">re.X	<span class="comment">#该标志通过给予你更灵活的格式以便你将正则表达式写得更易于理解。</span></span><br></pre></td></tr></table></figure>
<h3 id="正则表达式之计算器"><a href="#正则表达式之计算器" class="headerlink" title="正则表达式之计算器"></a>正则表达式之计算器</h3><p>用户输入数学表达式，含+-<em>/和()，计算结果，例如:’1 - 2 </em> ((60-30 +(-40/5) <em> (9-2</em>5/3 + 7 /3<em>99/4</em>2998 +10 <em> 568/14 )) - (-4</em>3)/ (16-3*2))’<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(arg)</span>:</span></span><br><span class="line">	sum1 = eval(arg)             <span class="comment">#执行一个字符串形式的算术表达式</span></span><br><span class="line">	<span class="keyword">return</span> sum1	</span><br><span class="line">	</span><br><span class="line">inp = input(<span class="string">"请输入您要计算的数学表达式，其中包含加减乘除:"</span>)</span><br><span class="line">exp = inp</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">	list = re.split(<span class="string">'\(([^()]+)\)'</span>, exp , <span class="number">1</span>)         <span class="comment">#根据第一个括号内不含括号的表达式进行分割</span></span><br><span class="line">	<span class="keyword">if</span> len(list) == <span class="number">3</span>:</span><br><span class="line">		temp1 = f1(list[<span class="number">1</span>])</span><br><span class="line">		temp2 = list[<span class="number">0</span>] + str(temp1) +list[<span class="number">2</span>]</span><br><span class="line">		exp = temp2</span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		sum = f1(list[<span class="number">0</span>])</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">print(<span class="string">"%s = %d"</span> %(inp,sum))</span><br></pre></td></tr></table></figure></p>
<h2 id="常用模块"><a href="#常用模块" class="headerlink" title="常用模块"></a>常用模块</h2><h3 id="time"><a href="#time" class="headerlink" title="time"></a>time</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time             <span class="comment">#导入time模块,如果执行`from time import time`,则调用时少写一个time</span></span><br><span class="line">print(time.clock())     <span class="comment">#返回处理器时间,3.3开始已废弃 , 改成了time.process_time()测量处理器运算时间,不包括sleep时间,不稳定,mac上测不出来输出为:8.552505542023591e-07</span></span><br><span class="line">print(time.altzone)     <span class="comment">#返回与utc时间的时间差,以秒计算，输出为:-32400</span></span><br><span class="line">rint(time.asctime())    <span class="comment">#返回时间格式"Fri Aug 19 11:14:16 2016",输出为:Tue Mar 27 13:45:09 2018</span></span><br><span class="line">print(time.localtime()) <span class="comment">#返回本地时间 的struct time对象格式，输出为:time.struct_time(tm_year=2018, tm_mon=3, tm_mday=27, tm_hour=13, tm_min=45, tm_sec=9, tm_wday=1, tm_yday=86, tm_isdst=0)</span></span><br><span class="line">print(time.gmtime(time.time()<span class="number">-800000</span>)) <span class="comment">#返回utc时间的struc时间对象格式,输出为:time.struct_time(tm_year=2018, tm_mon=3, tm_mday=17, tm_hour=23, tm_min=31, tm_sec=49, tm_wday=5, tm_yday=76, tm_isdst=0)</span></span><br><span class="line">print(time.asctime(time.localtime()))  <span class="comment">#输出为:Tue Mar 27 13:45:09 2018</span></span><br><span class="line">print(time.ctime())                    <span class="comment">#输出为:Tue Mar 27 13:45:09 2018</span></span><br><span class="line">truct = time.strptime(<span class="string">"2016/05/22"</span>,<span class="string">"%Y/%m/%d"</span>) <span class="comment">#将日期字符串 转成 struct时间对象格式</span></span><br><span class="line">print(string_2_struct)                         <span class="comment">#输出为:time.struct_time(tm_year=2016, tm_mon=5, tm_mday=22, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=6, tm_yday=143, tm_isdst=-1)</span></span><br><span class="line">struct_2_stamp = time.mktime(string_2_struct)  <span class="comment">#将struct时间对象转成时间戳</span></span><br><span class="line">print(struct_2_stamp)                          <span class="comment">#输出为:1463846400.0   </span></span><br><span class="line">print(time.gmtime(time.time()<span class="number">-86640</span>))          <span class="comment">#将utc时间戳转换成struct_time格式,输出为:time.struct_time(tm_year=2018, tm_mon=3, tm_mday=26, tm_hour=5, tm_min=49, tm_sec=7, tm_wday=0, tm_yday=85, tm_isdst=0)</span></span><br><span class="line">print(time.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>,time.gmtime())) <span class="comment">#将utc struct_time格式转成指定的字符串格式,输出为:2018-03-27 05:53:07</span></span><br><span class="line">print(time.strftime(<span class="string">'%Y%m%d%H%M'</span>,time.localtime(time.time())))  <span class="comment">#取本地时间的时间戳，输出为:201803271406</span></span><br><span class="line">print(time.strftime(<span class="string">'%Y%m%d%H%M'</span>,time.localtime()))             <span class="comment">#取本地时间的时间戳，输出为:201803271406</span></span><br><span class="line">print(time.strftime(<span class="string">'%Y%m%d%H%M'</span>))                              <span class="comment">#取本地时间的时间戳，输出为:201803271406</span></span><br></pre></td></tr></table></figure>
<h3 id="datetime"><a href="#datetime" class="headerlink" title="datetime"></a>datetime</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> datetime    <span class="comment">#导入datetime模块</span></span><br><span class="line">print(datetime.datetime.now())                   <span class="comment">#输出为:2018-03-27 13:56:12.918226     </span></span><br><span class="line">print(datetime.date.fromtimestamp(time.time()))  <span class="comment">#输出为:2018-03-27</span></span><br><span class="line">print(datetime.datetime.now() + datetime.timedelta(<span class="number">3</span>))  <span class="comment">#当前时间加三天，输出为:2018-03-30 13:58:55.264512</span></span><br><span class="line">print(datetime.datetime.now() + datetime.timedelta(<span class="number">-3</span>))  <span class="comment">#当前时间减三天，输出为:2018-03-24 13:58:55.264512</span></span><br><span class="line">print(datetime.datetime.now() + datetime.timedelta(hours=<span class="number">3</span>)) <span class="comment">#当前时间加三小时，输出为:2018-03-27 16:58:55.264512</span></span><br><span class="line">print(datetime.datetime.now() + datetime.timedelta(minutes=<span class="number">30</span>)) <span class="comment">#当前时间加30分钟</span></span><br><span class="line">print(datetime.datetime.now() + datetime.timedelta(weeks=<span class="number">1</span>))    <span class="comment">#当前时间加一周</span></span><br><span class="line">c_time  = datetime.datetime.now()</span><br><span class="line">print(c_time.replace(minute=<span class="number">3</span>,hour=<span class="number">2</span>))                          <span class="comment">#时间替换</span></span><br></pre></td></tr></table></figure>
<h3 id="sys"><a href="#sys" class="headerlink" title="sys"></a>sys</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys         <span class="comment">#导入sys模块</span></span><br><span class="line">sys.argv           <span class="comment">#命令行参数List,执行python文件时可以传入多个参数,参数以列表的形式保存,第一个元素是程序本身路径</span></span><br><span class="line">sys.exit(n)        <span class="comment">#退出程序，正常退出时exit(0)</span></span><br><span class="line">sys.version        <span class="comment">#获取Python解释程序的版本信息</span></span><br><span class="line">sys.maxint         <span class="comment">#最大的Int值</span></span><br><span class="line">sys.path           <span class="comment">#返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值,默认当前路径优先,python\lib\site-packages 路径存放所有第三方安装的模块 </span></span><br><span class="line">sys.platform       <span class="comment">#返回操作系统平台名称</span></span><br><span class="line">sys.stdout.write(<span class="string">'please:'</span>)</span><br><span class="line">val = sys.stdin.readline()[:<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<h4 id="进度条作业"><a href="#进度条作业" class="headerlink" title="进度条作业"></a>进度条作业</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> sys,time</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">31</span>):</span><br><span class="line">    sys.stdout.write(<span class="string">'\r'</span>)             <span class="comment">#清除屏幕输出</span></span><br><span class="line">    sys.stdout.write(<span class="string">'%s%% | %s'</span> %(int(i/<span class="number">30</span>*<span class="number">100</span>),int(i/<span class="number">30</span>*<span class="number">100</span>)*<span class="string">'*'</span>))</span><br><span class="line">    sys.stdout.flush()                 <span class="comment">#刷新，每一次都输出</span></span><br><span class="line">    time.sleep(<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure>
<h4 id="将用户传入的参数变为文件夹"><a href="#将用户传入的参数变为文件夹" class="headerlink" title="将用户传入的参数变为文件夹"></a>将用户传入的参数变为文件夹</h4><figure class="highlight python"><figcaption><span>#例如文件名为createdir.py，则执行`python create.py a b c`就会在当前目录新建a,b,c三个目录</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> sys,os</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,len(sys.argv)):</span><br><span class="line">    os.mkdir(sys.argv[i])</span><br></pre></td></tr></table></figure>
<h3 id="pickle和json"><a href="#pickle和json" class="headerlink" title="pickle和json"></a>pickle和json</h3><p>用于序列化和反序列化的两个模块，提供了四个功能:dumps、dump、loads、load，pickle用于python内部，json可与其他语言共用<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pickle.loads()     <span class="comment">#将字符串转化为python数据类型列表，元组，字典，可从文件中读取列表，元组，字典类型的数据，主要使用带s的    </span></span><br><span class="line">pickle.load()</span><br><span class="line">pickle.dumps()     <span class="comment">#将python数据类型转化为字符串，与open结合可将列表，元组，字典类型的数据放进文件中</span></span><br><span class="line">pickle.dump()</span><br></pre></td></tr></table></figure></p>
<h4 id="购物车相关"><a href="#购物车相关" class="headerlink" title="购物车相关"></a>购物车相关</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line">account_info =&#123;</span><br><span class="line">    <span class="number">1</span>:&#123;</span><br><span class="line">        <span class="string">'name'</span>:<span class="string">'liyunliang'</span>,</span><br><span class="line">        <span class="string">'passwd'</span>:<span class="string">'lylapqh'</span>,</span><br><span class="line">        <span class="string">'tel'</span>:<span class="string">'13888675421'</span>,</span><br><span class="line">        <span class="string">'balance'</span>:<span class="number">15000</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">f = open(<span class="string">'account_db'</span>,<span class="string">'wb'</span>)                 </span><br><span class="line">f.write(pickle.dumps(account_info))                  <span class="comment">#将字典的信息写进数据文件中</span></span><br><span class="line"><span class="comment"># pickle.dump(account_info,f)  和上面等价</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line">account_file = open(<span class="string">'account_db'</span>,<span class="string">'rb'</span>)                   </span><br><span class="line">account_dic = pickle.loads(account_file.read())      <span class="comment">#将数据文件读到字典里</span></span><br><span class="line"><span class="comment"># account_dic = pickle.load(account_file) 和上面等价      </span></span><br><span class="line">account_file.close()</span><br><span class="line">account_dic[<span class="number">1</span>][<span class="string">'balance'</span>] -= <span class="number">500</span>                     <span class="comment">#购物后找到对应人账户余额减去商品价格</span></span><br><span class="line">f = open(<span class="string">'account_db'</span>,<span class="string">'wb'</span>)</span><br><span class="line">f.write(pickle.dumps(account_dic))                   <span class="comment">#将新的字典写入数据文件</span></span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<h3 id="os"><a href="#os" class="headerlink" title="os"></a>os</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">os.getcwd()                 <span class="comment">#获取当前工作目录，即当前python脚本工作的目录路径</span></span><br><span class="line">os.chdir(<span class="string">"dirname"</span>)         <span class="comment">#改变当前脚本工作目录；相当于shell下cd</span></span><br><span class="line">os.curdir                   <span class="comment">#返回当前目录: ('.')</span></span><br><span class="line">os.pardir                   <span class="comment">#获取当前目录的父目录字符串名：('..')</span></span><br><span class="line">os.makedirs(<span class="string">'dir1/dir2'</span>)    <span class="comment">#可生成多层递归目录</span></span><br><span class="line">os.removedirs(<span class="string">'dirname1'</span>)   <span class="comment">#若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推</span></span><br><span class="line">os.mkdir(<span class="string">'dirname'</span>)         <span class="comment">#生成单级目录；相当于shell中mkdir dirname</span></span><br><span class="line">os.rmdir(<span class="string">'dirname'</span>)         <span class="comment">#删除单级空目录，若目录不为空则无法删除，报错；相当于shell中rmdir dirname</span></span><br><span class="line">os.listdir(<span class="string">'dirname'</span>)       <span class="comment">#列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印</span></span><br><span class="line">os.remove()                 <span class="comment">#删除一个文件</span></span><br><span class="line">os.rename(<span class="string">"oldname"</span>,<span class="string">"new"</span>)  <span class="comment">#重命名文件/目录</span></span><br><span class="line">os.stat(<span class="string">'path/filename'</span>)    <span class="comment">#获取文件/目录信息</span></span><br><span class="line">os.sep                      <span class="comment">#操作系统特定的路径分隔符，win下为"\\",Linux下为"/"</span></span><br><span class="line">os.linesep                  <span class="comment">#当前平台使用的行终止符，win下为"\t\n",Linux下为"\n"</span></span><br><span class="line">os.pathsep                  <span class="comment">#用于分割文件路径的字符串</span></span><br><span class="line">os.name                     <span class="comment">#字符串指示当前使用平台。win-&gt;'nt'; Linux-&gt;'posix'</span></span><br><span class="line">os.system(<span class="string">"bash command"</span>)   <span class="comment">#运行shell命令，直接显示</span></span><br><span class="line">os.environ                  <span class="comment">#获取系统环境变量</span></span><br><span class="line">os.path.abspath(path)       <span class="comment">#返回path规范化的绝对路径</span></span><br><span class="line">os.path.split(path)         <span class="comment">#将path分割成目录和文件名二元组返回</span></span><br><span class="line">os.path.dirname(path)       <span class="comment">#返回path的目录。其实就是os.path.split(path)的第一个元素</span></span><br><span class="line">os.path.basename(path)      <span class="comment">#返回path最后的文件名。如何path以／或\结尾，那么就会返回空值。即os.path.split(path)的第二个元素</span></span><br><span class="line">os.path.exists(path)        <span class="comment">#如果path存在，返回True；如果path不存在，返回False</span></span><br><span class="line">os.path.isabs(path)         <span class="comment">#如果path是绝对路径，返回True</span></span><br><span class="line">os.path.isfile(path)        <span class="comment">#如果path是一个存在的文件，返回True。否则返回False</span></span><br><span class="line">os.path.isdir(path)         <span class="comment">#如果path是一个存在的目录，则返回True。否则返回False</span></span><br><span class="line">os.path.join(path1[, path2[, ...]])  <span class="comment">#将多个路径组合后返回，第一个绝对路径之前的参数将被忽略</span></span><br><span class="line">os.path.getatime(path)      <span class="comment">#返回path所指向的文件或者目录的最后存取时间</span></span><br><span class="line">os.path.getmtime(path)      <span class="comment">#返回path所指向的文件或者目录的最后修改时间</span></span><br></pre></td></tr></table></figure>
<h3 id="hashlib"><a href="#hashlib" class="headerlink" title="hashlib"></a>hashlib</h3><p>用于加密相关的操作，代替了md5模块和sha模块，主要提供 SHA1, SHA224, SHA256, SHA384, SHA512 ，MD5 算法<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># ######## md5 ########</span></span><br><span class="line">hash = hashlib.md5()</span><br><span class="line"><span class="comment"># help(hash.update)</span></span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line">print(hash.digest())</span><br><span class="line"> </span><br><span class="line"><span class="comment">######## sha1 ######## </span></span><br><span class="line">hash = hashlib.sha1()</span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ######## sha256 ######## </span></span><br><span class="line">hash = hashlib.sha256()</span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ######## sha384 ########</span></span><br><span class="line">hash = hashlib.sha384()</span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"> </span><br><span class="line"><span class="comment"># ######## sha512 ######## </span></span><br><span class="line">hash = hashlib.sha512()</span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>, encoding=<span class="string">'utf-8'</span>))</span><br><span class="line">print(hash.hexdigest())</span><br><span class="line"></span><br><span class="line">以上加密算法虽然依然非常厉害，但时候存在缺陷，即：通过撞库可以反解。所以，有必要对加密算法中添加自定义key再来做加密。</span><br><span class="line"><span class="comment"># ######## md5 ########</span></span><br><span class="line">hash = hashlib.md5(bytes(<span class="string">'898oaFs09f'</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">hash.update(bytes(<span class="string">'admin'</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">print(hash.hexdigest())</span><br></pre></td></tr></table></figure></p>
<h3 id="hmac"><a href="#hmac" class="headerlink" title="hmac"></a>hmac</h3><p>python内置还有一个 hmac 模块，它内部对我们创建 key 和 内容 进行进一步的处理然后再加密<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> hmac </span><br><span class="line">h = hmac.new(bytes(<span class="string">'898oaFs09f'</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">h.update(bytes(<span class="string">'admin'</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">print(h.hexdigest())</span><br></pre></td></tr></table></figure></p>
<h3 id="random"><a href="#random" class="headerlink" title="random"></a>random</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line">print(random.random())                 <span class="comment">#随机生成0-1之间的小数</span></span><br><span class="line">print(random.randint(<span class="number">1</span>, <span class="number">2</span>))            <span class="comment">#随机生成1或者2</span></span><br><span class="line">print(random.randrange(<span class="number">1</span>, <span class="number">10</span>))         <span class="comment">#随机生成1-10中的一个数</span></span><br></pre></td></tr></table></figure>
<h4 id="4位的随机数验证码。"><a href="#4位的随机数验证码。" class="headerlink" title="4位的随机数验证码。"></a>4位的随机数验证码。</h4><p>例:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding=utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">	temp=<span class="string">""</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">		num = random.randrange(<span class="number">0</span>,<span class="number">4</span>)</span><br><span class="line">		<span class="keyword">if</span> num == <span class="number">0</span> <span class="keyword">or</span> num == <span class="number">2</span>:</span><br><span class="line">			rad1 = random.randrange(<span class="number">0</span>,<span class="number">10</span>)</span><br><span class="line">			temp += str(rad1)</span><br><span class="line">		<span class="keyword">else</span>:</span><br><span class="line">			rad2 = random.randrange(<span class="number">65</span>,<span class="number">91</span>)</span><br><span class="line">			temp += chr(rad2)                <span class="comment">#chr()为找到数字对应的字符</span></span><br><span class="line">	print(temp)</span><br><span class="line">	shuru = str(input(<span class="string">"请输入验证码:"</span>))</span><br><span class="line">	<span class="keyword">if</span> shuru == temp:</span><br><span class="line">		<span class="keyword">break</span></span><br><span class="line">	<span class="keyword">else</span>:</span><br><span class="line">		<span class="keyword">pass</span></span><br></pre></td></tr></table></figure></p>
<h3 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h3><p>XML是实现不同语言或程序之间进行数据交换的协议，XML文件格式如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Liechtenstein"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2023<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>141100<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"E"</span> <span class="attr">name</span>=<span class="string">"Austria"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"W"</span> <span class="attr">name</span>=<span class="string">"Switzerland"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Singapore"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2026<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>59900<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"N"</span> <span class="attr">name</span>=<span class="string">"Malaysia"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">country</span> <span class="attr">name</span>=<span class="string">"Panama"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rank</span> <span class="attr">updated</span>=<span class="string">"yes"</span>&gt;</span>69<span class="tag">&lt;/<span class="name">rank</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">year</span>&gt;</span>2026<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">gdppc</span>&gt;</span>13600<span class="tag">&lt;/<span class="name">gdppc</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"W"</span> <span class="attr">name</span>=<span class="string">"Costa Rica"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">neighbor</span> <span class="attr">direction</span>=<span class="string">"E"</span> <span class="attr">name</span>=<span class="string">"Colombia"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">country</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>操作XML<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET          <span class="comment">#解析文件或者字符串，做修改，都在内存中进行，原对象不改变，如需修改得重新write写入</span></span><br><span class="line">str_xml = open(<span class="string">'xo.xml'</span>, <span class="string">'r'</span>).read()             <span class="comment">#打开文件，读取XML内容，内容为xml格式的字符串</span></span><br><span class="line">print(ET.XML(str_xml))                           <span class="comment">#将xml公司的字符串解析成xml特殊对象，获取xml文件的根节点</span></span><br><span class="line">print(ET.parse(<span class="string">"xo.xml"</span>))                        <span class="comment">#直接解析xml文件</span></span><br><span class="line">print(ET.parse(<span class="string">"xo.xml"</span>).getroot())                <span class="comment">#获取xml文件的根节点</span></span><br><span class="line">print(ET.parse(<span class="string">"xo.xml"</span>).getroot().tag)            <span class="comment">#顶层标签</span></span><br><span class="line">root = ET.parse(<span class="string">"xo.xml"</span>).getroot()                <span class="comment">#与下面的相同</span></span><br><span class="line">root = ET.XML(str_xml)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> root:         <span class="comment">#遍历XML文档的第二层</span></span><br><span class="line">    print(child.tag, child.attrib)                 <span class="comment">#第二层节点的标签名称和标签属性</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> child:                                <span class="comment">#遍历XML文档的第三层</span></span><br><span class="line">        print(i.tag,i.text)                        <span class="comment">#第二层节点的标签名称和内容</span></span><br><span class="line">		</span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'year'</span>):    <span class="comment">#遍历XML中所有的指定的year节点</span></span><br><span class="line">    print(node.tag, node.text)                            <span class="comment">#节点的标签名称和内容</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'year'</span>):                 <span class="comment">#循环所有的year节点</span></span><br><span class="line">    new_year = int(node.text) + <span class="number">1</span>                         <span class="comment">#将year节点中的内容自增1</span></span><br><span class="line">    node.text = str(new_year)</span><br><span class="line">    node.set(<span class="string">'name'</span>, <span class="string">'SubHy'</span>)                             <span class="comment">#设置属性</span></span><br><span class="line">    node.set(<span class="string">'age'</span>, <span class="string">'18'</span>)</span><br><span class="line">    <span class="keyword">del</span> node.attrib[<span class="string">'name'</span>]                               <span class="comment">#删除属性</span></span><br><span class="line">tree = ET.ElementTree(root)                               <span class="comment">#保存文件</span></span><br><span class="line">tree.write(<span class="string">"newnew.xml"</span>, encoding=<span class="string">'utf-8'</span>)</span><br></pre></td></tr></table></figure></p>
<h4 id="缩进的保存一个XML文件"><a href="#缩进的保存一个XML文件" class="headerlink" title="缩进的保存一个XML文件"></a>缩进的保存一个XML文件</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="keyword">from</span> xml.dom <span class="keyword">import</span> minidom</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mkxml</span><span class="params">(elem,filename)</span>:</span></span><br><span class="line">    rough_string = ET.tostring(elem,<span class="string">'utf-8'</span>)</span><br><span class="line">    reparsed = minidom.parseString(rough_string)</span><br><span class="line">    raw_str = reparsed.toprettyxml(indent=<span class="string">"\t"</span>)</span><br><span class="line">    f = open(filename,<span class="string">'w'</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">    f.write(raw_str)</span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">root = ET.Element(<span class="string">"famliy"</span>)                                     <span class="comment"># 创建根节点</span></span><br><span class="line"><span class="comment"># son1 = ET.Element('son', &#123;'name': '儿1'&#125;)                     #创建大儿子</span></span><br><span class="line">son1 = root.makeelement(<span class="string">'son'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿1'</span>&#125;)                                     </span><br><span class="line"><span class="comment"># son2 = ET.Element('son', &#123;"name": '儿2'&#125;)                     #创建小儿子</span></span><br><span class="line">son2 = root.makeelement(<span class="string">'son'</span>, &#123;<span class="string">"name"</span>: <span class="string">'儿2'</span>&#125;)</span><br><span class="line"><span class="comment"># grandson1 = ET.Element('grandson', &#123;'name': '儿11'&#125;)          #在大儿子中创建两个孙子  </span></span><br><span class="line">grandson11 = son1.makeelement(<span class="string">'grandson'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿11'</span>&#125;)</span><br><span class="line"><span class="comment"># grandson2 = ET.Element('grandson', &#123;'name': '儿12'&#125;)</span></span><br><span class="line">grandson12 = son1.makeelement(<span class="string">'grandson'</span>, &#123;<span class="string">'name'</span>: <span class="string">'儿12'</span>&#125;)</span><br><span class="line">son1.append(grandson11)                                         <span class="comment">#把孙子添加到儿子1节点中</span></span><br><span class="line">son1.append(grandson12)</span><br><span class="line">root.append(son1)                                               <span class="comment">#把儿子添加到根节点中</span></span><br><span class="line">root.append(son2)</span><br><span class="line">mkxml(root,<span class="string">"xxxoo.xml"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="xml命名空间，例如以H代指一个字符串”http-www-company-com-quot"><a href="#xml命名空间，例如以H代指一个字符串”http-www-company-com-quot" class="headerlink" title="xml命名空间，例如以H代指一个字符串”http://www.company.com&quot;"></a>xml命名空间，例如以H代指一个字符串”<a href="http://www.company.com&quot;" target="_blank" rel="noopener">http://www.company.com&quot;</a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line">ET.register_namespace(<span class="string">'H'</span>,<span class="string">"http://www.company.com"</span>) <span class="comment">#some name</span></span><br><span class="line"><span class="comment"># build a tree structure</span></span><br><span class="line">root = ET.Element(<span class="string">"&#123;http://www.company.com&#125;STUFF"</span>)</span><br><span class="line">body = ET.SubElement(root, <span class="string">"&#123;http://www.company.com&#125;MORE_STUFF"</span>, attrib=&#123;<span class="string">"&#123;http://www.company.com&#125;hhh"</span>: <span class="string">"123"</span>&#125;)</span><br><span class="line">body.text = <span class="string">"STUFF EVERYWHERE!"</span></span><br><span class="line"><span class="comment"># wrap it in an ElementTree instance, and save as XML</span></span><br><span class="line">tree = ET.ElementTree(root)</span><br><span class="line">tree.write(<span class="string">"page.xml"</span>,xml_declaration=<span class="keyword">True</span>,encoding=<span class="string">'utf-8'</span>,method=<span class="string">"xml"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="requests第三方模块"><a href="#requests第三方模块" class="headerlink" title="requests第三方模块"></a>requests第三方模块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests,json</span><br><span class="line">ret = requests.get(<span class="string">'https://github.com/timeline.json'</span>)         <span class="comment">#无参数示例,get请求</span></span><br><span class="line">print(ret.url)                                                 <span class="comment">#输出请求网址的地址字符串类型'https://github.com/timeline.json' </span></span><br><span class="line">print(ret.text)                                                <span class="comment">#返回请求解析得到的字符串内容</span></span><br><span class="line">print(ret.content)                                             <span class="comment">#返回解析的二进制数据</span></span><br><span class="line">print(ret.cookies)                                             <span class="comment">#输出请求网址的cookies信息 </span></span><br><span class="line">print(ret.headers)                                             <span class="comment">#输出请求网址的headers所有信息</span></span><br><span class="line">print(ret.status_code)                                         <span class="comment">#输出请求页面的状态（状态码） </span></span><br><span class="line">print(ret.history)                                             <span class="comment">#输出请求的历史记录（以列表的形式显示）</span></span><br><span class="line">print(requests.codes.ok)                                       <span class="comment">#requests请求状态码，为200 </span></span><br><span class="line">ret.encoding = <span class="string">'utf-8'</span>                                         <span class="comment">#当解析到的输出乱码时,可设置编码 </span></span><br><span class="line"></span><br><span class="line">payload = &#123;<span class="string">'key1'</span>: <span class="string">'value1'</span>, <span class="string">'key2'</span>: <span class="string">'value2'</span>&#125;</span><br><span class="line">ret = requests.get(<span class="string">"http://httpbin.org/get"</span>, params=payload)   <span class="comment">#有参数示例,get请求</span></span><br><span class="line">print(ret.url)                                                 <span class="comment">#返回字符串'http://httpbin.org/get?key1=value1&amp;key2=value2'</span></span><br><span class="line">print(ret.text)</span><br><span class="line"></span><br><span class="line">ret = requests.post(<span class="string">"http://httpbin.org/post"</span>, data=payload)   <span class="comment">#基本POST请求示例 </span></span><br><span class="line">print(ret.text)</span><br><span class="line"></span><br><span class="line">url = <span class="string">'https://api.github.com/some/endpoint'</span></span><br><span class="line">payload = &#123;<span class="string">'some'</span>: <span class="string">'data'</span>&#125;</span><br><span class="line">headers = &#123;<span class="string">'content-type'</span>: <span class="string">'application/json'</span>&#125;</span><br><span class="line">ret = requests.post(url, data=json.dumps(payload), headers=headers)    <span class="comment">#发送请求头和数据实例</span></span><br><span class="line">print(ret.text)</span><br><span class="line">print(ret.cookies)</span><br></pre></td></tr></table></figure>
<h4 id="QQ号是否在线检测"><a href="#QQ号是否在线检测" class="headerlink" title="QQ号是否在线检测"></a>QQ号是否在线检测</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment">#输入参数：QQ号码 String。返回数据：String，Y = 在线；N = 离线；E = QQ号码错误；A = 商业用户验证失败；V = 免费用户超过数量</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">qqonlinedetect</span><span class="params">(args)</span>:</span></span><br><span class="line">    r = requests.get(<span class="string">'http://www.webxml.com.cn//webservices/qqOnlineWebService.asmx/qqCheckOnline?qqCode='</span>+args)</span><br><span class="line">    result = r.text</span><br><span class="line">    node = ET.XML(result)     <span class="comment">#解析XML格式内容</span></span><br><span class="line">    <span class="keyword">if</span> node.text == <span class="string">"Y"</span>:      <span class="comment">#获取内容</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    ret = qqonlinedetect(input(<span class="string">"请输入QQ号:"</span>))</span><br><span class="line">    <span class="keyword">if</span> ret:</span><br><span class="line">        print(<span class="string">"您的QQ号在线"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        print(<span class="string">"您的QQ号离线"</span>)</span><br></pre></td></tr></table></figure>
<h4 id="列车时刻表"><a href="#列车时刻表" class="headerlink" title="列车时刻表"></a>列车时刻表</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> xml.etree <span class="keyword">import</span> ElementTree <span class="keyword">as</span> ET</span><br><span class="line"><span class="comment">#使用内置模块urllib发送HTTP请求，或者XML格式内容，该例中车次为:K113</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">f = urllib.request.urlopen('http://www.webxml.com.cn/WebServices/TrainTimeWebService.asmx/getDetailInfoByTrainCode?TrainCode=K113&amp;UserID=')</span></span><br><span class="line"><span class="string">result = f.read().decode('utf-8')</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="comment">#使用第三方模块requests发送HTTP请求，获取XML格式内容</span></span><br><span class="line">r = requests.get(<span class="string">'http://www.webxml.com.cn/WebServices/TrainTimeWebService.asmx/getDetailInfoByTrainCode?TrainCode=K113&amp;UserID='</span>)</span><br><span class="line">result = r.text</span><br><span class="line">root = ET.XML(result)   <span class="comment"># 解析XML格式内容</span></span><br><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> root.iter(<span class="string">'TrainDetailInfo'</span>):</span><br><span class="line">    print(node.find(<span class="string">'TrainStation'</span>).text,node.find(<span class="string">'StartTime'</span>).text,node.find(<span class="string">'KM'</span>).text)</span><br></pre></td></tr></table></figure>
<h3 id="configparser"><a href="#configparser" class="headerlink" title="configparser"></a>configparser</h3><p>configparser用于处理特定格式的文件，其本质上是利用open来操作文件。<br>xx文件如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[section1]  <span class="comment"># 节点</span></span><br><span class="line">k1 = v1     <span class="comment"># 值</span></span><br><span class="line">k2:v2       <span class="comment"># 值</span></span><br><span class="line"> </span><br><span class="line">[section2]  <span class="comment"># 节点</span></span><br><span class="line">k1 = v1     <span class="comment"># 值</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> configparser</span><br><span class="line">config = configparser.ConfigParser()</span><br><span class="line">config.read(<span class="string">'xx'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">ret = config.sections()                        <span class="comment">#获取所有节点</span></span><br><span class="line">ret = config.items(<span class="string">'section1'</span>)                 <span class="comment">#获取指定节点下所有的键值对</span></span><br><span class="line">ret = config.options(<span class="string">'section1'</span>)               <span class="comment">#获取指定节点下所有的键</span></span><br><span class="line">v = config.get(<span class="string">'section1'</span>,<span class="string">'k1'</span>)                <span class="comment">#获取指定节点下的key</span></span><br><span class="line">has_sec = config.has_section(<span class="string">'section1'</span>)       <span class="comment">#检查指定节点是否在config中，返回True/False</span></span><br><span class="line">config.add_section(<span class="string">"SEC_1"</span>)                    <span class="comment">#添加一个节点，可以写到原文件，也可生成新文件</span></span><br><span class="line">config.write(open(<span class="string">'xx'</span>, <span class="string">'w'</span>))</span><br><span class="line">config.remove_section(<span class="string">"section1"</span>)              <span class="comment">#移除一个节点</span></span><br><span class="line">config.write(open(<span class="string">'xx'</span>, <span class="string">'w'</span>))</span><br><span class="line">has_opt = config.has_option(<span class="string">'section2'</span>, <span class="string">'k1'</span>)  <span class="comment">#检测指定节点和key是否在config中，同时存在返回True，否则返回False</span></span><br><span class="line">config.remove_option(<span class="string">'section1'</span>, <span class="string">'k1'</span>)         <span class="comment">#删除指定节点下的key及对应的值</span></span><br><span class="line">config.write(open(<span class="string">'xx'</span>, <span class="string">'w'</span>))</span><br><span class="line">config.set(<span class="string">'section1'</span>, <span class="string">'k10'</span>, <span class="string">"123"</span>)           <span class="comment">#新增一个节点，新增对应的key和值</span></span><br><span class="line">config.write(open(<span class="string">'xx'</span>, <span class="string">'w'</span>))</span><br></pre></td></tr></table></figure>
<h3 id="logging"><a href="#logging" class="headerlink" title="logging"></a>logging</h3><p>用于便捷记录日志且线程安全的模块。<br>注：只有【当前写等级】大于【日志等级】时，日志文件才被记录。<br>日志等级:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CRITICAL = <span class="number">50</span></span><br><span class="line">FATAL = CRITICAL</span><br><span class="line">ERROR = <span class="number">40</span></span><br><span class="line">WARNING = <span class="number">30</span></span><br><span class="line">WARN = WARNING</span><br><span class="line">INFO = <span class="number">20</span></span><br><span class="line">DEBUG = <span class="number">10</span></span><br><span class="line">NOTSET = <span class="number">0</span></span><br></pre></td></tr></table></figure></p>
<p>单文件日志记录<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> logging</span><br><span class="line">logging.basicConfig(filename=<span class="string">'log.log'</span>,                                                           <span class="comment">#定义日志的格式，以及写等级</span></span><br><span class="line">                    format=<span class="string">'%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s'</span>,</span><br><span class="line">                    datefmt=<span class="string">'%Y-%m-%d %H:%M:%S %p'</span>,</span><br><span class="line">                    level=<span class="number">10</span>)                                                                     <span class="comment">#level=10也可以换成level=logging.DEBUG</span></span><br><span class="line">  </span><br><span class="line">logging.debug(<span class="string">'debug'</span>)</span><br><span class="line">logging.info(<span class="string">'info'</span>)</span><br><span class="line">logging.warning(<span class="string">'warning'</span>)</span><br><span class="line">logging.error(<span class="string">'error'</span>)</span><br><span class="line">logging.critical(<span class="string">'critical'</span>)</span><br><span class="line">logging.log(<span class="number">10</span>,<span class="string">'debug'</span>)             <span class="comment">#用法和logging.debug一致</span></span><br></pre></td></tr></table></figure></p>
<p>多文件日志记录<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="comment"># 定义文件</span></span><br><span class="line">file_1_1 = logging.FileHandler(<span class="string">'l1_1.log'</span>, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">fmt = logging.Formatter(fmt=<span class="string">"%(asctime)s - %(name)s - %(levelname)s -%(module)s:  %(message)s"</span>)</span><br><span class="line">file_1_1.setFormatter(fmt)</span><br><span class="line">file_1_2 = logging.FileHandler(<span class="string">'l1_2.log'</span>, <span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">fmt = logging.Formatter()</span><br><span class="line">file_1_2.setFormatter(fmt)</span><br><span class="line"><span class="comment"># 定义日志</span></span><br><span class="line">logger1 = logging.Logger(<span class="string">'s2'</span>, level=logging.DEBUG)</span><br><span class="line">logger1.addHandler(file_1_1)</span><br><span class="line">logger1.addHandler(file_1_2)</span><br><span class="line"><span class="comment"># 写日志</span></span><br><span class="line">logger1.critical(<span class="string">'1111'</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="subprocess"><a href="#subprocess" class="headerlink" title="subprocess"></a>subprocess</h3><p>用于执行shell命令<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line">ret1 = subprocess.check_output([<span class="string">"echo"</span>,<span class="string">"lyl"</span>])                <span class="comment">#执行命令不显示结果，如果正确执行 ，则返回执行结果(字节方式)，否则抛异常</span></span><br><span class="line">ret2 = subprocess.call(<span class="string">"echo lyl"</span>)                            <span class="comment">#执行命令并显示结果，如果正确执行 ，则返回0，否则抛异常</span></span><br><span class="line">ret3 = subprocess.check_call(<span class="string">"echo lyl"</span>)                      <span class="comment">#执行命令并显示结果，如果正确执行 ，则返回0，否则抛异常</span></span><br><span class="line">ret4 = subprocess.Popen(<span class="string">"echo lyl"</span>)                           <span class="comment">#执行命令并显示结果，如果正确执行，返回值为Popen对象</span></span><br><span class="line">print(ret1,ret2,ret3,ret4)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入某环境，依赖再输入，如:python</span></span><br><span class="line">obj = subprocess.Popen([<span class="string">"python"</span>], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE, universal_newlines=<span class="keyword">True</span>)</span><br><span class="line">obj.stdin.write(<span class="string">"print(1)\n"</span>)          <span class="comment">#执行的命令</span></span><br><span class="line">obj.stdin.write(<span class="string">"print(2)"</span>)</span><br><span class="line">obj.stdin.close()</span><br><span class="line">cmd_out = obj.stdout.read()            <span class="comment">#输出</span></span><br><span class="line">obj.stdout.close()</span><br><span class="line">cmd_error = obj.stderr.read()          <span class="comment">#错误 </span></span><br><span class="line">obj.stderr.close()                     </span><br><span class="line">print(cmd_out)                         <span class="comment">#输出:1,2 </span></span><br><span class="line">print(cmd_error)                </span><br><span class="line"></span><br><span class="line">out_error_list = obj.communicate()</span><br><span class="line">print(out_error_list)                  <span class="comment">#输出:('1\n2\n', '')</span></span><br><span class="line"></span><br><span class="line">out_error_list = obj.communicate(<span class="string">'print("hello")'</span>)             <span class="comment">#可直接接收命令并输出</span></span><br><span class="line">print(out_error_list)                  <span class="comment">#输出:('hello\n', '')</span></span><br></pre></td></tr></table></figure></p>
<h3 id="shutil"><a href="#shutil" class="headerlink" title="shutil"></a>shutil</h3><p>可进行高级的文件、文件夹、压缩包处理<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">shutil.copyfileobj(open(<span class="string">'old.xml'</span>,<span class="string">'r'</span>), open(<span class="string">'new.xml'</span>, <span class="string">'w'</span>))         <span class="comment">#拷贝文件</span></span><br><span class="line">shutil.copyfile(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)                                   <span class="comment">#拷贝文件</span></span><br><span class="line">shutil.copymode(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)                                   <span class="comment">#仅拷贝权限，内容、组、用户均不变，文件不存在会报错</span></span><br><span class="line">shutil.copystat(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)                                   <span class="comment">#仅拷贝状态的信息，包括：mode bits, atime, mtime, flags,文件不存在会报错</span></span><br><span class="line">shutil.copy(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)                                       <span class="comment">#拷贝文件和权限</span></span><br><span class="line">shutil.copy2(<span class="string">'f1.log'</span>, <span class="string">'f2.log'</span>)                                      <span class="comment">#拷贝文件和状态信息</span></span><br><span class="line">shutil.copytree(<span class="string">"G:\mysite"</span>, <span class="string">"G:\mysite1"</span>,ignore=shutil.ignore_patterns(<span class="string">'*.pyc'</span>, <span class="string">'tmp*'</span>))        <span class="comment">#递归拷贝文件夹，忽略pyc类型的文件和tmp开头的文件</span></span><br><span class="line">shutil.rmtree(<span class="string">"G:\mysite1"</span>)                                           <span class="comment">#递归的删除文件夹 </span></span><br><span class="line">shutil.move(<span class="string">"G:\mysite"</span>, <span class="string">"G:\mysite1"</span>)                                <span class="comment">#递归的去移动文件，它类似mv命令，其实就是重命名</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shutil.make_archive(base_name, format,...)</span></span><br><span class="line"><span class="comment"># 创建压缩包并返回文件路径，例如：zip、tar</span></span><br><span class="line"><span class="comment">#base_name： 压缩包的文件名，也可以是压缩包的路径。只是文件名时，则保存至当前目录，否则保存至指定路径，</span></span><br><span class="line">＃　如：www                        =&gt;保存至当前路径</span><br><span class="line">＃如：/Users/wupeiqi/www =&gt;保存至/Users/wupeiqi/</span><br><span class="line"><span class="comment"># format：	压缩包种类，“zip”, “tar”, “bztar”，“gztar”</span></span><br><span class="line"><span class="comment"># root_dir：	要压缩的文件夹路径（默认当前目录）</span></span><br><span class="line"><span class="comment"># owner：	用户，默认当前用户</span></span><br><span class="line"><span class="comment"># group：	组，默认当前组</span></span><br><span class="line"><span class="comment"># logger：	用于记录日志，通常是logging.Logger对象</span></span><br><span class="line">shutil.make_archive(<span class="string">"G:\\aaaaa"</span>,<span class="string">"zip"</span>,root_dir=<span class="string">"G:\mysite"</span>)           <span class="comment">#将G:\mysite下的文件打包到G:\aaaaa.zip</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># shutil 对压缩包的处理是调用 ZipFile 和 TarFile 两个模块来进行的</span></span><br><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line">z = zipfile.ZipFile(<span class="string">'laxi.zip'</span>, <span class="string">'w'</span>)        <span class="comment">#压缩后的文件为laxi.zip</span></span><br><span class="line">z.write(<span class="string">'log.log'</span>)                          <span class="comment">#往压缩文件添加内容</span></span><br><span class="line">z.write(<span class="string">'xx'</span>)</span><br><span class="line">z.close()</span><br><span class="line">z = zipfile.ZipFile(<span class="string">'laxi.zip'</span>, <span class="string">'a'</span>)        <span class="comment">#以追加的方式打开</span></span><br><span class="line">z.write(<span class="string">'a1.py'</span>)                            <span class="comment">#往压缩文件中追加文件</span></span><br><span class="line">z.close()</span><br><span class="line">z = zipfile.ZipFile(<span class="string">'laxi.zip'</span>, <span class="string">'r'</span>)        <span class="comment">#解压缩</span></span><br><span class="line">z.extractall()                              <span class="comment">#全部解压</span></span><br><span class="line">print(z.namelist())                         <span class="comment">#查看压缩包里的文件</span></span><br><span class="line">z.extract(member=<span class="string">"log.log"</span>)                 <span class="comment">#指定文件解压</span></span><br><span class="line">z.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line">tar = tarfile.open(<span class="string">'your.zip'</span>,<span class="string">'w'</span>)          <span class="comment">#压缩后的文件为you.zip  </span></span><br><span class="line">tar.add(<span class="string">'log.log'</span>, arcname=<span class="string">'new.log'</span>)       <span class="comment">#往压缩文件添加内容并改文件名</span></span><br><span class="line">tar.add(<span class="string">'xx'</span>, arcname=<span class="string">'cmdb.log'</span>)</span><br><span class="line">tar.close()</span><br><span class="line">tar = tarfile.open(<span class="string">'your.zip'</span>,<span class="string">'r'</span>)</span><br><span class="line">print(tar.getnames())                       <span class="comment">#查看压缩包里的文件</span></span><br><span class="line">tar.extractall()                            <span class="comment">#全部解压</span></span><br><span class="line">tar.extract(member=<span class="string">"new.log"</span>)              </span><br><span class="line">tar.close()</span><br></pre></td></tr></table></figure></p>
<h3 id="paramiko"><a href="#paramiko" class="headerlink" title="paramiko"></a>paramiko</h3><p>paramiko是一个用于做远程控制的模块，使用该模块可以对远程服务器进行命令或文件操作<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> paramiko</span><br><span class="line">ssh = paramiko.SSHClient()</span><br><span class="line">ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</span><br><span class="line">ssh.connect(<span class="string">'192.168.1.2'</span>, <span class="number">22</span>, <span class="string">'root'</span>, <span class="string">'rootadmin'</span>)                 <span class="comment">#使用用户名和密码远程执行命令</span></span><br><span class="line"><span class="comment"># private_key_path = '/home/auto/.ssh/id_rsa'                       #密钥认证来远程执行</span></span><br><span class="line"><span class="comment"># key = paramiko.RSAKey.from_private_key_file(private_key_path)</span></span><br><span class="line"><span class="comment"># ssh.connect('192.168.1.2', 22, 'root', key)</span></span><br><span class="line">stdin, stdout, stderr = ssh.exec_command(<span class="string">'df -h'</span>)</span><br><span class="line"><span class="keyword">print</span> (stdout.read())</span><br><span class="line">ssh.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os,sys,paramiko</span><br><span class="line">t = paramiko.Transport((<span class="string">"192.168.229.70"</span>,<span class="number">22</span>))</span><br><span class="line">t.connect(username=<span class="string">"root"</span>,password=<span class="string">"rootadmin"</span>)</span><br><span class="line"><span class="comment"># pravie_key_path = '/home/auto/.ssh/id_rsa'                       #密钥认证</span></span><br><span class="line"><span class="comment"># key = paramiko.RSAKey.from_private_key_file(pravie_key_path)</span></span><br><span class="line"><span class="comment"># t.connect(username='root',pkey=key)</span></span><br><span class="line">sftp = paramiko.SFTPClient.from_transport(t)</span><br><span class="line">sftp.put(<span class="string">"a1.py"</span>,<span class="string">"/tmp/test.py"</span>)                                   <span class="comment">#服务器上传文件</span></span><br><span class="line">sftp.get(<span class="string">"/mancenter-3.9.3.war"</span>,<span class="string">"G:\\mancenter.war"</span>)               <span class="comment">#服务器下载文件</span></span><br><span class="line">t.close()</span><br></pre></td></tr></table></figure></p>
<h3 id="模块拾遗"><a href="#模块拾遗" class="headerlink" title="模块拾遗"></a>模块拾遗</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line">print(vars())      <span class="comment">#python自带的全局变量</span></span><br><span class="line">print(__doc__)     <span class="comment">#py文件的注释</span></span><br><span class="line">print(__package__) <span class="comment">#指定文件所在的包，用.分割，当前文件返回None</span></span><br><span class="line">print(__loader__)</span><br><span class="line">print(__file__)    <span class="comment">#当前文件路径</span></span><br><span class="line">print(__name__)    <span class="comment">#如果是主文件,在当前文件执行而不是调用，__name__ == "__main__"，否则等于模块名</span></span><br><span class="line">print(__cached__)  <span class="comment">#其他文件的缓存值，当前为None</span></span><br><span class="line">print(__builtins__)  <span class="comment">#内置函数在这里面</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">"执行了"</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:     <span class="comment">#调用主文件前，必须加这个条件，只有当执行自身的文件才会执行f1()，被导入不执行f1()</span></span><br><span class="line">    f1()</span><br></pre></td></tr></table></figure>
<h3 id="os-path添加路径到sys-path"><a href="#os-path添加路径到sys-path" class="headerlink" title="os.path添加路径到sys.path"></a>os.path添加路径到sys.path</h3><p>(1)丶当前文件路径为0410\s2.py，想添加0410\li路径，添加路径后直接导入li下的s1.py文件<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os,sys</span><br><span class="line">temp1 = os.path.dirname(__file__)     <span class="comment">#当前文件路径</span></span><br><span class="line">temp2 = <span class="string">"li"</span></span><br><span class="line">temp = os.path.join(temp1,temp2)      <span class="comment">#路径拼接</span></span><br><span class="line">sys.path.append(temp)                 <span class="comment">#路径添加到sys.path</span></span><br><span class="line"><span class="keyword">import</span> s1</span><br></pre></td></tr></table></figure></p>
<h2 id="字符串格式化"><a href="#字符串格式化" class="headerlink" title="字符串格式化"></a>字符串格式化</h2><h3 id="百分号方式"><a href="#百分号方式" class="headerlink" title="百分号方式"></a>百分号方式</h3><p>%[(name)][flags][width].[precision]typecode<br>(1)丶(name)      可选，用于选择指定的key<br>(2)丶flags       可选，可供选择的值有:</p>
<ul>
<li>右对齐；正数前加正好，负数前加负号；</li>
</ul>
<ul>
<li>左对齐；正数前无符号，负数前加负号；<br>空格     右对齐；正数前加空格，负数前加负号；<br>0        右对齐；正数前无符号，负数前加负号；如果是数字的话用0填充空白处<br>(3)丶width       可选，占有宽度<br>(4)丶.precision  可选，小数点后保留的位数<br>(5)丶typecode    必选，可供选择的值有:<br>s，获取传入对象的<strong>str</strong>方法的返回值，并将其格式化到指定位置<br>r，获取传入对象的<strong>repr</strong>方法的返回值，并将其格式化到指定位置<br>c，整数：将数字转换成其unicode对应的值，10进制范围为 0 &lt;= i &lt;= 1114111（py27则只支持0-255）；字符：将字符添加到指定位置<br>o，将整数转换成 八  进制表示，并将其格式化到指定位置<br>x，将整数转换成十六进制表示，并将其格式化到指定位置<br>d，将整数、浮点数转换成 十 进制表示，并将其格式化到指定位置<br>e，将整数、浮点数转换成科学计数法，并将其格式化到指定位置（小写e）<br>E，将整数、浮点数转换成科学计数法，并将其格式化到指定位置（大写E）<br>f， 将整数、浮点数转换成浮点数表示，并将其格式化到指定位置（默认保留小数点后6位）<br>F，同上<br>g，自动调整将整数、浮点数转换成 浮点型或科学计数法表示（超过6位数用科学计数法），并将其格式化到指定位置（如果是科学计数则是e；）<br>G，自动调整将整数、浮点数转换成 浮点型或科学计数法表示（超过6位数用科学计数法），并将其格式化到指定位置（如果是科学计数则是E；）<br>%，当字符串中存在格式化标志时，需要用 %%表示一个百分号</li>
</ul>
<p>注：Python中百分号格式化是不存在自动将整数转换成二进制表示的方式<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"i am %s"</span> % <span class="string">"SubHyCan"</span>)</span><br><span class="line">print(<span class="string">"i am %s age %d"</span> % (<span class="string">"SubHyCan"</span>, <span class="number">24</span>))</span><br><span class="line">print(<span class="string">"i am %(name)s age %(age)d"</span> % &#123;<span class="string">"name"</span>: <span class="string">"SubHyCan"</span>, <span class="string">"age"</span>: <span class="number">18</span>&#125;)</span><br><span class="line">print(<span class="string">"percent %.2f"</span> % <span class="number">99.97623</span>)</span><br><span class="line">print(<span class="string">"i am %(pp).2f"</span> % &#123;<span class="string">"pp"</span>: <span class="number">123.425556</span>, &#125;)</span><br><span class="line">print(<span class="string">"i am %(pp).2f%%"</span> % &#123;<span class="string">"pp"</span>: <span class="number">99.425556</span>, &#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="format方式"><a href="#format方式" class="headerlink" title="format方式"></a>format方式</h3><p>[[fill]align][sign][#][0][width][,][.precision][type]<br>(1)丶fill           可选，空白处填充的字符<br>(2)丶align          可选，对齐方式（需配合width使用）<br>    &lt;，内容左对齐<br>    &gt;，内容右对齐(默认)<br>    ＝，内容右对齐，将符号放置在填充字符的左侧，且只对数字类型有效。 即使：符号+填充物+数字<br>    ^，内容居中<br>(3)丶sign           可选，有无符号数字<br>    +，正号加正，负号加负；<br>    -，正号不变，负号加负；<br>    空格 ，正号空格，负号加负；<br>(4)丶#              可选，对于二进制、八进制、十六进制，如果加上#，会显示 0b/0o/0x，否则不显示<br>(5)丶，             可选，为数字添加分隔符，如：1,000,000<br>(6)丶width          可选，格式化位所占宽度<br>(7)丶.precision     可选，小数位保留精度<br>(8)丶type           可选，格式化类型<br>    传入” 字符串类型 “的参数<br>        s，格式化字符串类型数据<br>        空白，未指定类型，则默认是None，同s<br>    传入“ 整数类型 ”的参数<br>        b，将10进制整数自动转换成2进制表示然后格式化<br>        c，将10进制整数自动转换为其对应的unicode字符<br>        d，十进制整数<br>        o，将10进制整数自动转换成8进制表示然后格式化；<br>        x，将10进制整数自动转换成16进制表示然后格式化（小写x）<br>        X，将10进制整数自动转换成16进制表示然后格式化（大写X）<br>    传入“ 浮点型或小数类型 ”的参数<br>        e， 转换为科学计数法（小写e）表示，然后格式化；<br>        E， 转换为科学计数法（大写E）表示，然后格式化;<br>        f ， 转换为浮点型（默认小数点后保留6位）表示，然后格式化；<br>        F， 转换为浮点型（默认小数点后保留6位）表示，然后格式化；<br>        g， 自动在e和f中切换<br>        G， 自动在E和F中切换<br>        %，显示百分比（默认显示小数点后6位）<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"i am &#123;&#125;, age &#123;&#125;, &#123;&#125;"</span>.format(<span class="string">"seven"</span>, <span class="number">24</span>, <span class="string">'SubHyCan'</span>)) </span><br><span class="line">print(<span class="string">"i am &#123;&#125;, age &#123;&#125;, &#123;&#125;"</span>.format(*[<span class="string">"seven"</span>, <span class="number">24</span>, <span class="string">'SubHyCan'</span>]))  </span><br><span class="line">print(<span class="string">"i am &#123;0&#125;, age &#123;1&#125;, really &#123;0&#125;"</span>.format(<span class="string">"seven"</span>, <span class="number">18</span>)) </span><br><span class="line">print(<span class="string">"i am &#123;0&#125;, age &#123;1&#125;, really &#123;0&#125;"</span>.format(*[<span class="string">"seven"</span>, <span class="number">18</span>])) </span><br><span class="line">print(<span class="string">"i am &#123;name&#125;, age &#123;age&#125;, really &#123;name&#125;"</span>.format(name=<span class="string">"seven"</span>, age=<span class="number">18</span>))  </span><br><span class="line">print(<span class="string">"i am &#123;name&#125;, age &#123;age&#125;, really &#123;name&#125;"</span>.format(**&#123;<span class="string">"name"</span>: <span class="string">"seven"</span>, <span class="string">"age"</span>: <span class="number">18</span>&#125;)) </span><br><span class="line">print(<span class="string">"i am &#123;0[0]&#125;, age &#123;0[1]&#125;, really &#123;0[2]&#125;"</span>.format([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>])) </span><br><span class="line">print(<span class="string">"i am &#123;:s&#125;, age &#123;:d&#125;, money &#123;:f&#125;"</span>.format(<span class="string">"seven"</span>, <span class="number">18</span>, <span class="number">88888.1</span>))  </span><br><span class="line">print(<span class="string">"i am &#123;:s&#125;, age &#123;:d&#125;"</span>.format(*[<span class="string">"seven"</span>, <span class="number">18</span>])) </span><br><span class="line">print(<span class="string">"i am &#123;name:s&#125;, age &#123;age:d&#125;"</span>.format(name=<span class="string">"seven"</span>, age=<span class="number">18</span>))</span><br><span class="line">print(<span class="string">"i am &#123;name:s&#125;, age &#123;age:d&#125;"</span>.format(**&#123;<span class="string">"name"</span>: <span class="string">"seven"</span>, <span class="string">"age"</span>: <span class="number">18</span>&#125;))</span><br><span class="line">print(<span class="string">"numbers: &#123;:b&#125;,&#123;:o&#125;,&#123;:d&#125;,&#123;:x&#125;,&#123;:X&#125;, &#123;:%&#125;"</span>.format(<span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15.87623</span>, <span class="number">2</span>))</span><br><span class="line">print(<span class="string">"numbers: &#123;:b&#125;,&#123;:o&#125;,&#123;:d&#125;,&#123;:x&#125;,&#123;:X&#125;, &#123;:%&#125;"</span>.format(<span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15</span>, <span class="number">15.87623</span>, <span class="number">2</span>))</span><br><span class="line">print(<span class="string">"numbers: &#123;0:b&#125;,&#123;0:o&#125;,&#123;0:d&#125;,&#123;0:x&#125;,&#123;0:X&#125;, &#123;0:%&#125;"</span>.format(<span class="number">15</span>))</span><br><span class="line">print(<span class="string">"numbers: &#123;num:b&#125;,&#123;num:o&#125;,&#123;num:d&#125;,&#123;num:x&#125;,&#123;num:X&#125;, &#123;num:%&#125;"</span>.format(num=<span class="number">15</span>))</span><br><span class="line">```		</span><br><span class="line"></span><br><span class="line"><span class="comment">## 面向对象</span></span><br><span class="line">三种编程方式为:面向过程编程，函数式编程，面向对象编程</span><br><span class="line">面向对象三大特性:封装，继承，多态</span><br><span class="line">``` python</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span><span class="params">()</span>:</span>                               <span class="comment">#Foo后的()可省略</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(self)</span>:</span></span><br><span class="line">		print(self)                        <span class="comment">#self是python内部默认的参数，指向引用类的对象或实例</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">(self,arg2)</span>:</span></span><br><span class="line">		print(self,arg)</span><br><span class="line">obj = Foo()                                <span class="comment">#通过类对象指针，创建一个引用类Foo的对象或实例</span></span><br><span class="line">print(obj)                                 <span class="comment">#和类中print(self)的值是一样的</span></span><br><span class="line">obj.f1()</span><br><span class="line">obj.f2(<span class="string">"shuaiguo"</span>)		</span><br><span class="line"></span><br><span class="line"><span class="comment">### 封装</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo1</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span>        <span class="comment">#封装,__init__构造方法，在遇到将类指向一个对象或实例时，会初始化执行        </span></span><br><span class="line">        self.name = <span class="string">"lyl"</span></span><br><span class="line">        self.age = <span class="number">18</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">print</span> (self.name,self.age)</span><br><span class="line">obj1 = Foo1()</span><br><span class="line">obj1.detail()</span><br><span class="line"><span class="keyword">print</span> (obj1.name,obj1.age)                <span class="comment">#直接调用obj1对象的name属性和age属性</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo2</span><span class="params">(Foo1)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age)</span>:</span>        <span class="comment">#封装，子类Foo2和父类Foo1都封装了__init__方法，则子类会覆盖父类的方法</span></span><br><span class="line">		super().__init__()                <span class="comment">#使用super函数可直接调用父类与子类相同的方法</span></span><br><span class="line">        self.xinbie = name</span><br><span class="line">        self.xinzuo = age</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (self.xinbie,self.xinzuo)   </span><br><span class="line">obj1 = Foo2(<span class="string">'男'</span>, <span class="string">"射手"</span>)</span><br><span class="line">obj1.detail()          <span class="comment">#Python默认会将obj1传给self参数，即：obj1.detail(obj1)，所以，此时方法内部的 self ＝ obj1，即：self.name 是 lyl ；self.age 是 18</span></span><br><span class="line"><span class="keyword">print</span> (obj1.name,obj1.age)</span><br></pre></td></tr></table></figure></p>
<h4 id="游戏人生"><a href="#游戏人生" class="headerlink" title="游戏人生"></a>游戏人生</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, na, gen, age, fig)</span>:</span></span><br><span class="line">        self.name = na</span><br><span class="line">        self.gender = gen</span><br><span class="line">        self.age = age</span><br><span class="line">        self.fight =fig</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">grassland</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""注释：草丛战斗，消耗200战斗力"""</span></span><br><span class="line">        self.fight = self.fight - <span class="number">200</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">practice</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""注释：自我修炼，增长100战斗力"""</span></span><br><span class="line">        self.fight = self.fight + <span class="number">200</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">incest</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""注释：多人游戏，消耗500战斗力"""</span></span><br><span class="line">        self.fight = self.fight - <span class="number">500</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""注释：当前对象的详细情况"""</span></span><br><span class="line">        temp = <span class="string">"姓名:%s ; 性别:%s ; 年龄:%s ; 战斗力:%s"</span>  % (self.name, self.gender, self.age, self.fight)</span><br><span class="line">        <span class="keyword">print</span> (temp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># #####################  开始游戏  #####################</span></span><br><span class="line">cang = Person(<span class="string">'苍'</span>, <span class="string">'女'</span>, <span class="number">18</span>, <span class="number">1000</span>)    <span class="comment">#创建苍角色</span></span><br><span class="line">dong = Person(<span class="string">'木木'</span>, <span class="string">'男'</span>, <span class="number">20</span>, <span class="number">1800</span>)  <span class="comment">#创建木木角色</span></span><br><span class="line">bo = Person(<span class="string">'多多'</span>, <span class="string">'女'</span>, <span class="number">19</span>, <span class="number">2500</span>)    <span class="comment">#创建多多角色</span></span><br><span class="line"></span><br><span class="line">cang.incest() <span class="comment">#苍参加一次多人游戏</span></span><br><span class="line">dong.practice()<span class="comment">#木木自我修炼了一次</span></span><br><span class="line">bo.grassland() <span class="comment">#多多参加一次草丛战斗</span></span><br><span class="line"><span class="comment">#输出当前所有人的详细情况</span></span><br><span class="line">cang.detail()</span><br><span class="line">dong.detail()</span><br><span class="line">bo.detail()</span><br></pre></td></tr></table></figure>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>父类和子类，父类也称为基类，子类也称为派生类，派生类会继承基类的对象，python的类可继承多个类，Java和C#中则只能继承一个类<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'D.bar'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(D)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'C.bar'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(D)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'B.bar'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(B, C)</span>:</span>                                <span class="comment">#多类继承，A有多个基类，继承优先级B优于C</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'A.bar'</span>)</span><br><span class="line"></span><br><span class="line">a = A()</span><br><span class="line"><span class="comment"># 执行bar方法时</span></span><br><span class="line"><span class="comment"># 首先去A类中查找，如果A类中没有，则继续去B类中找，如果B类中么有，则继续去C类中找，如果C类中么有，则继续去D类中找，如果还是未找到，则报错</span></span><br><span class="line"><span class="comment"># 所以，查找顺序：A --&gt; B --&gt; C --&gt; D</span></span><br><span class="line"><span class="comment"># 在上述查找bar方法的过程中，一旦找到，则寻找过程立即中断，便不会再继续找了</span></span><br><span class="line">a.bar()</span><br></pre></td></tr></table></figure></p>
<h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><p>Pyhon不支持Java和C#这一类强类型语言中多态的写法，但是原生支持多态，其Python崇尚”鸭子类型”;python”鸭子类型”如下所示:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">F1</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">S1</span><span class="params">(F1)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'S1.show'</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">S2</span><span class="params">(F1)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">'S2.show'</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Func</span><span class="params">(obj)</span>:</span>                             <span class="comment">#def Func(F1 obj):      伪代码实现java和C#的多态</span></span><br><span class="line">    <span class="keyword">print</span> obj.show()                       <span class="comment">#	print obj.show() 	  </span></span><br><span class="line">s1_obj = S1()</span><br><span class="line">Func(s1_obj) </span><br><span class="line"></span><br><span class="line">s2_obj = S2()</span><br><span class="line">Func(s2_obj)</span><br></pre></td></tr></table></figure></p>
<h3 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h3><p>python中的反射功能是由以下四个内置函数提供：hasattr、getattr、setattr、delattr，该四个函数分别用于对对象内部执行：<br>检查是否含有某成员、获取成员、设置成员、删除成员，通过字符串的形式操作对象相关的成员。<br>反射是通过字符串的形式操作对象相关的成员，一切事物都是对象<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line">inp = input(<span class="string">"请输入url(以模块名/对象的格式):"</span>)           </span><br><span class="line">mode,obejects = inp.split(<span class="string">"/"</span>)</span><br><span class="line">dd = __import__(<span class="string">"lib."</span> + mode, fromlist=<span class="keyword">True</span>)      <span class="comment">#以字符串的方式导入模块，假设输入的模块都在lib下，模块都存在</span></span><br><span class="line"><span class="keyword">if</span> hasattr(dd,obejects):                           <span class="comment">#判断用户输入的对象是否在模块中，如果存在，则返回设定的值或者url  </span></span><br><span class="line">    ret= getattr(dd,obejects,)()                  </span><br><span class="line">    print(ret)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"404"</span>)                                   <span class="comment">#对象不存在，报404</span></span><br><span class="line">print(hasattr(dd,<span class="string">"f1"</span>))                            <span class="comment">#False</span></span><br><span class="line">temp = setattr(dd,<span class="string">"f1"</span>,<span class="string">"lyl"</span>)                      <span class="comment">#往内存中写入对象</span></span><br><span class="line">print(hasattr(dd,<span class="string">"f1"</span>))                            <span class="comment">#True </span></span><br><span class="line">delattr(dd,<span class="string">"f1"</span>)                                   <span class="comment">#在内存中删除对象  </span></span><br><span class="line">print(hasattr(dd,<span class="string">"f1"</span>))                            <span class="comment">#False</span></span><br></pre></td></tr></table></figure></p>
<h3 id="类成员"><a href="#类成员" class="headerlink" title="类成员"></a>类成员</h3><p>类成员分为三大类，分别为:<br>字段(普通字段，静态字段)<br>方法(普通方法，静态方法，类方法)<br>属性，也可称为特性(普通属性，也可称为普通特性);可通过@property装饰器或者静态字段方式创建</p>
<p>通过类来访问:静态字段，静态方法<br>通过对象来访问:普通字段，普通方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">F1</span>:</span></span><br><span class="line">	country = <span class="string">"静态字段"</span>                    <span class="comment">#静态字段，在内存中只保存一份，如果每个对象相同的字段，就使用它</span></span><br><span class="line"> 	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">		self.name = name                    <span class="comment">#普通字段</span></span><br><span class="line">		self.original_price = <span class="number">100</span></span><br><span class="line">		</span><br><span class="line"><span class="meta">	@classmethod                            #定义一个类方法，此方法可通过类或者对象类访问</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">(cls)</span>:</span>                            <span class="comment">#cls表示这个类方法属于的类F1</span></span><br><span class="line">        print(<span class="string">"类方法"</span>)</span><br><span class="line">        print(cls)</span><br><span class="line">		     </span><br><span class="line"><span class="meta">    @staticmethod                          #定义一个静态方法，此方法类似于在类中定义了一个普通函数，此方法可通过类或对象来访问</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">f2</span><span class="params">()</span>:</span></span><br><span class="line">        print(<span class="string">"静态方法"</span>)	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">PT</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="keyword">return</span> <span class="string">"普通方法"</span></span><br><span class="line">		</span><br><span class="line"><span class="meta">	@property                               #在普通方法的基础上添加@property装饰器，特性其实就是将普通方法伪装成字段来访问获取</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span>	<span class="title">price</span><span class="params">(self)</span>:</span>                        <span class="comment">#静态字段方式实现:如可新建三个对应函数get_price, set_price, del_price，通过PRICE = property(get_price, set_price, del_price, '价格属性描述...')来创建</span></span><br><span class="line">		print(<span class="string">"特性"</span>)              </span><br><span class="line">		<span class="keyword">return</span> self.original_price</span><br><span class="line">	</span><br><span class="line"><span class="meta">	@price.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self, value)</span>:</span>                <span class="comment">#特性的访问特性，传参，可修改特性 </span></span><br><span class="line">        self.original_price = value</span><br><span class="line">		</span><br><span class="line"><span class="meta">    @price.deleter                         #特性的访问特性，可删除特性 </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">price</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">del</span> self.original_price	</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">obj = F1(<span class="string">"普通字段"</span>)</span><br><span class="line"><span class="keyword">print</span> (obj.name)                           <span class="comment">#通过对象访问普通字段		</span></span><br><span class="line"><span class="keyword">print</span> (obj.price)                          <span class="comment">#通过对象访问特性</span></span><br><span class="line"><span class="keyword">print</span> (obj.PT())                           <span class="comment">#通过对象访问普通方法</span></span><br><span class="line">obj.price = <span class="number">200</span></span><br><span class="line"><span class="keyword">print</span> (obj.price)                          <span class="comment">#修改</span></span><br><span class="line"><span class="keyword">del</span> obj.price                              <span class="comment">#删除</span></span><br><span class="line"><span class="keyword">print</span> (F1.country)                         <span class="comment">#通过类访问静态字段</span></span><br></pre></td></tr></table></figure>
<h4 id="类成员修饰符"><a href="#类成员修饰符" class="headerlink" title="类成员修饰符"></a>类成员修饰符</h4><p>公有和私有，私有成员命名时，前两个字符是下划线。(特殊成员除外，例如：<strong>init</strong>、<strong>call</strong>、<strong>dict</strong>等）<br>公有成员:对象可以访问；类内部可以访问；派生类中可以访问<br>私有成员:仅类内部可以访问；外部访问可通过公有成员曲线来访问;强制访问可通过(对象._类名__私有字段)来访问，但是不建议使用<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.name = <span class="string">'公有字段'</span></span><br><span class="line">        self.__foo = <span class="string">"私有字段"</span></span><br><span class="line">		</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">F1</span><span class="params">(self)</span>:</span></span><br><span class="line">        ret = self.__foo</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">		</span><br><span class="line">obj = C()</span><br><span class="line">print(obj.__foo)                   <span class="comment">#无法访问，执行报错</span></span><br><span class="line">print(obj.F1())                    <span class="comment">#通过F1来访问，找关系</span></span><br></pre></td></tr></table></figure></p>
<h4 id="类的特殊成员"><a href="#类的特殊成员" class="headerlink" title="类的特殊成员"></a>类的特殊成员</h4><p>1.<strong>doc</strong>，表示类的描述信息<br>2.<strong>module</strong>和<strong>class</strong>，表示当前操作的对象在那个模块和当前操作的对象的类是什么<br>3.<strong>init</strong>，构造方法，通过类创建对象时，自动触发执行<br>4.<strong>del</strong>，析构方法，当对象在内存中被释放时(比如内存辣鸡回收)，自动触发执行<br>注:此方法一般无须定义，因为Python是一门高级语言，程序员在使用时无需关心内存的分配和释放，因为此工作都是交给Python解释器来执行，所以，析构函数的调用是由解释器在进行垃圾回收时自动触发执行的。<br>5.<strong>call</strong>，对象后面加括号，触发执行，即对象()或者类()()，执行类中的<strong>call</strong>方法<br>6.<strong>dict</strong>，类或对象中的所有成员，类的普通字段属于对象；类中的静态字段和方法等属于类<br>7.<strong>str</strong>，如果一个类中定义了<strong>str</strong>方法，那么在打印 对象 时，默认输出该方法的返回值<br>8.<strong>getitem</strong>、<strong>setitem</strong>、<strong>delitem</strong>,用于索引操作，如字典。以上分别表示获取、设置、删除数据<br>9.<strong>getslice</strong>、<strong>setslice</strong>、<strong>delslice</strong>，该三个方法用于分片操作，如：列表<br>10.<strong>iter</strong>，用于迭代器，之所以列表、字典、元组可以进行for循环，是因为类型内部定义了 <strong>iter</strong><br>11.<strong>new</strong> 和 <strong>metaclass</strong>;obj对象是C类的一个实例，C类对象是 type类的一个实例，即：C类对象是通过type类的构造方法创建，类其实也是对象<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(object)</span>:</span>                            <span class="comment">#object是一切类的基类</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    这是一个类</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,sq)</span>:</span></span><br><span class="line">        self.name = <span class="string">'lyl'</span></span><br><span class="line">		self.sq = sq</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"call"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"lyl"</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__getitem__"</span>,key)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setitem__</span><span class="params">(self, key, value)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__setitem__"</span>,key,value)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delitem__</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__delitem__"</span>,key)	</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__getslice__</span><span class="params">(self, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__getslice__"</span>,i,j)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__setslice__</span><span class="params">(self, i, j, sequence)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__setslice__"</span>,i,j)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__delslice__</span><span class="params">(self, i, j)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> (<span class="string">"__delslice__"</span>,i,j)	</span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__iter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> iter(self.sq)	</span><br><span class="line">obj = C([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line">print(obj.__doc__)                        <span class="comment">#输出描述信息:这是一个类</span></span><br><span class="line">print(obj.__module__)                  </span><br><span class="line">print(obj.__class__)                      <span class="comment">#输出当前对象操作的类</span></span><br><span class="line">print(obj())                              <span class="comment">#因为定义了__call_，所以输出为:call </span></span><br><span class="line">print(C.__dict__,obj.__dict__)            <span class="comment">#输出类中的所有成员，输出对象中的所有成员  </span></span><br><span class="line">print(obj)                                <span class="comment">#因为定义了__str__，输出为:lyl，无对应则返回一个对象 </span></span><br><span class="line">result = obj[<span class="string">'k1'</span>]                        <span class="comment">#自动触发执行 __getitem__，输出:__getitem__ k1</span></span><br><span class="line">obj[<span class="string">'k2'</span>] = <span class="string">'wupeiqi'</span>                     <span class="comment">#自动触发执行 __setitem__，输出:__setitem__ k2 wupeiqi</span></span><br><span class="line"><span class="keyword">del</span> obj[<span class="string">'k1'</span>]                             <span class="comment">#自动触发执行 __delitem__，输出:__delitem__ k1</span></span><br><span class="line">obj[<span class="number">-1</span>:<span class="number">1</span>]                                 <span class="comment">#自动触发执行 __getslice__，输出:__getitem__ slice(-1, 1, None)</span></span><br><span class="line">obj[<span class="number">0</span>:<span class="number">1</span>] = [<span class="number">11</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">44</span>]                  <span class="comment">#自动触发执行 __setslice__，输出:__setitem__ slice(0, 1, None) [11, 22, 33, 44]</span></span><br><span class="line"><span class="keyword">del</span> obj[<span class="number">0</span>:<span class="number">2</span>]                              <span class="comment">#自动触发执行 __delslice__，输出:__delitem__ slice(0, 2, None)</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> obj:</span><br><span class="line">    <span class="keyword">print</span> (i)                             <span class="comment">#输出1,2,3,4，如果没有指定__iter__，则会无限循环下去</span></span><br><span class="line">		</span><br><span class="line">obj = iter([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])                     <span class="comment">#以上步骤可以看出，for循环迭代的其实是  iter([1,2,3,4]),所以执行流程可以变更为这个</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> obj:</span><br><span class="line">    <span class="keyword">print</span> (i)</span><br></pre></td></tr></table></figure></p>
<p>类创建的两种方式:<br>一丶普通方法<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"nihao"</span>)</span><br></pre></td></tr></table></figure></p>
<p>二丶特殊方式(type类的构造函数)<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(self)</span>:</span></span><br><span class="line">    print(<span class="string">"nihao"</span>) </span><br><span class="line">Foo = type(<span class="string">'Foo'</span>,(object,), &#123;<span class="string">'func'</span>: func&#125;)  <span class="comment">#type第一个参数：类名;第二个参数：当前类的基类;第三个参数：类的成员,可以为一个lamba表达式</span></span><br></pre></td></tr></table></figure></p>
<h4 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h4><p>常用的异常:<br>AttributeError 试图访问一个对象没有的树形，比如foo.x，但是foo没有属性x<br>IOError 输入/输出异常；基本上是无法打开文件<br>ImportError 无法引入模块或包；基本上是路径问题或名称错误<br>IndentationError 语法错误（的子类） ；代码没有正确对齐<br>IndexError 下标索引超出序列边界，比如当x只有三个元素，却试图访问x[5]<br>KeyError 试图访问字典里不存在的键<br>KeyboardInterrupt Ctrl+C被按下<br>NameError 使用一个还未被赋予对象的变量<br>SyntaxError Python代码非法，代码不能编译(个人认为这是语法错误，写错了）<br>TypeError 传入对象类型与要求的不符合<br>UnboundLocalError 试图访问一个还未被设置的局部变量，基本上是由于另有一个同名的全局变量，<br>导致你以为正在访问它<br>ValueError 传入一个调用者不期望的值，即使值的类型是正确的</p>
<p>常用的异常处理框架:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    a = <span class="number">1</span> + <span class="string">"lyl"</span>          <span class="comment">#主代码块</span></span><br><span class="line"><span class="keyword">except</span> IndexError <span class="keyword">as</span> e:    <span class="comment">#如果异常类型为IndexError，则执行该块，可定义多个异常处理 </span></span><br><span class="line">    print(e)               <span class="comment">#异常时，执行该块，输出为异常信息</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:     <span class="comment">#万能的异常处理，所有异常都能匹配</span></span><br><span class="line">    print(e)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">pass</span>                   <span class="comment">#主代码块执行完，执行该块</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="keyword">pass</span>                   <span class="comment">#无论异常与否，最终执行该块</span></span><br></pre></td></tr></table></figure></p>
<p>主动触法异常:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">'错误了。。。'</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">print</span> (e)                 <span class="comment">#输出为:错误了。。。</span></span><br></pre></td></tr></table></figure></p>
<p>自定义异常:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span><span class="params">(Exception)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, msg)</span>:</span></span><br><span class="line">        self.message = msg</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.message</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">raise</span> MyException(<span class="string">'我的异常'</span>)</span><br><span class="line"><span class="keyword">except</span> MyException <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">print</span> (e)                <span class="comment">#输出为:我的异常</span></span><br></pre></td></tr></table></figure></p>
<h4 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h4><p>1丶单例模式，即只有一个实例<br>2丶静态方法+静态字段<br>3丶所有的实例中封装的内容相同时，用单例模式，多个实例会浪费内存<br>4丶单利模式存在的目的是保证当前内存中仅存在单个实例，避免内存浪费<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> wsgiref.simple_server <span class="keyword">import</span> make_server</span><br><span class="line"><span class="comment"># ########### 单例类定义 ###########</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DbHelper</span><span class="params">(object)</span>:</span></span><br><span class="line">    __instance = <span class="keyword">None</span>                   </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.hostname = <span class="string">'1.1.1.1'</span></span><br><span class="line">        self.port = <span class="number">3306</span></span><br><span class="line">        self.password = <span class="string">'pwd'</span></span><br><span class="line">        self.username = <span class="string">'root'</span></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">singleton</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">if</span> DbHelper.__instance:</span><br><span class="line">            <span class="keyword">return</span> DbHelper.__instance</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            DbHelper.__instance = DbHelper()</span><br><span class="line">            <span class="keyword">return</span> DbHelper.__instance</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fetch</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 连接数据库</span></span><br><span class="line">        <span class="comment"># 拼接sql语句</span></span><br><span class="line">        <span class="comment"># 操作</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 连接数据库</span></span><br><span class="line">        <span class="comment"># 拼接sql语句</span></span><br><span class="line">        <span class="comment"># 操作</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">remove</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 连接数据库</span></span><br><span class="line">        <span class="comment"># 拼接sql语句</span></span><br><span class="line">        <span class="comment"># 操作</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">modify</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># 连接数据库</span></span><br><span class="line">        <span class="comment"># 拼接sql语句</span></span><br><span class="line">        <span class="comment"># 操作</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Handler</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(self)</span>:</span></span><br><span class="line">        obj = DbHelper.singleton()                 <span class="comment">#对于Python单例模式，创建对象时不能再直接使用：obj = Foo()，而应该调用特殊的方法：obj = Foo.singleton()</span></span><br><span class="line">        <span class="keyword">print</span> id(obj)</span><br><span class="line">        obj.create()</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'index'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">news</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'news'</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">RunServer</span><span class="params">(environ, start_response)</span>:</span></span><br><span class="line">    start_response(<span class="string">'200 OK'</span>, [(<span class="string">'Content-Type'</span>, <span class="string">'text/html'</span>)])</span><br><span class="line">    url = environ[<span class="string">'PATH_INFO'</span>]</span><br><span class="line">    temp = url.split(<span class="string">'/'</span>)[<span class="number">1</span>]</span><br><span class="line">    obj = Handler()</span><br><span class="line">    is_exist = hasattr(obj, temp)</span><br><span class="line">    <span class="keyword">if</span> is_exist:</span><br><span class="line">        func = getattr(obj, temp)</span><br><span class="line">        ret = func()</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'404 not found'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    httpd = make_server(<span class="string">''</span>, <span class="number">8002</span>, RunServer)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Serving HTTP on port 8001..."</span></span><br><span class="line">    httpd.serve_forever()</span><br></pre></td></tr></table></figure></p>
<h2 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h2><p>socket通常也称作”套接字”，用于描述IP地址和端口，是一个通信链的句柄，应用程序通常通过”套接字”向网络发出请求或者应答网络请求。<br>socket起源于Unix，而Unix/Linux基本哲学之一就是“一切皆文件”，对于文件用【打开】【读写】【关闭】模式来操作。socket就是该模式的一个实现，socket即是一种特殊的文件，一些socket函数就是对其进行的操作（读/写IO、打开、关闭）</p>
<p>socket和file的区别：<br>file模块是针对某个指定文件进行【打开】【读写】【关闭】<br>socket模块是针对 服务器端 和 客户端Socket 进行【打开】【读写】【关闭】</p>
<p><code>sk = socket.socket(socket.AF_INET,socket.SOCK_STREAM,0)</code><br>参数一：地址簇<br>　　socket.AF_INET IPv4（默认）<br>　　socket.AF_INET6 IPv6<br>　　socket.AF_UNIX 只能够用于单一的Unix系统进程间通信</p>
<p>参数二：类型<br>　　socket.SOCK_STREAM　　流式socket , for TCP （默认）<br>　　socket.SOCK_DGRAM　　 数据报式socket , for UDP<br>　　socket.SOCK_RAW 原始套接字，普通的套接字无法处理ICMP、IGMP等网络报文，而SOCK_RAW可以；其次，SOCK_RAW也可以处理特殊的IPv4报文；此外，利用原始套接字，可以通过IP_HDRINCL套接字选项由用户构造IP头。<br>　　socket.SOCK_RDM 是一种可靠的UDP形式，即保证交付数据报但不保证顺序。SOCK_RAM用来提供对原始协议的低级访问，在需要执行某些特殊操作时使用，如发送ICMP报文。SOCK_RAM通常仅限于高级用户或管理员运行的程序使用。<br>　　socket.SOCK_SEQPACKET 可靠的连续数据包服务</p>
<p>参数三：协议<br>　　0　　（默认）与特定的地址家族相关的协议,如果是 0 ，则系统就会根据地址格式和套接类别,自动选择一个合适的协议</p>
<p><code>sk.bind(address)</code><br>　 将套接字绑定到地址。address地址的格式取决于地址族。在AF_INET下，以元组（host,port）的形式表示地址。</p>
<p><code>sk.listen(backlog)</code><br>　 开始监听传入连接。backlog指定在拒绝连接之前，可以挂起的最大连接数量。<br>   backlog等于5，表示内核已经接到了连接请求，但服务器还没有调用accept进行处理的连接个数最大为5<br>   这个值不能无限大，因为要在内核中维护连接队列</p>
<p><code>sk.setblocking(bool)</code><br>　 是否阻塞（默认True），如果设置False，那么accept和recv时一旦无数据，则报错。</p>
<p><code>sk.accept()</code><br>　 接受连接并返回（conn,address）,其中conn是新的套接字对象，可以用来接收和发送数据。address是连接客户端的地址。<br>   接收TCP 客户的连接（阻塞式）等待连接的到来</p>
<p><code>sk.connect(address)</code><br>　 连接到address处的套接字。一般，address的格式为元组（hostname,port）,如果连接出错，返回socket.error错误。</p>
<p><code>sk.connect_ex(address)</code><br>　 同上，只不过会有返回值，连接成功时返回 0 ，连接失败时候返回编码，例如：10061</p>
<p><code>sk.close()</code><br>　 关闭套接字</p>
<p><code>sk.recv(bufsize[,flag])</code><br>　 接受套接字的数据。数据以字符串形式返回，bufsize指定最多可以接收的数量。flag提供有关消息的其他信息，通常可以忽略。</p>
<p><code>sk.recvfrom(bufsize[.flag])</code><br>　 与recv()类似，但返回值是（data,address）。其中data是包含接收数据的字符串，address是发送数据的套接字地址。</p>
<p><code>sk.send(string[,flag])</code><br>　 将string中的数据发送到连接的套接字。返回值是要发送的字节数量，该数量可能小于string的字节大小。即：可能未将指定内容全部发送。</p>
<p><code>sk.sendall(string[,flag])</code><br>　 将string中的数据发送到连接的套接字，但在返回之前会尝试发送所有数据。成功返回None，失败则抛出异常。<br>   内部通过递归调用send，将所有内容发送出去。</p>
<p><code>sk.sendto(string[,flag],address)</code><br>　 将数据发送到套接字，address是形式为（ipaddr，port）的元组，指定远程地址。返回值是发送的字节数。该函数主要用于UDP协议。</p>
<p><code>sk.settimeout(timeout)</code><br>　 设置套接字操作的超时期，timeout是一个浮点数，单位是秒。值为None表示没有超时期。一般，超时期应该在刚创建套接字时设置，因为它们可能用于连接的操作（如 client 连接最多等待5s ）</p>
<p><code>sk.getpeername()</code><br>　 返回连接套接字的远程地址。返回值通常是元组（ipaddr,port）。</p>
<p><code>sk.getsockname()</code><br>　 返回套接字自己的地址。通常是一个元组(ipaddr,port)</p>
<p><code>sk.fileno()</code><br>　 套接字的文件描述符</p>
<p>WEB服务应用，客户端为浏览器，在浏览器中输入:127.0.0.1:8081来与服务端交互，浏览器页面返回:Hello World<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_request</span><span class="params">(client)</span>:</span></span><br><span class="line">    buf = client.recv(<span class="number">1024</span>)</span><br><span class="line">    client.send(bytes(<span class="string">"HTTP/1.1 200 OK\r\n\r\n"</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    client.send(bytes(<span class="string">"Hello, World"</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    sock.bind((<span class="string">'localhost'</span>,<span class="number">8081</span>))</span><br><span class="line">    sock.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        connection, address = sock.accept()</span><br><span class="line">        handle_request(connection)</span><br><span class="line">        connection.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p>
<p>聊天机器人(单连接版)<br>服务端只能处理一个客户端连接，当有两个连接时，第二个连接处于等待状态，必须等到服务端处理完第一个连接，才能处理它<br>服务端:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port = (<span class="string">'127.0.0.1'</span>,<span class="number">9999</span>)        <span class="comment">#服务端用于客户端连接的ip和端口</span></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.bind(ip_port)                    <span class="comment">#开启服务端</span></span><br><span class="line">sk.listen(<span class="number">5</span>)                        <span class="comment">#监听的最大连接数</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">'server waiting...'</span>)</span><br><span class="line">    conn,addr = sk.accept()         <span class="comment">#阻塞，直到有客户端连接，才往下执行，conn为连接的对象，addr为客户端IP和端口</span></span><br><span class="line">    conn.sendall(bytes(<span class="string">'我是聊天机器人'</span>,encoding = <span class="string">"utf-8"</span>))                    <span class="comment">#发送消息给客户端</span></span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">        client_data = conn.recv(<span class="number">1024</span>)                                           <span class="comment">#接收客户端的消息</span></span><br><span class="line">        <span class="keyword">if</span> str(client_data,encoding=<span class="string">"utf-8"</span>) == <span class="string">"q"</span>:                            <span class="comment">#如果接收到的消息是q，即退出循环，等待下一个客户端连接  </span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            conn.sendall(client_data + bytes(<span class="string">"是一个大帅锅"</span>,encoding=<span class="string">"utf-8"</span>))  <span class="comment">#每次接收到除q外的字符串时，返回接收到的值加是一个大帅锅</span></span><br><span class="line">    conn.close()                                                                <span class="comment">#连接关闭</span></span><br></pre></td></tr></table></figure></p>
<p>客户端:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port = (<span class="string">'127.0.0.1'</span>,<span class="number">9999</span>)     <span class="comment">#连接服务端所用的IP和端口</span></span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect(ip_port)              <span class="comment">#客户端连接到一个服务端</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    server_reply = sk.recv(<span class="number">1024</span>)                        <span class="comment">#阻塞,接收服务端发来的消息,直到接收到才继续往下执行</span></span><br><span class="line">    <span class="keyword">print</span> (str(server_reply,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    inp = input(<span class="string">"请输入内容:"</span>)</span><br><span class="line">    sk.sendall(bytes(inp,encoding=<span class="string">"utf-8"</span>))             <span class="comment">#向服务端发送输入的消息</span></span><br><span class="line">    <span class="keyword">if</span> inp == <span class="string">"q"</span>:                                      <span class="comment">#当输入q时，客户端与服务端的连接关闭</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">sk.close()                                              <span class="comment">#连接关闭</span></span><br></pre></td></tr></table></figure></p>
<h3 id="IO多路复用"><a href="#IO多路复用" class="headerlink" title="IO多路复用"></a>IO多路复用</h3><p>I/O多路复用指：通过一种机制，可以监视多个描述符，一旦某个描述符就绪（一般是读就绪或者写就绪），能够通知程序进行相应的读写操作<br>Python中有一个select模块，其中提供了：select、poll、epoll三个方法，分别调用系统的 select，poll，epoll 从而实现IO多路复用</p>
<p>select<br>select最早于1983年出现在4.2BSD中，它通过一个select()系统调用来监视多个文件描述符的数组，当select()返回后，<br>该数组中就绪的文件描述符便会被内核修改标志位，使得进程可以获得这些文件描述符从而进行后续的读写操作。<br>select目前几乎在所有的平台上支持，其良好跨平台支持也是它的一个优点，事实上从现在看来，这也是它所剩不多的优点之一。<br>select的一个缺点在于单个进程能够监视的文件描述符的数量存在最大限制，在Linux上一般为1024，不过可以通过修改宏定义甚至重新编译内核的方式提升这一限制。<br>另外，select()所维护的存储大量文件描述符的数据结构，随着文件描述符数量的增大，其复制的开销也线性增长。<br>同时，由于网络响应时间的延迟使得大量TCP连接处于非活跃状态，但调用select()会对所有socket进行一次线性扫描，所以这也浪费了一定的开销。</p>
<p>poll<br>poll在1986年诞生于System V Release 3，它和select在本质上没有多大差别，但是poll没有最大文件描述符数量的限制。<br>poll和select同样存在一个缺点就是，包含大量文件描述符的数组被整体复制于用户态和内核的地址空间之间，而不论这些文件描述符是否就绪，它的开销随着文件描述符数量的增加而线性增大。<br>另外，select()和poll()将就绪的文件描述符告诉进程后，如果进程没有对其进行IO操作，那么下次调用select()和poll()的时候将再次报告这些文件描述符，所以它们一般不会丢失就绪的消息，这种方式称为水平触发（Level Triggered）。</p>
<p>epoll<br>直到Linux2.6才出现了由内核直接支持的实现方法，那就是epoll，它几乎具备了之前所说的一切优点，被公认为Linux2.6下性能最好的多路I/O就绪通知方法。<br>epoll可以同时支持水平触发和边缘触发（Edge Triggered，只告诉进程哪些文件描述符刚刚变为就绪状态，它只说一遍，如果我们没有采取行动，那么它将不会再次告知，这种方式称为边缘触发），理论上边缘触发的性能要更高一些，但是代码实现相当复杂。<br>epoll同样只告知那些就绪的文件描述符，而且当我们调用epoll_wait()获得就绪文件描述符时，返回的不是实际的描述符，而是一个代表就绪描述符数量的值，<br>你只需要去epoll指定的一个数组中依次取得相应数量的文件描述符即可，这里也使用了内存映射（mmap）技术，这样便彻底省掉了这些文件描述符在系统调用时复制的开销。<br>另一个本质的改进在于epoll采用基于事件的就绪通知方式。在select/poll中，进程只有在调用一定的方法后，内核才对所有监视的文件描述符进行扫描，<br>而epoll事先通过epoll_ctl()来注册一个文件描述符，一旦基于某个文件描述符就绪时，内核会采用类似callback的回调机制，迅速激活这个文件描述符，当进程调用epoll_wait()时便得到通知。</p>
<p>Windows Python：<br>    提供： select<br>Mac Python：<br>    提供： select<br>Linux Python：<br>    提供： select、poll、epoll</p>
<p>对于select方法：<br>句柄列表11, 句柄列表22, 句柄列表33 = select.select(句柄序列1, 句柄序列2, 句柄序列3, 超时时间)<br>参数： 可接受四个参数（前三个必须）<br>返回值：三个列表<br>select方法用来监视文件句柄，如果句柄发生变化，则获取该句柄。<br>1、当 参数1 序列中的句柄发生可读时（accetp和read），则获取发生变化的句柄并添加到 返回值1 序列中<br>2、当 参数2 序列中含有句柄时，则将该序列中所有的句柄添加到 返回值2 序列中<br>3、当 参数3 序列中的句柄发生错误时，则将该发生错误的句柄添加到 返回值3 序列中<br>4、当 超时时间 未设置，则select会一直阻塞，直到监听的句柄发生变化<br>   当 超时时间 ＝ 1时，那么如果监听的句柄均无任何变化，则select会阻塞 1 秒，之后返回三个空列表，如果监听的句柄有变化，则直接执行。</p>
<p>利用select实现伪同时处理多个Socket客户端请求：<br>服务端<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> select</span><br><span class="line">sk1 = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">sk1.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">sk1.bind((<span class="string">'127.0.0.1'</span>,<span class="number">8002</span>))</span><br><span class="line">sk1.listen(<span class="number">5</span>)</span><br><span class="line">sk1.setblocking(<span class="number">0</span>)</span><br><span class="line">inputs = [sk1,]</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    readable_list, writeable_list, error_list = select.select(inputs, [], inputs, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> readable_list:</span><br><span class="line">        print(r)</span><br><span class="line">        <span class="comment"># 当客户端第一次连接服务端时</span></span><br><span class="line">        <span class="keyword">if</span> r == sk1:</span><br><span class="line">            <span class="keyword">print</span> (<span class="string">'accept a connect'</span>)</span><br><span class="line">            request, address = r.accept()</span><br><span class="line">            request.setblocking(<span class="number">0</span>)</span><br><span class="line">            inputs.append(request)</span><br><span class="line">        <span class="comment">#当客户端连接上服务端之后，服务端接收数据</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            received = r.recv(<span class="number">1024</span>)</span><br><span class="line">            received_str = str(received,encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">            <span class="comment"># 当正常接收客户端发送的数据时</span></span><br><span class="line">            <span class="keyword">if</span> received:  <span class="comment">#如果接收到客户端的数据不为空，则给客户端返回接收到的字符串加上你好</span></span><br><span class="line">                <span class="keyword">print</span> (<span class="string">'received data:'</span>,received_str )</span><br><span class="line">                r.sendall(received + bytes(<span class="string">"你好"</span>,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">            <span class="comment"># 当客户端关闭程序时</span></span><br><span class="line">            <span class="keyword">else</span>:        <span class="comment">#如果从客户端接收到的数据为空，则移除该客户端连接</span></span><br><span class="line">                inputs.remove(r)</span><br><span class="line">sk1.close()</span><br><span class="line">```	</span><br><span class="line">客户端</span><br><span class="line">``` python</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port = (<span class="string">'127.0.0.1'</span>,<span class="number">8002</span>)</span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect(ip_port)</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    inp = input(<span class="string">'please input:'</span>)</span><br><span class="line">    <span class="keyword">if</span> inp == <span class="string">""</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    sk.sendall(bytes(inp,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    recived_str = str(sk.recv(<span class="number">1024</span>),encoding=<span class="string">"utf-8"</span>)</span><br><span class="line">    print(recived_str)</span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure></p>
<h3 id="socketServer模块"><a href="#socketServer模块" class="headerlink" title="socketServer模块"></a>socketServer模块</h3><p>SocketServer内部使用 IO多路复用 以及 “多线程” 和 “多进程” ，从而实现并发处理多个客户端请求的Socket服务端。<br>即：每个客户端请求连接到服务器时，Socket服务端都会在服务器是创建一个“线程”或者“进程” 专门负责处理当前客户端的所有请求。</p>
<p>ThreadingTCPServer<br>ThreadingTCPServer实现的Soket服务器内部会为每个client创建一个 “线程”，该线程用来和客户端进行交互。</p>
<p>1、ThreadingTCPServer基础<br>使用ThreadingTCPServer:<br>创建一个继承自 SocketServer.BaseRequestHandler 的类<br>类中必须定义一个名称为 handle 的方法<br>启动ThreadingTCPServer</p>
<p>2、ThreadingTCPServer源码剖析<br>内部调用流程为：<br>启动服务端程序<br>执行 TCPServer.<strong>init</strong> 方法，创建服务端Socket对象并绑定 IP 和 端口<br>执行 BaseServer.<strong>init</strong> 方法，将自定义的继承自SocketServer.BaseRequestHandler 的类 MyRequestHandle赋值给 self.RequestHandlerClass<br>执行 BaseServer.server_forever 方法，While 循环一直监听是否有客户端请求到达 …<br>当客户端连接到达服务器<br>执行 ThreadingMixIn.process_request 方法，创建一个 “线程” 用来处理请求<br>执行 ThreadingMixIn.process_request_thread 方法<br>执行 BaseServer.finish_request 方法，执行 self.RequestHandlerClass()  即：执行 自定义 MyRequestHandler 的构造方法（自动调用基类BaseRequestHandler的构造方法，在该构造方法中又会调用 MyRequestHandler的handle方法）<br>SocketServer的ThreadingTCPServer之所以可以同时处理请求得益于 select 和 Threading 两个东西，其实本质上就是在服务器端为每一个客户端创建一个线程，当前线程用来处理对应客户端的请求，所以，可以支持同时n个客户端链接（长连接）。</p>
<p>SocketServer实现服务器:<br>服务端可同时处理多个客户端连接请求<br>服务端<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socketserver</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyServer</span><span class="params">(socketserver.BaseRequestHandler)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handle</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"新的连接开始"</span>)</span><br><span class="line">        <span class="comment"># print self.request,self.client_address,self.server</span></span><br><span class="line">        conn = self.request</span><br><span class="line">        conn.sendall(bytes(<span class="string">'我是聊天机器人'</span>,encoding = <span class="string">"utf-8"</span>))</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">            client_data = conn.recv(<span class="number">1024</span>)                                           <span class="comment">#接收客户端的消息</span></span><br><span class="line">            <span class="keyword">if</span> str(client_data,encoding=<span class="string">"utf-8"</span>) == <span class="string">"q"</span>:                            <span class="comment">#如果接收到的消息是q，即退出循环，等待下一个客户端连接</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                conn.sendall(client_data + bytes(<span class="string">"是一个大帅锅"</span>,encoding=<span class="string">"utf-8"</span>))  <span class="comment">#每次接收到除q外的字符串时，返回接收到的值加是一个大帅锅</span></span><br><span class="line">        conn.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    server = socketserver.ThreadingTCPServer((<span class="string">'127.0.0.1'</span>,<span class="number">8009</span>),MyServer)</span><br><span class="line">    server.serve_forever()</span><br></pre></td></tr></table></figure></p>
<p>客户端<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">ip_port = (<span class="string">'127.0.0.1'</span>,<span class="number">8009</span>)</span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect(ip_port)</span><br><span class="line">sk.settimeout(<span class="number">5</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    data = sk.recv(<span class="number">1024</span>)</span><br><span class="line">    <span class="keyword">print</span> (<span class="string">'receive:'</span>,str(data,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    inp = input(<span class="string">'please input:'</span>)</span><br><span class="line">    sk.sendall(bytes(inp,encoding=<span class="string">"utf-8"</span>))</span><br><span class="line">    <span class="keyword">if</span> inp == <span class="string">'q'</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure></p>
<p>FTP作业<br>服务端<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>客户端<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://SubHyCan.github.io/2019/02/14/Python-3-Study/" data-id="cjsvb1729000bsyri06yjl005" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-Other" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/14/Other/" class="article-date">
  <time datetime="2019-02-14T08:25:49.495Z" itemprop="datePublished">2019-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/14/Other/">Other</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="Nginx隐藏版本号"><a href="#Nginx隐藏版本号" class="headerlink" title="Nginx隐藏版本号"></a>Nginx隐藏版本号</h3><p>nginx默认显示版本号，curl -I 192.168.229.71:8888|grep Server可查看版本号，修改配置文件，在http中添加server_tokens off;语句，重新加载nginx生效</p>
<h3 id="Test图片"><a href="#Test图片" class="headerlink" title="Test图片"></a>Test图片</h3><p><img src="/images/w010.jpg" alt="Test图片"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://SubHyCan.github.io/2019/02/14/Other/" data-id="cjsvb16u30002syri91r4x9nm" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-Linux下日常安装" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/14/Linux下日常安装/" class="article-date">
  <time datetime="2019-02-14T08:25:49.416Z" itemprop="datePublished">2019-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/14/Linux下日常安装/">Linux下日常安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h3 id="linux安装JDK"><a href="#linux安装JDK" class="headerlink" title="linux安装JDK"></a><strong>linux安装JDK</strong></h3><p>1丶解压缩包 tar -zxvf jdk-8u92-linux.tar.gz -C /usr/local<br>2丶配置java环境变量 vi /etc/profile,末行加上以下内容并保存。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/usr/local/jdk1.8.0_92</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/jre/lib:$JAVA_HOME/lib/tools.jar</span><br><span class="line">export JRE_HOME=$JAVA_HOME/jre</span><br><span class="line">export PATH=$JAVA_HOME/bin:$PATH</span><br></pre></td></tr></table></figure></p>
<p>3丶source /etc/profile,使配置生效。<br>4丶java -version查看安装是否成功。</p>
<h3 id="linux源码安装Nginx"><a href="#linux源码安装Nginx" class="headerlink" title="linux源码安装Nginx"></a><strong>linux源码安装Nginx</strong></h3><p>1丶查看gcc,gcc-c++是否安装，如果没有先安装gcc,gcc-c++.<br>2丶安装pcre。<br>tar -zxvf pcre-8.39.tar.gz -C /tmp<br>cd /tmp/pcre-8.39<br>./configure –prefix=/usr/local/pcre<br>make&amp;&amp;make install<br>3丶安装openssl.<br>tar -zxvf openssl-1.1.0-pre4.tar.gz -C /tmp<br>cd /tmp/openssl-1.1.0-pre4<br>./config –prefix=/usr/local/openssl<br>make&amp;&amp;make install<br>4丶安装zlib.<br>tar -zxvf zlib-1.2.8.tar.gz  -C /tmp<br>cd /tmp/zlib-1.2.8<br>./configure –prefix=/usr/local/zlib<br>make&amp;&amp;make install<br>5丶安装nginx.<br>tar -zxvf nginx-1.11.1.tar.gz  -C /tmp<br>cd /tmp/nginx-1.11.1<br>./configure –prefix=/usr/local/nginx –with-pcre=/tmp/pcre-8.39 –with-openssl=/tmp/openssl-1.1.0-pre4 –with-zlib=/tmp/zlib-1.2.8         <!--注意路径为源码--><br>make&amp;&amp;make install<br>cd /usr/local/nginx/sbin<br>./nginx                       <!--启动nginx <http://localhost> 查看安装是否成功--><br>./nginx -s reload             <!--当修改配置文件后重新加载--><br>./nginx -t                    <!--查看配置文件是否正确--></p>
<h3 id="apache编译安装-安装和nginx类似"><a href="#apache编译安装-安装和nginx类似" class="headerlink" title="apache编译安装(安装和nginx类似)"></a><strong>apache编译安装(安装和nginx类似)</strong></h3><p>1丶安装pcre,检测gcc依赖<br>2丶安装apr<br>3丶安装apr-util<br>4丶安装httpd</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://SubHyCan.github.io/2019/02/14/Linux下日常安装/" data-id="cjsvb16u40003syri74vm1l9l" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-Linux下日常用到的一些命令" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/14/Linux下日常用到的一些命令/" class="article-date">
  <time datetime="2019-02-14T08:25:49.416Z" itemprop="datePublished">2019-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/14/Linux下日常用到的一些命令/">Linux下日常用到的一些命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="命令帮助"><a href="#命令帮助" class="headerlink" title="命令帮助"></a>命令帮助</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">man 命令</span><br><span class="line">命令 --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<h3 id="查看大文件"><a href="#查看大文件" class="headerlink" title="查看大文件"></a>查看大文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -<span class="built_in">type</span> f -size +1G -print0 | xargs -0 du -h | sort -nr                           <span class="comment">#查找所有大于1G的文件，显示大小并排序</span></span><br></pre></td></tr></table></figure>
<h3 id="批量修改文件后缀名"><a href="#批量修改文件后缀名" class="headerlink" title="批量修改文件后缀名"></a>批量修改文件后缀名</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./ -name <span class="string">"*.log"</span> | awk -F <span class="string">"."</span> <span class="string">'&#123;print $2&#125;'</span> | xargs -i -t mv ./&#123;&#125;.<span class="built_in">log</span> ./&#123;&#125;.txt      <span class="comment">#将当前目录的所有log文件修改为txt文件</span></span><br></pre></td></tr></table></figure>
<h3 id="找出两个目录相同的值并删除，可用awk，grep，comm命令实现"><a href="#找出两个目录相同的值并删除，可用awk，grep，comm命令实现" class="headerlink" title="找出两个目录相同的值并删除，可用awk，grep，comm命令实现"></a>找出两个目录相同的值并删除，可用awk，grep，comm命令实现</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">ls /lyl/openstack1 &gt; tmp1.txt</span><br><span class="line">ls /lyl/openstack2 &gt; tmp2.txt</span><br><span class="line">awk <span class="string">'NR==FNR&#123;a[$0]&#125;NR&gt;FNR&#123;if($1 in a) print $0&#125;'</span> tmp1.txt tmp2.txt &gt; tmp3.txt       <span class="comment">#找出两个目录相同的值</span></span><br><span class="line">awk <span class="string">'NR==FNR&#123;a[$0]&#125;NR&gt;FNR&#123;if(!($1 in a)) print $0&#125;'</span> tmp1.txt tmp2.txt &gt; tmp4.txt    <span class="comment">#找出两个目录不同的值 </span></span><br><span class="line">cat tmp3.txt | <span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$line</span></span><br><span class="line">    rm -rf /lyl/openstack2/<span class="variable">$line</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">rm -rf tmp*.txt</span><br></pre></td></tr></table></figure>
<h3 id="查看大文件的内容"><a href="#查看大文件的内容" class="headerlink" title="查看大文件的内容"></a>查看大文件的内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -n 100 test.log           <span class="comment">#查看日志倒数100行的内容，文件较大是可用此命令</span></span><br></pre></td></tr></table></figure>
<h3 id="查看配置文件未被注释内容"><a href="#查看配置文件未被注释内容" class="headerlink" title="查看配置文件未被注释内容"></a>查看配置文件未被注释内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/cinder/cinder.conf|grep -v <span class="string">"^#"</span>|grep -v <span class="string">"^$"</span></span><br></pre></td></tr></table></figure>
<h3 id="编辑文件"><a href="#编辑文件" class="headerlink" title="编辑文件"></a>编辑文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim 文件名 +100                <span class="comment">#打开文件并来到第100行</span></span><br></pre></td></tr></table></figure>
<h3 id="touch命令"><a href="#touch命令" class="headerlink" title="touch命令"></a>touch命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch 文件名                   <span class="comment">#创建新的空文件</span></span><br></pre></td></tr></table></figure>
<h3 id="查看java运行的实例"><a href="#查看java运行的实例" class="headerlink" title="查看java运行的实例"></a>查看java运行的实例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jps</span><br></pre></td></tr></table></figure>
<h3 id="pwdx，查看程序执行路径"><a href="#pwdx，查看程序执行路径" class="headerlink" title="pwdx，查看程序执行路径"></a>pwdx，查看程序执行路径</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pwdx <span class="variable">$pid</span></span><br></pre></td></tr></table></figure>
<h3 id="解压一个war包，例如Hudson-war"><a href="#解压一个war包，例如Hudson-war" class="headerlink" title="解压一个war包，例如Hudson.war"></a>解压一个war包，例如Hudson.war</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jar -xvf Hudson.war  <span class="comment">#解压Hudson.war到当前目录</span></span><br></pre></td></tr></table></figure>
<h3 id="将一个文件夹下的所有内容添加到压缩文件"><a href="#将一个文件夹下的所有内容添加到压缩文件" class="headerlink" title="将一个文件夹下的所有内容添加到压缩文件"></a>将一个文件夹下的所有内容添加到压缩文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zip -r 文件名.zip ./*</span><br></pre></td></tr></table></figure>
<h3 id="解压zip文件到当前目录"><a href="#解压zip文件到当前目录" class="headerlink" title="解压zip文件到当前目录"></a>解压zip文件到当前目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip 文件名.zip</span><br></pre></td></tr></table></figure>
<h3 id="安装rpm包，可以用rpm或者yum"><a href="#安装rpm包，可以用rpm或者yum" class="headerlink" title="安装rpm包，可以用rpm或者yum"></a>安装rpm包，可以用rpm或者yum</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh rpm包    </span><br><span class="line">yum install rpm包</span><br></pre></td></tr></table></figure>
<h3 id="卸载rpm包"><a href="#卸载rpm包" class="headerlink" title="卸载rpm包"></a>卸载rpm包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm --nodeps -e rpm包</span><br><span class="line">yum -y remove rpm包</span><br></pre></td></tr></table></figure>
<h3 id="nohup命令可以将程序以忽略挂起信号的方式运行起来，被运行的程序的输出信息将不会显示到终端"><a href="#nohup命令可以将程序以忽略挂起信号的方式运行起来，被运行的程序的输出信息将不会显示到终端" class="headerlink" title="nohup命令可以将程序以忽略挂起信号的方式运行起来，被运行的程序的输出信息将不会显示到终端"></a>nohup命令可以将程序以忽略挂起信号的方式运行起来，被运行的程序的输出信息将不会显示到终端</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nohup 命令 &amp;                   <span class="comment">#缺省重定向输出到nohup.out</span></span><br><span class="line">nohup 命令 &gt; 文件.<span class="built_in">log</span> 2&gt;&amp;1 &amp;   <span class="comment">#指定输出到文件</span></span><br></pre></td></tr></table></figure>
<h3 id="网卡流量相关"><a href="#网卡流量相关" class="headerlink" title="网卡流量相关"></a>网卡流量相关</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/net/dev <span class="comment">#查看网卡流量</span></span><br><span class="line">grep ens32 /proc/net/dev |awk <span class="string">'&#123;print $1&#125;'</span> <span class="comment">#得出网卡ens32的第1个参数数值</span></span><br></pre></td></tr></table></figure>
<h3 id="apache对web进行压力测试ab"><a href="#apache对web进行压力测试ab" class="headerlink" title="apache对web进行压力测试ab"></a>apache对web进行压力测试ab</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./ab -n1000 -c100 http://192.168.229.71/mycluster/testCluster.jsp  <span class="comment">#n为请求数，c为并发数</span></span><br></pre></td></tr></table></figure>
<h3 id="arpd命令是用来收集免费arp信息的一个守护进程，它将收集到的信息保存在磁盘上或者在需要时，提供给内核用户用于避免多余广播。"><a href="#arpd命令是用来收集免费arp信息的一个守护进程，它将收集到的信息保存在磁盘上或者在需要时，提供给内核用户用于避免多余广播。" class="headerlink" title="arpd命令是用来收集免费arp信息的一个守护进程，它将收集到的信息保存在磁盘上或者在需要时，提供给内核用户用于避免多余广播。"></a>arpd命令是用来收集免费arp信息的一个守护进程，它将收集到的信息保存在磁盘上或者在需要时，提供给内核用户用于避免多余广播。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arpd -b /var/tmp/arpd.db       <span class="comment">#指定数据库文件，启动arpd进程</span></span><br><span class="line">arpd -l -b /var/tmp/arpd.db    <span class="comment">#查看结果</span></span><br></pre></td></tr></table></figure>
<h3 id="nstat命令和rtacct命令是一个简单的监视内核的SNMP计数器和网络接口状态的实用工具。"><a href="#nstat命令和rtacct命令是一个简单的监视内核的SNMP计数器和网络接口状态的实用工具。" class="headerlink" title="nstat命令和rtacct命令是一个简单的监视内核的SNMP计数器和网络接口状态的实用工具。"></a>nstat命令和rtacct命令是一个简单的监视内核的SNMP计数器和网络接口状态的实用工具。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nstat</span><br><span class="line">rtacct</span><br></pre></td></tr></table></figure>
<h3 id="suse查看版本"><a href="#suse查看版本" class="headerlink" title="suse查看版本"></a>suse查看版本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lsb_release -a         <span class="comment">#查看系统版本</span></span><br><span class="line">cat /etc/SUSE-release  <span class="comment">#查看系统版本</span></span><br><span class="line">uname -a               <span class="comment">#查看系统信息</span></span><br><span class="line">uname -r               <span class="comment">#查看内核版本</span></span><br></pre></td></tr></table></figure>
<h3 id="suse-11防火墙相关"><a href="#suse-11防火墙相关" class="headerlink" title="suse 11防火墙相关"></a>suse 11防火墙相关</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SuSEfirewall2 status       <span class="comment">#查看防火墙状态</span></span><br><span class="line">SuSEfirewall2 satrt        <span class="comment">#开启防火墙</span></span><br><span class="line">SuSEfirewall2 stop         <span class="comment">#关闭防火墙</span></span><br></pre></td></tr></table></figure>
<h3 id="ss命令用来显示处于活动状态的套接字信息。ss命令可以用来获取socket统计信息，它可以显示和netstat类似的内容。但ss的优势在于它能够显示更多更详细的有关TCP和连接状态的信息，而且比netstat更快速更高效。"><a href="#ss命令用来显示处于活动状态的套接字信息。ss命令可以用来获取socket统计信息，它可以显示和netstat类似的内容。但ss的优势在于它能够显示更多更详细的有关TCP和连接状态的信息，而且比netstat更快速更高效。" class="headerlink" title="ss命令用来显示处于活动状态的套接字信息。ss命令可以用来获取socket统计信息，它可以显示和netstat类似的内容。但ss的优势在于它能够显示更多更详细的有关TCP和连接状态的信息，而且比netstat更快速更高效。"></a>ss命令用来显示处于活动状态的套接字信息。ss命令可以用来获取socket统计信息，它可以显示和netstat类似的内容。但ss的优势在于它能够显示更多更详细的有关TCP和连接状态的信息，而且比netstat更快速更高效。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ss -t -a  <span class="comment">#显示tcp连接</span></span><br><span class="line">ss -u -a  <span class="comment">#显示udp连接 </span></span><br><span class="line">ss -s     <span class="comment">#显示 Sockets 摘要</span></span><br><span class="line">ss -l     <span class="comment">#列出所有打开的网络连接端口</span></span><br><span class="line">ss -pl    <span class="comment">#查看进程使用的socket</span></span><br></pre></td></tr></table></figure>
<h3 id="ip命令用来显示或操纵Linux主机的路由、网络设备、策略路由和隧道，是Linux下较新的功能强大的网络配置工具。"><a href="#ip命令用来显示或操纵Linux主机的路由、网络设备、策略路由和隧道，是Linux下较新的功能强大的网络配置工具。" class="headerlink" title="ip命令用来显示或操纵Linux主机的路由、网络设备、策略路由和隧道，是Linux下较新的功能强大的网络配置工具。"></a>ip命令用来显示或操纵Linux主机的路由、网络设备、策略路由和隧道，是Linux下较新的功能强大的网络配置工具。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip -s link list     <span class="comment">#显示更加详细的网络设备运行状态</span></span><br><span class="line">ip route list       <span class="comment">#显示核心路由表</span></span><br><span class="line">ip neigh list       <span class="comment">#显示邻居表</span></span><br></pre></td></tr></table></figure>
<h3 id="dig命令是常用的域名查询工具，可以用来测试域名系统工作是否正常。"><a href="#dig命令是常用的域名查询工具，可以用来测试域名系统工作是否正常。" class="headerlink" title="dig命令是常用的域名查询工具，可以用来测试域名系统工作是否正常。"></a>dig命令是常用的域名查询工具，可以用来测试域名系统工作是否正常。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dig www.baidu.com   <span class="comment">#例如查询百度</span></span><br></pre></td></tr></table></figure>
<h3 id="ssh命令是openssh套件中的客户端连接工具，可以给予ssh加密协议实现安全的远程登录服务器。"><a href="#ssh命令是openssh套件中的客户端连接工具，可以给予ssh加密协议实现安全的远程登录服务器。" class="headerlink" title="ssh命令是openssh套件中的客户端连接工具，可以给予ssh加密协议实现安全的远程登录服务器。"></a>ssh命令是openssh套件中的客户端连接工具，可以给予ssh加密协议实现安全的远程登录服务器。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh root@192.168.229.70               <span class="comment">#以root用户登录服务器</span></span><br><span class="line">ssh root@192.168.229.70 df -h         <span class="comment">#以root用户远程执行命令df -h</span></span><br></pre></td></tr></table></figure>
<h3 id="traceroute命令用于追踪数据包在网络上的传输时的全部路径，它默认发送的数据包大小是40字节。"><a href="#traceroute命令用于追踪数据包在网络上的传输时的全部路径，它默认发送的数据包大小是40字节。" class="headerlink" title="traceroute命令用于追踪数据包在网络上的传输时的全部路径，它默认发送的数据包大小是40字节。"></a>traceroute命令用于追踪数据包在网络上的传输时的全部路径，它默认发送的数据包大小是40字节。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute www.baidu.com     <span class="comment">#追踪本地到百度服务器的路由</span></span><br></pre></td></tr></table></figure>
<h3 id="tracepath命令用来追踪并显示报文到达目的主机所经过的路由信息，与traceroute类似。"><a href="#tracepath命令用来追踪并显示报文到达目的主机所经过的路由信息，与traceroute类似。" class="headerlink" title="tracepath命令用来追踪并显示报文到达目的主机所经过的路由信息，与traceroute类似。"></a>tracepath命令用来追踪并显示报文到达目的主机所经过的路由信息，与traceroute类似。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tracepath www.baidu.com      <span class="comment">#追踪本地到百度服务器的路由</span></span><br></pre></td></tr></table></figure>
<h3 id="route命令用来显示并设置Linux内核中的网络路由表，route命令设置的路由主要是静态路由"><a href="#route命令用来显示并设置Linux内核中的网络路由表，route命令设置的路由主要是静态路由" class="headerlink" title="route命令用来显示并设置Linux内核中的网络路由表，route命令设置的路由主要是静态路由"></a>route命令用来显示并设置Linux内核中的网络路由表，route命令设置的路由主要是静态路由</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route -n          <span class="comment">#查看当前路由</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://man.linuxde.net/route" target="_blank" rel="noopener">route</a></p>
<h3 id="nslookup命令是常用域名查询工具，就是查DNS信息用的命令。"><a href="#nslookup命令是常用域名查询工具，就是查DNS信息用的命令。" class="headerlink" title="nslookup命令是常用域名查询工具，就是查DNS信息用的命令。"></a>nslookup命令是常用域名查询工具，就是查DNS信息用的命令。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nslookup www.baidu.com</span><br></pre></td></tr></table></figure>
<h3 id="arping命令是用于发送arp请求到一个相邻主机的工具"><a href="#arping命令是用于发送arp请求到一个相邻主机的工具" class="headerlink" title="arping命令是用于发送arp请求到一个相邻主机的工具"></a>arping命令是用于发送arp请求到一个相邻主机的工具</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arping www.baidu.com</span><br></pre></td></tr></table></figure>
<h3 id="arp命令用于操作主机的arp缓冲区，它可以显示arp缓冲区中的所有条目、删除指定的条目或者添加静态的ip地址与MAC地址对应关系。"><a href="#arp命令用于操作主机的arp缓冲区，它可以显示arp缓冲区中的所有条目、删除指定的条目或者添加静态的ip地址与MAC地址对应关系。" class="headerlink" title="arp命令用于操作主机的arp缓冲区，它可以显示arp缓冲区中的所有条目、删除指定的条目或者添加静态的ip地址与MAC地址对应关系。"></a>arp命令用于操作主机的arp缓冲区，它可以显示arp缓冲区中的所有条目、删除指定的条目或者添加静态的ip地址与MAC地址对应关系。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arp -v       <span class="comment">#查询arp缓冲区中指定主机的arp条目</span></span><br></pre></td></tr></table></figure>
<h3 id="ifconfig命令被用于配置和显示Linux内核中网络接口的网络参数。"><a href="#ifconfig命令被用于配置和显示Linux内核中网络接口的网络参数。" class="headerlink" title="ifconfig命令被用于配置和显示Linux内核中网络接口的网络参数。"></a>ifconfig命令被用于配置和显示Linux内核中网络接口的网络参数。</h3><p>More info: <a href="http://man.linuxde.net/ifconfig" target="_blank" rel="noopener">ifconfig</a></p>
<h3 id="ifdown命令用于禁用指定的网络接口。"><a href="#ifdown命令用于禁用指定的网络接口。" class="headerlink" title="ifdown命令用于禁用指定的网络接口。"></a>ifdown命令用于禁用指定的网络接口。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifdown eth0        <span class="comment">#禁用eth0</span></span><br></pre></td></tr></table></figure>
<h3 id="split命令可以将一个大文件切割成很多个小文件，有时需要将文件切割成更小的片段，比如为提高可读性，生成日志等。"><a href="#split命令可以将一个大文件切割成很多个小文件，有时需要将文件切割成更小的片段，比如为提高可读性，生成日志等。" class="headerlink" title="split命令可以将一个大文件切割成很多个小文件，有时需要将文件切割成更小的片段，比如为提高可读性，生成日志等。"></a>split命令可以将一个大文件切割成很多个小文件，有时需要将文件切割成更小的片段，比如为提高可读性，生成日志等。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">选项</span><br><span class="line">-b：指定大小切割。</span><br><span class="line">-C：与-b参数类似，但切割时尽量维持每行的完整性。</span><br><span class="line">-d：使用数字作为后缀。</span><br><span class="line">-l：以行数数大小切割。</span><br><span class="line">split -b 100M test.log                <span class="comment">#分割test.log文件，每100M为一个文件，默认文件名为xaa,xab.....</span></span><br><span class="line">split -C 100M test.log                <span class="comment">#分割test.log文件，每100M为一个文件，默认文件名为xaa,xab.....</span></span><br><span class="line">split -d -C 100M test.log test.log    <span class="comment">#分割test.log文件，每100M为一个文件，文件名为test.log1,testlog2.......</span></span><br><span class="line">split -d -l 100000 test.log test.log  <span class="comment">#分割test.log文件，每100000行为一个文件，文件名为test.log1,testlog2.......</span></span><br></pre></td></tr></table></figure>
<h3 id="tcpdump命令是一款sniffer工具，它可以打印所有经过网络接口的数据包的头信息，也可以使用-w选项将数据包保存到文件中，方便以后分析。"><a href="#tcpdump命令是一款sniffer工具，它可以打印所有经过网络接口的数据包的头信息，也可以使用-w选项将数据包保存到文件中，方便以后分析。" class="headerlink" title="tcpdump命令是一款sniffer工具，它可以打印所有经过网络接口的数据包的头信息，也可以使用-w选项将数据包保存到文件中，方便以后分析。"></a>tcpdump命令是一款sniffer工具，它可以打印所有经过网络接口的数据包的头信息，也可以使用-w选项将数据包保存到文件中，方便以后分析。</h3><p>More info: <a href="http://man.linuxde.net/tcpdump" target="_blank" rel="noopener">tcpdump</a></p>
<h3 id="ethtool命令用于获取以太网卡的配置信息，或者修改这些配置。这个命令比较复杂，功能特别多。"><a href="#ethtool命令用于获取以太网卡的配置信息，或者修改这些配置。这个命令比较复杂，功能特别多。" class="headerlink" title="ethtool命令用于获取以太网卡的配置信息，或者修改这些配置。这个命令比较复杂，功能特别多。"></a>ethtool命令用于获取以太网卡的配置信息，或者修改这些配置。这个命令比较复杂，功能特别多。</h3><p>More info: <a href="http://man.linuxde.net/ethtool" target="_blank" rel="noopener">ethtool</a></p>
<h3 id="iptables命令是Linux上常用的防火墙软件，是netfilter项目的一部分。可以直接配置，也可以通过许多前端和图形界面配置。"><a href="#iptables命令是Linux上常用的防火墙软件，是netfilter项目的一部分。可以直接配置，也可以通过许多前端和图形界面配置。" class="headerlink" title="iptables命令是Linux上常用的防火墙软件，是netfilter项目的一部分。可以直接配置，也可以通过许多前端和图形界面配置。"></a>iptables命令是Linux上常用的防火墙软件，是netfilter项目的一部分。可以直接配置，也可以通过许多前端和图形界面配置。</h3><p>More info: <a href="http://man.linuxde.net/iptables" target="_blank" rel="noopener">iptables</a></p>
<h3 id="netstat命令用来打印Linux中网络系统的状态信息，可让你得知整个Linux系统的网络情况。"><a href="#netstat命令用来打印Linux中网络系统的状态信息，可让你得知整个Linux系统的网络情况。" class="headerlink" title="netstat命令用来打印Linux中网络系统的状态信息，可让你得知整个Linux系统的网络情况。"></a>netstat命令用来打印Linux中网络系统的状态信息，可让你得知整个Linux系统的网络情况。</h3><p>More info: <a href="http://man.linuxde.net/netstat" target="_blank" rel="noopener">netstat</a></p>
<h3 id="ssh-keygen命令用于为“ssh”生成、管理和转换认证密钥，它支持RSA和DSA两种认证密钥。"><a href="#ssh-keygen命令用于为“ssh”生成、管理和转换认证密钥，它支持RSA和DSA两种认证密钥。" class="headerlink" title="ssh-keygen命令用于为“ssh”生成、管理和转换认证密钥，它支持RSA和DSA两种认证密钥。"></a>ssh-keygen命令用于为“ssh”生成、管理和转换认证密钥，它支持RSA和DSA两种认证密钥。</h3><p>More info: <a href="http://man.linuxde.net/ssh-keygen" target="_blank" rel="noopener">ssh-keygen</a></p>
<h3 id="curl命令是一个利用URL规则在命令行下工作的文件传输工具。"><a href="#curl命令是一个利用URL规则在命令行下工作的文件传输工具。" class="headerlink" title="curl命令是一个利用URL规则在命令行下工作的文件传输工具。"></a>curl命令是一个利用URL规则在命令行下工作的文件传输工具。</h3><p>More info: <a href="http://man.linuxde.net/curl" target="_blank" rel="noopener">curl</a></p>
<h3 id="mail命令是命令行的电子邮件发送和接收工具。操作的界面不像elm或pine那么容易使用，但功能非常完整。"><a href="#mail命令是命令行的电子邮件发送和接收工具。操作的界面不像elm或pine那么容易使用，但功能非常完整。" class="headerlink" title="mail命令是命令行的电子邮件发送和接收工具。操作的界面不像elm或pine那么容易使用，但功能非常完整。"></a>mail命令是命令行的电子邮件发送和接收工具。操作的界面不像elm或pine那么容易使用，但功能非常完整。</h3><p>More info: <a href="http://man.linuxde.net/mail" target="_blank" rel="noopener">mail</a></p>
<h3 id="lsof命令用于查看你进程开打的文件，打开文件的进程，进程打开的端口-TCP、UDP-。找回-恢复删除的文件。"><a href="#lsof命令用于查看你进程开打的文件，打开文件的进程，进程打开的端口-TCP、UDP-。找回-恢复删除的文件。" class="headerlink" title="lsof命令用于查看你进程开打的文件，打开文件的进程，进程打开的端口(TCP、UDP)。找回/恢复删除的文件。"></a>lsof命令用于查看你进程开打的文件，打开文件的进程，进程打开的端口(TCP、UDP)。找回/恢复删除的文件。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsof -n |awk <span class="string">'&#123;print $2&#125;'</span>|sort|uniq -c |sort -nr|more   <span class="comment">#查看所有进程打开的文件句柄数量，第一列为句柄数量(从大到小排列)，第二列为进程号</span></span><br><span class="line">lsof -p <span class="variable">$pid</span> | wc -l                                    <span class="comment">#查看进程打开的文件数</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://man.linuxde.net/lsof" target="_blank" rel="noopener">lsof</a></p>
<h3 id="uniq用于报告或忽略文件中的重复行，一般与sort命令结合使用。"><a href="#uniq用于报告或忽略文件中的重复行，一般与sort命令结合使用。" class="headerlink" title="uniq用于报告或忽略文件中的重复行，一般与sort命令结合使用。"></a>uniq用于报告或忽略文件中的重复行，一般与sort命令结合使用。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uniq test.txt         <span class="comment">#删除相邻重复出现的行</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://man.linuxde.net/uniq" target="_blank" rel="noopener">uniq</a></p>
<h3 id="sort用于排序"><a href="#sort用于排序" class="headerlink" title="sort用于排序"></a>sort用于排序</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sort -k1 test.txt       <span class="comment">#指定第一列排序</span></span><br><span class="line">sort test.txt           <span class="comment">#排序，让文件重复的行相邻</span></span><br><span class="line">sort test.txt | uniq    <span class="comment">#排序去重</span></span><br><span class="line">sort -u test.txt        <span class="comment">#排序去重</span></span><br><span class="line">sort test.txt | uniq -c <span class="comment">#排序去重，统计重复次数</span></span><br><span class="line">awk -F / <span class="string">'&#123;print $3&#125;'</span> test.txt|sort|uniq -c       <span class="comment">#网址文件，查找重复出现的域名  </span></span><br><span class="line">cut -d / -f3 test.txt|sort|uniq -c </span><br><span class="line">awk -F / <span class="string">'&#123;print $3&#125;'</span> test.txt|sort -r|uniq -c    <span class="comment">#网址文件，查找重复出现的域名，倒序</span></span><br><span class="line">cut -d / -f3 test.txt|sort -r|uniq -c</span><br></pre></td></tr></table></figure>
<h3 id="awk是一种编程语言，用于在linux-unix下对文本和数据进行处理。"><a href="#awk是一种编程语言，用于在linux-unix下对文本和数据进行处理。" class="headerlink" title="awk是一种编程语言，用于在linux/unix下对文本和数据进行处理。"></a>awk是一种编程语言，用于在linux/unix下对文本和数据进行处理。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'BEGIN&#123; commands &#125; pattern&#123; commands &#125; END&#123; commands &#125;'</span>   <span class="comment">#awk工作原理，BEGIN，pattern,END可省略</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"A line 1\nA line 2"</span> | awk <span class="string">'BEGIN&#123; print "Start" &#125; &#123; print &#125; END&#123; print "End" &#125;'</span></span><br><span class="line"><span class="comment">#输出为:</span></span><br><span class="line">Start</span><br><span class="line">A line 1</span><br><span class="line">A line 2</span><br><span class="line">End </span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> | awk <span class="string">'&#123; var1="v1"; var2="v2"; var3="v3"; print var1,var2,var3; &#125;'</span>     <span class="comment">#输出为:v1 v2 v3</span></span><br><span class="line"><span class="built_in">echo</span> | awk <span class="string">'&#123; var1="v1"; var2="v2"; var3="v3"; print var1"="var2"="var3; &#125;'</span> <span class="comment">#输出为：v1=v2=v3</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"line1 f2 f3\nline2 f4 f5\nline3 f6 f7"</span> | awk <span class="string">'&#123;print "Line No:"NR", No of fields:"NF, "$0="$0, "$1="$1, "$2="$2, "$3="$3&#125; #NF表示字段数，在执行过程中对应于当前的字段数;NR 表示记录数，在执行过程中对应于当前的行号</span></span><br><span class="line"><span class="string">#输出为：</span></span><br><span class="line"><span class="string">Line No:1, No of fields:3 $0=line1 f2 f3 $1=line1 $2=f2 $3=f3</span></span><br><span class="line"><span class="string">Line No:2, No of fields:3 $0=line2 f4 f5 $1=line2 $2=f4 $3=f5</span></span><br><span class="line"><span class="string">Line No:3, No of fields:3 $0=line3 f6 f7 $1=line3 $2=f6 $3=f7</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">awk '</span>&#123;<span class="built_in">print</span> <span class="variable">$1</span>&#125;<span class="string">' 文件名         #输出文件每一行的第一个字段</span></span><br><span class="line"><span class="string">awk '</span>&#123;<span class="built_in">print</span> <span class="variable">$1</span>,<span class="variable">$2</span>&#125;<span class="string">' 文件名      #输出文件每一行的第一个和第二个字段</span></span><br><span class="line"><span class="string">awk '</span>END&#123; <span class="built_in">print</span> NR &#125;<span class="string">' 文件名 #统计文件的行数</span></span><br><span class="line"><span class="string">echo -e "line1 f2 f3\n line2 f4 f5" | awk '</span>&#123;<span class="built_in">print</span> <span class="variable">$NF</span>&#125;<span class="string">'     #使用print $NF可以打印出一行中的最后一个字段，使用$(NF-1)则是打印倒数第二个字段，其他以此类推;两行输出分别为f3和f5</span></span><br><span class="line"><span class="string">echo -e "line1 f2 f3\n line2 f4 f5" | awk '</span>&#123;<span class="built_in">print</span> $(NF-1)&#125;<span class="string">' #两行输出分别为f2和f4</span></span><br><span class="line"><span class="string">seq 5 | awk '</span>BEGIN&#123; sum=0; <span class="built_in">print</span> <span class="string">"总和："</span> &#125; &#123; <span class="built_in">print</span> <span class="variable">$1</span><span class="string">"+"</span>; sum+=<span class="variable">$1</span> &#125; END&#123; <span class="built_in">print</span> <span class="string">"等于"</span>; <span class="built_in">print</span> sum &#125;<span class="string">'</span></span><br><span class="line"><span class="string">#seq 5为取数1-5，输出为:</span></span><br><span class="line"><span class="string">总和：</span></span><br><span class="line"><span class="string">1+</span></span><br><span class="line"><span class="string">2+</span></span><br><span class="line"><span class="string">3+</span></span><br><span class="line"><span class="string">4+</span></span><br><span class="line"><span class="string">5+</span></span><br><span class="line"><span class="string">等于</span></span><br><span class="line"><span class="string">15</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">VAR=10000</span></span><br><span class="line"><span class="string">echo | awk -v VARIABLE=$VAR '</span>&#123; <span class="built_in">print</span> VARIABLE &#125;<span class="string">'   #借助-v选项，可以将外部值（并非来自stdin）传递给awk，输出为10000</span></span><br><span class="line"><span class="string">var1="aaa"</span></span><br><span class="line"><span class="string">var2="bbb"</span></span><br><span class="line"><span class="string">echo | awk '</span>&#123; <span class="built_in">print</span> v1,v2 &#125;<span class="string">' v1=$var1 v2=$var2     #另一种传递外部变量方法,输出为aaa bbb</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;a=1;b=2;<span class="built_in">print</span> (a&gt;5 &amp;&amp; b&lt;=2),(a&gt;5 || b&lt;=2);&#125;<span class="string">' #逻辑判断，输出为0 1，即一假一真</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;a=<span class="string">"100testa"</span>;<span class="keyword">if</span>(a ~ /^100*/)&#123;<span class="built_in">print</span> <span class="string">"ok"</span>;&#125;&#125;<span class="string">'  #判断是否a匹配正则表达式，匹配输出ok，否则没有输出，输出为ok;~和~!分别为匹配和不匹配正则表达式</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;a=11;<span class="keyword">if</span>(a &gt;= 9)&#123;<span class="built_in">print</span> <span class="string">"ok"</span>;&#125;&#125;<span class="string">'               #判断a是否大于等于9，输出为ok</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;a=<span class="string">"b"</span>;<span class="built_in">print</span> a==<span class="string">"b"</span>?<span class="string">"ok"</span>:<span class="string">"err"</span>;&#125;<span class="string">'             #?:为C条件表达式，判断a是否等于b，等于输出ok，否则输出err</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;a=<span class="string">"b"</span>;arr[0]=<span class="string">"b"</span>;arr[1]=<span class="string">"c"</span>;<span class="built_in">print</span> (a <span class="keyword">in</span> arr);&#125;<span class="string">'    #in表示数组中是否存在某键值，返回值为0，假</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;a=<span class="string">"b"</span>;arr[0]=<span class="string">"b"</span>;arr[<span class="string">"b"</span>]=<span class="string">"c"</span>;<span class="built_in">print</span> (a <span class="keyword">in</span> arr);&#125;<span class="string">'  #返回值为1，真</span></span><br><span class="line"><span class="string">cat test.txt                                      #每一行的内容分别为a，b，c，d，e</span></span><br><span class="line"><span class="string">awk '</span>NR%2==1&#123;next&#125;&#123;<span class="built_in">print</span> NR,<span class="variable">$0</span>;&#125;<span class="string">' test.txt        #两行的输出分别为2 b，4 d</span></span><br><span class="line"><span class="string">cat test.txt</span></span><br><span class="line"><span class="string">内容为:</span></span><br><span class="line"><span class="string">web01[192.168.2.100]</span></span><br><span class="line"><span class="string">httpd            ok</span></span><br><span class="line"><span class="string">tomcat               ok</span></span><br><span class="line"><span class="string">sendmail               ok</span></span><br><span class="line"><span class="string">web02[192.168.2.101]</span></span><br><span class="line"><span class="string">httpd            ok</span></span><br><span class="line"><span class="string">postfix               ok</span></span><br><span class="line"><span class="string">web03[192.168.2.102]</span></span><br><span class="line"><span class="string">mysqld            ok</span></span><br><span class="line"><span class="string">httpd               ok</span></span><br><span class="line"><span class="string">脚本：     </span></span><br><span class="line"><span class="string">awk '</span>/^web/&#123;T=<span class="variable">$0</span>;next;&#125;&#123;<span class="built_in">print</span> T<span class="string">":"</span><span class="variable">$0</span>;&#125;<span class="string">' test.txt    </span></span><br><span class="line"><span class="string">输出为:</span></span><br><span class="line"><span class="string">web01[192.168.2.100]:   httpd            ok</span></span><br><span class="line"><span class="string">web01[192.168.2.100]:   tomcat               ok</span></span><br><span class="line"><span class="string">web01[192.168.2.100]:   sendmail               ok</span></span><br><span class="line"><span class="string">web02[192.168.2.101]:   httpd            ok</span></span><br><span class="line"><span class="string">web02[192.168.2.101]:   postfix               ok</span></span><br><span class="line"><span class="string">web03[192.168.2.102]:   mysqld            ok</span></span><br><span class="line"><span class="string">web03[192.168.2.102]:   httpd               ok            </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">echo | awk '</span>&#123;<span class="built_in">printf</span>(<span class="string">"hello word!n"</span>) &gt; <span class="string">"datafile"</span>&#125;<span class="string">'    #将结果输出到一个文件</span></span><br><span class="line"><span class="string">awk -F: '</span>&#123; <span class="built_in">print</span> <span class="variable">$NF</span> &#125;<span class="string">' /etc/passwd                   #将/etc/passwd中每一行的最后一个字段输出 </span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123; FS=<span class="string">":"</span> &#125; &#123; <span class="built_in">print</span> <span class="variable">$NF</span> &#125;<span class="string">' /etc/passwd</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;info=<span class="string">"it is a test"</span>;lens=split(info,tA,<span class="string">" "</span>);<span class="built_in">print</span> length(tA),lens;&#125;<span class="string">'   #length返回字符串以及数组长度，split进行分割字符串为数组，也会返回分割得到数组长度,4 4</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;info=<span class="string">"it is a test"</span>;split(info,tA,<span class="string">" "</span>);<span class="built_in">print</span> asort(tA);&#125;<span class="string">'              #asort对数组进行排序，返回数组长度。4 </span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;info=<span class="string">"it is a test"</span>;split(info,tA,<span class="string">" "</span>);<span class="keyword">for</span>(k <span class="keyword">in</span> tA)&#123;<span class="built_in">print</span> k,tA[k];&#125;&#125;<span class="string">'  #输出数组内容(无序)</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;info=<span class="string">"it is a test"</span>;tlen=split(info,tA,<span class="string">" "</span>);<span class="keyword">for</span>(k=1;k&lt;=tlen;k++)&#123;<span class="built_in">print</span> k,tA[k];&#125;&#125;<span class="string">'   #输出数组内容(有序)</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;tB[<span class="string">"a"</span>]=<span class="string">"a1"</span>;tB[<span class="string">"b"</span>]=<span class="string">"b1"</span>;<span class="keyword">if</span>( <span class="string">"c"</span> <span class="keyword">in</span> tB)&#123;<span class="built_in">print</span> <span class="string">"ok"</span>;&#125;;<span class="keyword">for</span>(k <span class="keyword">in</span> tB)&#123;<span class="built_in">print</span> k,tB[k];&#125;&#125;<span class="string">' #判断键值是否存在</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;tB[<span class="string">"a"</span>]=<span class="string">"a1"</span>;tB[<span class="string">"b"</span>]=<span class="string">"b1"</span>;delete tB[<span class="string">"a"</span>];<span class="keyword">for</span>(k <span class="keyword">in</span> tB)&#123;<span class="built_in">print</span> k,tB[k];&#125;&#125;<span class="string">'              #删除键值</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;OFMT=<span class="string">"%.3f"</span>;fs=sin(1);fe=exp(10);fl=<span class="built_in">log</span>(10);<span class="keyword">fi</span>=int(3.1415);<span class="built_in">print</span> fs,fe,fl,<span class="keyword">fi</span>;&#125;<span class="string">'      #OFMT设置输出数据格式是保留3位小数。sin取正弦，exp取幂，log取自然对数，int取整数</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;srand();fr=int(100*rand());<span class="built_in">print</span> fr;&#125;<span class="string">'                                               #获得随机数，rand返回0-1中的任意值 </span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;info=<span class="string">"this is a test2010test!"</span>;gsub(/[0-9]+/,<span class="string">"!"</span>,info);<span class="built_in">print</span> info&#125;<span class="string">'                  #在 info中查找满足正则表达式，/[0-9]+/ 用””替换，并且替换后的值，赋值给info</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;info=<span class="string">"this is a test2010test!"</span>;<span class="built_in">print</span> index(info,<span class="string">"test"</span>)?<span class="string">"ok"</span>:<span class="string">"no found"</span>;&#125;<span class="string">'           #在info中查找test，找到返回ok，否则返回no found</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;info=<span class="string">"this is a test2010test!"</span>;<span class="built_in">print</span> substr(info,4,10);&#125;<span class="string">'                            #从第4个字符开始，截取10个长度字符串</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;<span class="keyword">while</span>(<span class="string">"cat /etc/passwd"</span>|getline)&#123;<span class="built_in">print</span> <span class="variable">$0</span>;&#125;;close(<span class="string">"/etc/passwd"</span>);&#125;<span class="string">'                  #以close方法打开外部文件</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;<span class="keyword">while</span>(getline &lt; <span class="string">"/etc/passwd"</span>)&#123;<span class="built_in">print</span> <span class="variable">$0</span>;&#125;;close(<span class="string">"/etc/passwd"</span>);&#125;<span class="string">'                    #以getline方法逐行读取外部文件</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;b=system(<span class="string">"df -h"</span>);<span class="built_in">print</span> b;&#125;<span class="string">'                                                         #以system方法调用外部应用程序，b是返回值，返回执行结果</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;a=systime();<span class="built_in">print</span> strftime(<span class="string">"%c"</span>,a);&#125;<span class="string">'                                                #获取系统当前的时间</span></span><br><span class="line"><span class="string">awk '</span>BEGIN&#123;tstamp=mktime(<span class="string">"2001 01 01 12 12 12"</span>);<span class="built_in">print</span> strftime(<span class="string">"%c"</span>,tstamp);&#125;<span class="string">'                  #建立指定时间 </span></span><br><span class="line"><span class="string">ps -ef|grep -v grep|grep java|awk '</span>&#123;<span class="built_in">print</span> <span class="variable">$2</span>&#125;<span class="string">'|xargs kill -9                                    #杀掉所有java进程  </span></span><br><span class="line"><span class="string">awk '</span>&#123;<span class="built_in">print</span> <span class="variable">$1</span>&#125;<span class="string">' access.log |sort|uniq -c|sort -rn|head -10                                     #Nginx日志访问IP统计 </span></span><br><span class="line"><span class="string">awk '</span>&#123;S[<span class="variable">$1</span>]++&#125;END&#123;<span class="keyword">for</span>(k <span class="keyword">in</span> S) <span class="built_in">print</span> S[k],k&#125;<span class="string">' access.log|sort -rn |head -10                      #Nginx日志访问IP统计</span></span><br><span class="line"><span class="string">awk '</span>/^tcp/ &#123;S[<span class="variable">$NF</span>]++&#125;END&#123;<span class="keyword">for</span>(k <span class="keyword">in</span> S) <span class="built_in">print</span> S[k],k&#125;<span class="string">' netstat.log |sort -nr|head                 #tcp网络连接状态排序</span></span><br><span class="line"><span class="string">awk '</span>/^tcp/ &#123;<span class="built_in">print</span> <span class="variable">$NF</span>&#125;<span class="string">' netstat.log|sort|uniq -c|sort -nr|head                                 #tcp网络连接状态排序   </span></span><br><span class="line"><span class="string">awk '</span>&#123;<span class="built_in">print</span> <span class="variable">$7</span><span class="string">"\t"</span> <span class="variable">$10</span>&#125;<span class="string">' access_log|awk '</span>&#123;S[<span class="variable">$1</span>]+=<span class="variable">$2</span>;S1[<span class="variable">$1</span>]+=1&#125;END&#123;<span class="keyword">for</span>(i <span class="keyword">in</span> S) <span class="built_in">print</span> S[i],S1[i],i&#125;<span class="string">'|sort -rn|head -10       #流量暴涨时查看文件总访问大小(前10)，访问次数，路径</span></span><br><span class="line"><span class="string">awk '</span>&#123;array_num[<span class="variable">$7</span>]++;array_size[<span class="variable">$7</span>]+=<span class="variable">$10</span>&#125;END&#123;<span class="keyword">for</span>(x <span class="keyword">in</span> array_num)&#123;<span class="built_in">print</span> array_size[x],array_num[x],x&#125;&#125;<span class="string">' access_20190102.log |sort -rn -k1|head -10  #流量暴涨时查看文件总访问大小(前10)，访问次数，路径</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://man.linuxde.net/awk" target="_blank" rel="noopener">awk</a></p>
<h3 id="ln命令用来为文件创建连接，连接类型分为硬连接和符号连接两种，默认的连接类型是硬连接。如果要创建符号连接必须使用”-s”选项。"><a href="#ln命令用来为文件创建连接，连接类型分为硬连接和符号连接两种，默认的连接类型是硬连接。如果要创建符号连接必须使用”-s”选项。" class="headerlink" title="ln命令用来为文件创建连接，连接类型分为硬连接和符号连接两种，默认的连接类型是硬连接。如果要创建符号连接必须使用”-s”选项。"></a>ln命令用来为文件创建连接，连接类型分为硬连接和符号连接两种，默认的连接类型是硬连接。如果要创建符号连接必须使用”-s”选项。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/mengqc</span><br><span class="line">ln /mub1/m2.c /usr/liu/a2.c           <span class="comment">#将目录/usr/mengqc/mub1下的文件m2.c链接到目录/usr/liu下的文件a2.c,在执行ln命令之前，目录/usr/liu中不存在a2.c文件。执行ln之后，在/usr/liu目录中才有a2.c这一项，表明m2.c和a2.c链接起来（注意，二者在物理上是同一文件），利用ls -l命令可以看到链接数的变化。</span></span><br><span class="line">ln -s /usr/mengqc/mub1 /usr/liu/abc   <span class="comment">#在目录/usr/liu下建立一个符号链接文件abc，使它指向目录/usr/mengqc/mub1,执行该命令后，/usr/mengqc/mub1代表的路径将存放在名为/usr/liu/abc的文件中。</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://man.linuxde.net/ln" target="_blank" rel="noopener">ln</a></p>
<h3 id="dd命令用于复制文件并对原文件的内容进行转换和格式化处理。"><a href="#dd命令用于复制文件并对原文件的内容进行转换和格式化处理。" class="headerlink" title="dd命令用于复制文件并对原文件的内容进行转换和格式化处理。"></a>dd命令用于复制文件并对原文件的内容进行转换和格式化处理。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/zero of=sun.txt bs=1M count=1          <span class="comment">#if和of分别代表输入和输出文件，如不指定，默认为从stdin中读取输入，将stdout作为默认输出,bs 代表字节为单位的块大小,count代表被复制的块数。</span></span><br></pre></td></tr></table></figure>
<h3 id="stat命令用于显示文件的状态信息，stat命令的输出信息比ls命令的输出信息要更详细。"><a href="#stat命令用于显示文件的状态信息，stat命令的输出信息比ls命令的输出信息要更详细。" class="headerlink" title="stat命令用于显示文件的状态信息，stat命令的输出信息比ls命令的输出信息要更详细。"></a>stat命令用于显示文件的状态信息，stat命令的输出信息比ls命令的输出信息要更详细。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">stat</span> -c %s test.txt            <span class="comment">#查看文件的大小</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://man.linuxde.net/stat" target="_blank" rel="noopener">stat</a></p>
<h3 id="uptime命令能够打印系统总共运行了多长时间和系统的平均负载。"><a href="#uptime命令能够打印系统总共运行了多长时间和系统的平均负载。" class="headerlink" title="uptime命令能够打印系统总共运行了多长时间和系统的平均负载。"></a>uptime命令能够打印系统总共运行了多长时间和系统的平均负载。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uptime -V    <span class="comment">#显示uptime命令版本信息</span></span><br><span class="line">uptime       <span class="comment">#信息显示依次为：现在时间、系统已经运行了多长时间、目前有多少登陆用户、系统在过去的1分钟、5分钟和15分钟内的平均负载。</span></span><br></pre></td></tr></table></figure>
<h3 id="time命令用于统计给定命令所花费的总时间。"><a href="#time命令用于统计给定命令所花费的总时间。" class="headerlink" title="time命令用于统计给定命令所花费的总时间。"></a>time命令用于统计给定命令所花费的总时间。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time 命令    <span class="comment">#输出的信息分别显示了该命令所花费的real时间、user时间和sys时间</span></span><br></pre></td></tr></table></figure>
<h3 id="at命令用于在指定时间执行命令-进入at命令行后，按ctrl-d可保存-。"><a href="#at命令用于在指定时间执行命令-进入at命令行后，按ctrl-d可保存-。" class="headerlink" title="at命令用于在指定时间执行命令(进入at命令行后，按ctrl+d可保存)。"></a>at命令用于在指定时间执行命令(进入at命令行后，按ctrl+d可保存)。</h3><p>More info: <a href="http://man.linuxde.net/at" target="_blank" rel="noopener">at</a></p>
<h3 id="crontab命令被用来提交和管理用户的需要周期性执行的任务，与windows下的计划任务类似。"><a href="#crontab命令被用来提交和管理用户的需要周期性执行的任务，与windows下的计划任务类似。" class="headerlink" title="crontab命令被用来提交和管理用户的需要周期性执行的任务，与windows下的计划任务类似。"></a>crontab命令被用来提交和管理用户的需要周期性执行的任务，与windows下的计划任务类似。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">crontab -e            <span class="comment">#编辑该用户的计时器任务</span></span><br><span class="line">编辑的内容示例：</span><br><span class="line">SHELL=/bin/bash</span><br><span class="line">*/10 19-21  *  *  *  /usr/<span class="built_in">local</span>/workspace/jiance.sh &gt;&gt; /usr/<span class="built_in">local</span>/workspace/jiance.txt</span><br><span class="line"><span class="comment"># 从晚上7点到9点每隔10分钟执行一次,并将执行结果写到文本文件</span></span><br><span class="line">crontab -l            <span class="comment">#查看该用户的计时器任务</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://man.linuxde.net/crontab" target="_blank" rel="noopener">crontab</a> <a href="http://www.cnblogs.com/tracy/archive/2011/12/27/2303788.html" target="_blank" rel="noopener">URL</a></p>
<h3 id="ulimit命令用来限制系统用户对shell资源的访问"><a href="#ulimit命令用来限制系统用户对shell资源的访问" class="headerlink" title="ulimit命令用来限制系统用户对shell资源的访问"></a>ulimit命令用来限制系统用户对shell资源的访问</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ulimit</span> -a </span><br><span class="line">输出如下所示:</span><br><span class="line">core file size          (blocks, -c) 0           <span class="comment">#core文件的最大值为100 blocks。</span></span><br><span class="line">data seg size           (kbytes, -d) unlimited   <span class="comment">#进程的数据段可以任意大。</span></span><br><span class="line">scheduling priority             (-e) 0</span><br><span class="line">file size               (blocks, -f) unlimited   <span class="comment">#文件可以任意大。</span></span><br><span class="line">pending signals                 (-i) 98304       <span class="comment">#最多有98304个待处理的信号。</span></span><br><span class="line">max locked memory       (kbytes, -l) 32          <span class="comment">#一个任务锁住的物理内存的最大值为32KB。</span></span><br><span class="line">max memory size         (kbytes, -m) unlimited   <span class="comment">#一个任务的常驻物理内存的最大值。</span></span><br><span class="line">open files                      (-n) 1024        <span class="comment">#一个任务最多可以同时打开1024的文件。</span></span><br><span class="line">pipe size            (512 bytes, -p) 8           <span class="comment">#管道的最大空间为4096字节。</span></span><br><span class="line">POSIX message queues     (bytes, -q) 819200      <span class="comment">#POSIX的消息队列的最大值为819200字节。</span></span><br><span class="line">real-time priority              (-r) 0</span><br><span class="line">stack size              (kbytes, -s) 10240       <span class="comment">#进程的栈的最大值为10240字节。</span></span><br><span class="line">cpu time               (seconds, -t) unlimited   <span class="comment">#进程使用的CPU时间。</span></span><br><span class="line">max user processes              (-u) 98304       <span class="comment">#当前用户同时打开的进程（包括线程）的最大个数为98304。</span></span><br><span class="line">virtual memory          (kbytes, -v) unlimited   <span class="comment">#没有限制进程的最大地址空间。</span></span><br><span class="line">file locks                      (-x) unlimited   <span class="comment">#所能锁住的文件的最大个数没有限制。</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://man.linuxde.net/ulimit" target="_blank" rel="noopener">ulimit</a></p>
<h3 id="sed是一种流编辑器，它是文本处理中非常中的工具，能够完美的配合正则表达式使用，功能不同凡响。"><a href="#sed是一种流编辑器，它是文本处理中非常中的工具，能够完美的配合正则表达式使用，功能不同凡响。" class="headerlink" title="sed是一种流编辑器，它是文本处理中非常中的工具，能够完美的配合正则表达式使用，功能不同凡响。"></a>sed是一种流编辑器，它是文本处理中非常中的工具，能够完美的配合正则表达式使用，功能不同凡响。</h3><pre><code class="bash">sed -i <span class="string">'s/hello/HELLO/'</span> datafile                       <span class="comment">#在文件datafile上将每一行的第一个hello替换为HELLO   </span>
sed -i <span class="string">'s/hello/HELLO/g'</span> datafile                      <span class="comment">#在文件datafile上将每一行的所有hello替换为HELLO</span>
</code></pre>
<p>More info: <a href="http://man.linuxde.net/sed" target="_blank" rel="noopener">sed</a></p>
<h3 id="history-修改历史命令最大保存数目"><a href="#history-修改历史命令最大保存数目" class="headerlink" title="history 修改历史命令最大保存数目"></a>history 修改历史命令最大保存数目</h3><p>历史命令是被保存在内存中的，当退出或者登录shell时，会自动保存或读取。在内存中，历史命令仅能够存储1000条历史命令，该数量是由环境变量HISTSIZE进行控制<br>1丶修改/etc/profile里HISTSIZE的值为想要保存的条数，保存后source /etc/profile即可生效<br>2丶如不生效，可重启</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://SubHyCan.github.io/2019/02/14/Linux下日常用到的一些命令/" data-id="cjsvb16y00009syriv14ciz89" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-Kvm虚拟化" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/14/Kvm虚拟化/" class="article-date">
  <time datetime="2019-02-14T08:25:49.322Z" itemprop="datePublished">2019-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/14/Kvm虚拟化/">Kvm虚拟化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a><strong>Quick Start</strong></h2><h3 id="基本"><a href="#基本" class="headerlink" title="基本"></a><strong>基本</strong></h3><p>1丶关闭防火墙<br>2丶进行cpu检测,命令结果大于0表示cpu支持虚拟化。如果是等于0,就需要手动勾选虚拟化引擎<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">egrep -c <span class="string">'(vmx|svm)'</span> /proc/cpuinfo</span><br></pre></td></tr></table></figure></p>
<h3 id="Centos7-2部署Kvm"><a href="#Centos7-2部署Kvm" class="headerlink" title="Centos7.2部署Kvm"></a><strong>Centos7.2部署Kvm</strong></h3><h4 id="一丶环境"><a href="#一丶环境" class="headerlink" title="一丶环境"></a>一丶环境</h4><p>Vmware5.5虚拟化</p>
<p>Kvm主机：centos7.2虚拟机(桌面及开发工具安装)</p>
<p>Kvm主机ip：192.168.229.87</p>
<p>Esxi5.5主机支持虚拟化:</p>
<p>修改虚拟机所属Esxi5.5主机配置文件/etc/vmware/config，末尾新增vhv.enable = “TRUE”并保存，重新引导主机(关闭主机上的所有虚拟机电源，进入维护模式，重新引导，退出维护模式，开启虚拟机)，使其支持虚拟化。</p>
<p>登录虚拟机，执行egrep -c ‘(vmx|svm)’ /proc/cpuinfo ，输出不为0，说明该虚拟机支持cpu虚拟化。</p>
<p><img src="/images/Kvm/1.jpg" alt=""></p>
<h4 id="二丶安装软件"><a href="#二丶安装软件" class="headerlink" title="二丶安装软件"></a>二丶安装软件</h4><p>1丶挂载系统安装盘，进入目录/run/media/root/CentOS\ 7\ x86_64/Packages/，安装软件qume-kvm,libvirt,virt-install,bridge-utils,virt-maneger。</p>
<p>2丶执行lsmod | grep kvm，如下图所示，说明kvm安装成功。</p>
<p><img src="/images/Kvm/2.jpg" alt=""></p>
<h4 id="三丶配置kvm"><a href="#三丶配置kvm" class="headerlink" title="三丶配置kvm"></a>三丶配置kvm</h4><p>1丶systemctl start libvirtd              #开启kvm服务</p>
<p>​      systemctl enable libvirtd             #设置开机自动启动 </p>
<p>​      systemctl status libvirtd             #查看状态</p>
<p>2丶配置桥接网络</p>
<p>(1)丶先备份一份/etc/sysconfig/network-scripts文件到/root目录</p>
<p>(2)丶在/etc/sysconfig/network-scripts目录下创建ifcfg-br0文件，并写入如下内容</p>
<p>DEVICE=br0</p>
<p>ONBOOT=”yes”</p>
<p>TYPE=Bridge</p>
<p>BOOTPROTO=none</p>
<p>IPADDR=192.168.229.87</p>
<p>NETMASK=255.255.255.0</p>
<p>GATEWAY=192.168.229.1</p>
<p>(3) 丶修改配置文件ifcfg-ens192，改为如下内容</p>
<p>DEVICEens192</p>
<p>ONBOOT=yes</p>
<p>BRIDGE=br0</p>
<p>(4) 丶执行systemctl restart network重启网络,查看网卡信息，已有桥接bro</p>
<p><img src="/images/Kvm/3.jpg" alt=""></p>
<p>3丶点击应用程序-系统工具-虚拟系统管理器，即可对kvm虚拟机进行管理，配置网络时，选择桥接网络，ip地址与宿主机配置时一样，即可实现与宿主机和外部网络的通信(若只能与宿主机通信，则更改Esxi交换机安全配置，接受混杂模式，即可与外部通信)。</p>
<h4 id="四丶虚拟机管理"><a href="#四丶虚拟机管理" class="headerlink" title="四丶虚拟机管理"></a>四丶虚拟机管理</h4><p>1丶若虚机无法启动，报错为splice-client-error-quark:Error initializing USB support:Other error<a href="0">99</a>，则更改虚拟机显示为VNC服务器。即可正常启动。</p>
<p>2丶克隆虚机时，若克隆的虚机无法启动，则删除Channel-qemu-ga(使用了其他的虚拟机配置文件)，再重新新建一个，即可正常启动。 </p>
<p>3丶相关命令：</p>
<p>brctl show                    #查看网桥信息         </p>
<p>virt-clone -o centos7.0 -n clone7.0 -f /var/lib/libvirt/images/clone7.0.qcow2     #克隆虚机</p>
<p>virsh list –all              #查看所有虚机</p>
<p>virsh start centos7.0         #启动虚机</p>
<p>virsh shutdown centoss7.0     #关闭虚机                                     </p>
<p>virt-install –help           #查看新建虚机相关</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://SubHyCan.github.io/2019/02/14/Kvm虚拟化/" data-id="cjsvb16u50004syri1ibcxp9s" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-hello-world" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/14/hello-world/" class="article-date">
  <time datetime="2019-02-14T08:25:49.322Z" itemprop="datePublished">2019-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/14/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://SubHyCan.github.io/2019/02/14/hello-world/" data-id="cjsvb16wf0008syrivxfzlwa4" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-Docker-Study" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/14/Docker-Study/" class="article-date">
  <time datetime="2019-02-14T08:25:49.268Z" itemprop="datePublished">2019-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/14/Docker-Study/">Docker Study</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="Centos下Docker学习"><a href="#Centos下Docker学习" class="headerlink" title="Centos下Docker学习"></a>Centos下Docker学习</h2><h3 id="Centos-7安装和卸载Docker-CE开源社区版"><a href="#Centos-7安装和卸载Docker-CE开源社区版" class="headerlink" title="Centos 7安装和卸载Docker CE开源社区版"></a>Centos 7安装和卸载Docker CE开源社区版</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2 curl       <span class="comment">#安装设置镜像仓库所需包</span></span><br><span class="line">sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo      <span class="comment">#设置stable镜像仓库                      </span></span><br><span class="line">sudo yum list docker-ce.x86_64  --showduplicates | sort -r   <span class="comment">#列出软件可用的版本，可根据版本安装</span></span><br><span class="line">sudo yum -y install docker-ce                                <span class="comment">#安装最新版</span></span><br><span class="line">sudo docker --version                                        <span class="comment">#查看docker版本</span></span><br><span class="line">sudo docker run hello-world                                  <span class="comment">#验证是否安装成功</span></span><br><span class="line">sudo yum remove docker-ce                                    <span class="comment">#卸载docker-ce </span></span><br><span class="line">sudo rm -rf /var/lib/docker                                  <span class="comment">#删除所有镜像、容器和存储卷</span></span><br></pre></td></tr></table></figure>
<h3 id="配置加速器"><a href="#配置加速器" class="headerlink" title="配置加速器"></a>配置加速器</h3><h4 id="第一种"><a href="#第一种" class="headerlink" title="第一种:"></a>第一种:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo cat &gt; /etc/docker/daemon.json &lt;&lt; EOF</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"registry-mirrors"</span> : [</span><br><span class="line">	    <span class="string">"https://i3jtbyvy.mirror.aliyuncs.com"</span>            <span class="comment">#加速器地址还可为:https://registry.docker-cn.com</span></span><br><span class="line">	],</span><br><span class="line">	<span class="string">"debug"</span> : <span class="literal">true</span>,</span><br><span class="line">	<span class="string">"experimental"</span> : <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>
<h4 id="第二种"><a href="#第二种" class="headerlink" title="第二种:"></a>第二种:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> docker            <span class="comment">#启用docker服务</span></span><br><span class="line">sudo vi /etc/systemd/system/multi-user.target.wants/docker.service   <span class="comment">#编辑，找到ExecStart=这一行，改为下一行所示的内容</span></span><br><span class="line">ExecStart=/usr/bin/dockerd --registry-mirror=https://i3jtbyvy.mirror.aliyuncs.com</span><br></pre></td></tr></table></figure>
<h3 id="Docker安装websphere"><a href="#Docker安装websphere" class="headerlink" title="Docker安装websphere"></a>Docker安装websphere</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo docker login                                 <span class="comment">#登录Docker Cloud，需输入用户名和密码 </span></span><br><span class="line">sudo docker search websphere                      <span class="comment">#查看与websphere相关的镜像</span></span><br><span class="line">sudo docker pull ibmcom/websphere-traditional     <span class="comment">#下载镜像到本地</span></span><br><span class="line">sudo docker images                                <span class="comment">#查看本地镜像，不同的仓库它的镜像ID可以相同</span></span><br><span class="line">sudo docker run --name websphere \                <span class="comment">#通过镜像来运行一个名为websphere的容器,可指定端口映射，容器名等</span></span><br><span class="line">-h websphere \ </span><br><span class="line">-e UPDATE_HOSTNAME=<span class="literal">true</span> \ </span><br><span class="line">-p 9043:9043 \</span><br><span class="line">-p 9443:9443 \</span><br><span class="line">-d ibmcom/websphere-traditional </span><br><span class="line">sudo docker <span class="built_in">exec</span> websphere cat /tmp/PASSWORD      <span class="comment">#进入容器内部输出websphere的登录密码，用户名为wsadmin</span></span><br><span class="line">sudo docker ps                                    <span class="comment">#查看容器有没有在运行,访问http://localhost:9043/ibm/cosole来登录控制台</span></span><br></pre></td></tr></table></figure>
<h3 id="Docker常用命令"><a href="#Docker常用命令" class="headerlink" title="Docker常用命令"></a>Docker常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">sudo docker ps -a                             <span class="comment">#查看所有容器</span></span><br><span class="line">sudo docker ps                                <span class="comment">#查看在运行的容器</span></span><br><span class="line">sudo docker stop 容器名/容器ID                <span class="comment">#停止一个运行中的容器，发出一个停止信号，等待容器停止</span></span><br><span class="line">sudo docker <span class="built_in">kill</span> 容器名/容器ID                <span class="comment">#直接杀死容器</span></span><br><span class="line">sudo docker start 容器名/容器ID               <span class="comment">#运行一个容器</span></span><br><span class="line">sudo docker rm 容器名/容器ID                  <span class="comment">#删除一个容器</span></span><br><span class="line">sudo docker rmi 仓库名:标签/镜像ID            <span class="comment">#删除一个镜像，基于此镜像运行的容器必须删除，同名需指定版本，即镜像名:版本</span></span><br><span class="line">sudo docker rmi $(docker images -q)           <span class="comment">#删除所有镜像  </span></span><br><span class="line">sudo docker tag hello-world subcan/get-started:<span class="built_in">test</span>                  <span class="comment">#发布过程为先标记一个镜像，标记的仓库为自己docker hub上想存放镜像的仓库</span></span><br><span class="line">sudo docker push subcan/get-started:<span class="built_in">test</span>                             <span class="comment">#发布镜像到Docker Cloud仓库</span></span><br><span class="line">sudo docker login                                                    <span class="comment">#登录Docker Cloud仓库</span></span><br><span class="line">sudo docker pull subcan/get-started:FirstBuildImages                 <span class="comment">#登录Docker Cloud后，可pull一个自己镜像仓库的的镜像到本地</span></span><br><span class="line">sudo docker <span class="built_in">logout</span>                                                   <span class="comment">#退出登录  </span></span><br><span class="line">sudo docker inspect 容器名/容器ID                                     <span class="comment">#对容器进行详细的检查，返回配置信息   </span></span><br><span class="line">sudo docker inspect 镜像ID/仓库ID:标签                               <span class="comment">#查看镜像的详细信息</span></span><br><span class="line">sudo docker run learn/tutorial apt-get install -y ping               <span class="comment">#运行一个容器并在容器中安装ping     </span></span><br><span class="line">sudo docker commit 容器名/容器ID 镜像名                              <span class="comment">#把一个容器做成镜像</span></span><br><span class="line">sudo docker <span class="built_in">log</span> [-f][-t] 镜像                                        <span class="comment">#查看容器的日志</span></span><br><span class="line">sudo docker top 容器名/容器ID                                        <span class="comment">#查看容器的进程 </span></span><br><span class="line">sudo docker <span class="built_in">exec</span> 容器名 命令                                         <span class="comment">#对运行中的容器启动一个新的进程</span></span><br><span class="line">sudo man docker-run                                                  <span class="comment">#使用Docker帮助文件。其他命令也可查看</span></span><br><span class="line">sudo docker port 容器名/容器ID                                       <span class="comment">#查看容器端口映射的情况</span></span><br><span class="line">sudo docker info                                                     <span class="comment">#查看docker信息   </span></span><br><span class="line">sudo docker version                                                  <span class="comment">#查看docker版</span></span><br><span class="line">sudo docker images --no-trunc                                        <span class="comment">#可查看镜像完整的ID</span></span><br><span class="line">sudo docker images -a                                                <span class="comment">#查看所有的镜像，其中为&lt;none&gt;的镜像表示中间层镜像</span></span><br><span class="line">sudo docker images -q                                                <span class="comment">#只查看镜像ID</span></span><br><span class="line">sudo docker images 仓库名字                                          <span class="comment">#查看指定的镜像</span></span><br></pre></td></tr></table></figure>
<h3 id="docker-run命令"><a href="#docker-run命令" class="headerlink" title="docker run命令"></a>docker run命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run [参数] </span><br><span class="line">参数:-d 以守护式进程的方式运行容器</span><br></pre></td></tr></table></figure>
<h3 id="守护式容器"><a href="#守护式容器" class="headerlink" title="守护式容器"></a>守护式容器</h3><p>例:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -i -t --name test1 ubuntu /bin/bash                       <span class="comment">#进入交互式容器环境</span></span><br><span class="line">Ctrl+P Ctrl+Q                                                        <span class="comment">#退出交互式环境，不影响容器运行，如果输入exit退出，则容器停止运行</span></span><br><span class="line">docker attach 容器名/容器ID                                          <span class="comment">#进入运行的容器中</span></span><br></pre></td></tr></table></figure></p>
<p>docker 概念 仓库，仓库:标签<br>Dockerfile构建镜像<br>进入Dockerfile文件目录，执行命令，执行成功，即构建了一个镜像<br>docker build -t=”仓库名” .<br>docker build -t=”仓库名” –no-cache.                        #不使用镜像缓存  </p>
<p>docker c/s模式的连接方式<br>unix:///var/run/docker.sock            #默认使用它，可以nc来连接，如:nc -u /var/run/docker.sock<br>tcp://host:port<br>fd://socketfd</p>
<p>docker 远程访问<br>不同的机器，修改docker守护进程启动项(labels标签)，区别服务器，保证client api 与server api版本一致，-H选项配置启动选项,客户端可通过export Docker_HOST=”服务端访问方式”，来访问服务端docker info，为空表示访问本地的docker</p>
<p>可自定义修改linux虚拟网桥docker0的ip地址和掩码，docker运行的容器通过网桥docker0来通信，每运行一个容器，docker0会自动分配一个ip和mac地址给容器<br>ifconfig docker0 192.168.200.1 netmask 255.255.255.0</p>
<p>yum install bridge-utils -y<br>brctl show                          #查看网桥</p>
<p>brctl addbr br0                     #添加一个虚拟网桥<br>ifconfig br0 192.168.100.1 netmask 255.255.255.0<br>守护进程启动配置中添加DOCKER_OPS值 -b=br0，则可以将自定义的虚拟网桥添加给docker使用</p>
<p>容器与外部网络连接<br>sysctl net.ipv4.conf.all.forwarding 查看net.ipv4.conf.all.forwarding，默认开启，值等于1</p>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://SubHyCan.github.io/2019/02/14/Docker-Study/" data-id="cjsvb16u20001syrighjpvupv" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  
    <article id="post-Docker-Quick-Start-Guide" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/14/Docker-Quick-Start-Guide/" class="article-date">
  <time datetime="2019-02-14T08:25:49.268Z" itemprop="datePublished">2019-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/14/Docker-Quick-Start-Guide/">Docker-Quick-Start-Guide</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <h2 id="注-本文为转载"><a href="#注-本文为转载" class="headerlink" title="注:本文为转载"></a><code>注:本文为转载</code></h2><h2 id="原文出处-enter"><a href="#原文出处-enter" class="headerlink" title="原文出处: enter"></a><code>原文出处:</code> <a href="https://github.com/buxiaomo/MarkdownBooks/blob/master/Docker入门级简易手册.md" target="_blank" rel="noopener">enter</a></h2><p>Docker入门级简易手册</p>
<p>本篇仅作为新手入门使用，大神们可以指导小弟修正，不喜勿喷，谢谢</p>
<p>在线版：<a href="https://github.com/buxiaomo/MarkdownBooks" target="_blank" rel="noopener">https://github.com/buxiaomo/MarkdownBooks</a></p>
<p>本篇主要讲解如下几个知识点：</p>
<ol>
<li><p>CentOS7与Ubuntu下安装Docker，配置加速器</p>
</li>
<li><p>常见Dockerfile命令讲解</p>
</li>
<li><p>docker-compo安装与常见命令讲解</p>
</li>
<li><p>集群环境下如何使用compose编排</p>
</li>
<li><p>根据项目如何使用Docker部署应用</p>
<ol>
<li>Swarm集群下发布基于LNMP的WordPress应用发布</li>
<li>NodeJS应用发布</li>
<li>Flask应用发布</li>
<li>基于Tomcat定制封装Jenkins镜像</li>
</ol>
</li>
<li><p>每次代码写好了都要自己构建觉得麻烦怎么办？</p>
</li>
</ol>
<h2 id="CentOS7与Ubuntu下安装Docker"><a href="#CentOS7与Ubuntu下安装Docker" class="headerlink" title="CentOS7与Ubuntu下安装Docker"></a>CentOS7与Ubuntu下安装Docker</h2><h3 id="CentOS7"><a href="#CentOS7" class="headerlink" title="CentOS7"></a>CentOS7</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2 curl</span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">yum -y install docker-ce</span><br></pre></td></tr></table></figure>
<h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">apt-get remove docker docker-engine docker.io -y</span><br><span class="line"></span><br><span class="line">apt-get update</span><br><span class="line"></span><br><span class="line">apt-get install apt-transport-https ca-certificates curl gnupg2 software-properties-common -y</span><br><span class="line"></span><br><span class="line">curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line"></span><br><span class="line">apt-key fingerprint 0EBFCD88</span><br><span class="line"></span><br><span class="line">add-apt-repository "deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable"</span><br><span class="line"></span><br><span class="line">apt-get update</span><br><span class="line"></span><br><span class="line">apt-get install docker-ce -y</span><br></pre></td></tr></table></figure>
<h3 id="配置加速器"><a href="#配置加速器" class="headerlink" title="配置加速器"></a>配置加速器</h3><p>​    不想申请加速器的朋友可以使用我的，也可以自己去申请阿里云或者Daocloud的加速器。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /etc/docker</span><br><span class="line"></span><br><span class="line">cat &gt; /etc/docker/daemon.json &lt;&lt; EOF</span><br><span class="line">&#123;</span><br><span class="line">    &quot;registry-mirrors&quot; : [</span><br><span class="line">	    &quot;https://i3jtbyvy.mirror.aliyuncs.com&quot;</span><br><span class="line">	],</span><br><span class="line">	&quot;debug&quot; : true,</span><br><span class="line">	&quot;experimental&quot; : true</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure>
<h2 id="常见Dockerfile命令讲解"><a href="#常见Dockerfile命令讲解" class="headerlink" title="常见Dockerfile命令讲解"></a>常见Dockerfile命令讲解</h2><p>​    Dockerfile简单一点就是描述你这个镜像安装了哪些软件包，有哪些操作，创建了什么东西。有些人喜欢用 <code>docker commit</code> 命令去打包镜像，这样是不好的，首先commit出来的镜像比你使用Dockerfile构建出来的体积大，而且commit出来的镜像属于黑盒镜像，除了制作者，谁都不知道你在里面干了什么，属于不安全的镜像，很少会有人使用，最后就是不便于你最终的管理和更新。所以推荐使用Dockerfile去管理你的镜像，下面将简单介绍Dockerfile常见的指令和注意事项：</p>
<h3 id="FROM"><a href="#FROM" class="headerlink" title="FROM"></a><code>FROM</code></h3><p>​    FROM命令是指定你所使用的基础镜像，一般写在文件开头，对于官方没给出Dockerfile的软件想Docker化，那么引用的镜像一般是<code>debian:jessie</code>、<code>alpine</code>、<code>ubuntu</code>，如果官方已经有了，比如nginx、php、mysql这写，那么基本直接引用即可。</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">FROM &lt;image&gt;</span><br><span class="line">FROM &lt;image&gt;:&lt;tag&gt;</span><br><span class="line">FROM &lt;image&gt;:&lt;digest&gt; </span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">FROM debian:jessie</span><br><span class="line">FROM alpine:3.6</span><br><span class="line">FROM ubuntu:16.04</span><br><span class="line">FROM mysql:5.7</span><br><span class="line">FROM python:2.7</span><br></pre></td></tr></table></figure>
<h3 id="MAINTAINER"><a href="#MAINTAINER" class="headerlink" title="MAINTAINER"></a><code>MAINTAINER</code></h3><p>​    MAINTAINER命令一般是描述这个Dockerfile的作者信息，</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MAINTAINER &lt;name&gt;</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">MAINTAINER &quot;MoMo&quot; &lt;95112082@qq.com&gt;</span><br></pre></td></tr></table></figure>
<h3 id="RUN"><a href="#RUN" class="headerlink" title="RUN"></a><code>RUN</code></h3><p>​    运行指定的命令，此命令只有在执行<code>docker build</code>时才会执行，其他情况下不会执行。这时候有很多初学者会以为在写SHELL，那么在一个Dockerfile里面会出现很多不合理的RUN指令，了解过Docker的朋友应该都知道Docker的镜像是分层结构，说白了就是Dockerfile里面一个指令的操作就是一层。比如下面的操作，一条RUN命令包含了更新源缓存，安装openjdk，清理垃圾，这样的好处是最终这一层会很小，假设你分开写，四个命令四个RUN指令，但是只有第二条命令才是你想要的，那么第一条产生的缓存垃圾就不发删除掉。这也算是优化的一部分。</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">这里只写第一种格式，有兴趣的朋友可以去官网看看其他的方式</span><br><span class="line">RUN &lt;command&gt;</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">RUN apt-get update \</span><br><span class="line">    &amp;&amp; apt-get install openjdk-8-jdk --no-install-recommends -y \</span><br><span class="line">    &amp;&amp; apt-get clean all \</span><br><span class="line">    &amp;&amp; rm -rf /var/lib/apt/lists/*</span><br></pre></td></tr></table></figure>
<h3 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a><code>CMD</code></h3><p>​    设置容器启动时要运行的命令只有在你执行 <code>docker run</code> 或者 <code>docker start</code> 命令是才会运行，其他情况下不运行。如果一个Dockerfile里面有多条CMD指令，那么只有文件最后一行的 <code>CMD</code> 指令才会生效，其他的全部没用，还有一点，还有一点 <code>CMD</code> 指令是可以在你执行 <code>docker run</code> 的时候覆盖的。</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;]</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">CMD [&quot;python&quot;,&quot;flask.py&quot;]</span><br></pre></td></tr></table></figure>
<h3 id="EXPOSE"><a href="#EXPOSE" class="headerlink" title="EXPOSE"></a><code>EXPOSE</code></h3><p>​    设置暴露的容器端口，注意是容器端口。</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">EXPOSE port</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">EXPOSE 80</span><br><span class="line">EXPOSE 80 443</span><br></pre></td></tr></table></figure>
<h3 id="ENV"><a href="#ENV" class="headerlink" title="ENV"></a><code>ENV</code></h3><p>​    功能为设置环境变量，此环节变量可以是在构建镜像时使用，也可以在运行中的容器使用。</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ENV &lt;key&gt; &lt;value&gt;</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">一种写法</span><br><span class="line">ENV JAVA_HOME /usr/lib/jvm/java-7-openjdk-amd64</span><br><span class="line">ENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line">ENV PATH $PATH:$JAVA_HOME/bin:$JRE_HOME/bin</span><br><span class="line"></span><br><span class="line">另一种写法</span><br><span class="line">ENV JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64 \</span><br><span class="line">    CLASSPATH=$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar \</span><br><span class="line">    PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</span><br></pre></td></tr></table></figure>
<h3 id="ADD"><a href="#ADD" class="headerlink" title="ADD"></a><code>ADD</code></h3><p>​    复制命令，把本机的文件复制到镜像中，如果dest是目录则会帮你创建出这个目录，如果src是压缩文件会帮你解压出来。当然ADD指令中的src也可以是URL链接，还有另外一个指令（<code>COPY</code>），请注意区别！！！</p>
<p>​    另外，src部分是是你Dockerfile的相对路径，这个请注意！！！</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ADD &lt;src&gt; &lt;dest&gt;</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">ADD nginx.conf /etc/nginx/nginx.conf</span><br><span class="line">ADD app.tar.gz /app/app.tar.gz</span><br></pre></td></tr></table></figure>
<h3 id="COPY"><a href="#COPY" class="headerlink" title="COPY"></a><code>COPY</code></h3><p>​    与ADD指令一样，但是COPY的src部分只能是本地文件，文件路径是Dockerfile的相对路径。如果dest是目录并且目录不存在，会帮你创建，如果是压缩文件不会帮你解压。</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">COPY &lt;src&gt; &lt;dest&gt;</span><br><span class="line"></span><br><span class="line">COPY app.tar.gz /app/</span><br></pre></td></tr></table></figure>
<h3 id="ENTRYPOINT"><a href="#ENTRYPOINT" class="headerlink" title="ENTRYPOINT"></a><code>ENTRYPOINT</code></h3><p>​    启动时的默认命令，此指令设置的命令不可修改。与CMD是有区别的。此命令在Dockerfile只能有一个，若有多个，则以文件最后一个出现的才生效。</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">ENTRYPOINT [&quot;nginx&quot;]</span><br><span class="line">CMD [&quot;-g&quot;,&quot;daemon off;&quot;]</span><br></pre></td></tr></table></figure>
<p>​    如上，如果执行 <code>docker run -d --name nginx -P nginx</code> 则最终容器内执行的命令是<code>nginx -g daemon off;</code> ，如果你执行的命令是 <code>docker run -d --name nginx -P nginx bash</code> 则最终容器内执行的命令是<code>nginx bash</code> 注意区别，细心体会。</p>
<h3 id="VOLUME"><a href="#VOLUME" class="headerlink" title="VOLUME"></a><code>VOLUME</code></h3><p>​    设置你的卷，在启动容器的时候Docker会在/var/lib/docker的下一级目录下创建一个卷，以保存你在容器中产生的数据。若没有申明则不会创建。</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">VOLUME [&quot;/path/to/directory&quot;]</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">VOLUME [&quot;/data&quot;]</span><br><span class="line">VOLUME [&quot;/data&quot;,&quot;/app/etc&quot;]</span><br></pre></td></tr></table></figure>
<h3 id="USER"><a href="#USER" class="headerlink" title="USER"></a><code>USER</code></h3><p>​    指定容器运行的用户是谁，前提条件，用户必须<strong>存在</strong>。此指令可以在构建镜像是使用或指定容器中进程的运行用户是谁。</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">USER daemo</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">USER nginx</span><br></pre></td></tr></table></figure>
<h3 id="WORKDIR"><a href="#WORKDIR" class="headerlink" title="WORKDIR"></a><code>WORKDIR</code></h3><p>​    指定容器中的工作目录，可以在构建时使用，也可以在启动容器时使用，构建使用就是通过 <code>WORKDIR</code> 将当前目录切换到指定的目录中，容器中使用的意思则是在你使用 <code>docker run</code> 命令启动容器时，默认进入的目录是 <code>WORKDIR</code> 指定的，下面的example中我使用环境变量。</p>
<p>指令语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">WORKDIR /path/to/workdir</span><br><span class="line"></span><br><span class="line">eg:</span><br><span class="line">WORKDIR /usr/local/zookeeper-$&#123;ZOOKEEPER_VERSION&#125;</span><br></pre></td></tr></table></figure>
<p>以上为常用的Dockerfile指令，详细文档请参考官方文档：<a href="https://docs.docker.com/engine/reference/builder/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/builder/</a></p>
<h2 id="docker-compose安装与常见命令讲解"><a href="#docker-compose安装与常见命令讲解" class="headerlink" title="docker-compose安装与常见命令讲解"></a>docker-compose安装与常见命令讲解</h2><h3 id="docker-compose安装"><a href="#docker-compose安装" class="headerlink" title="docker-compose安装"></a>docker-compose安装</h3><h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://github.com/docker/compose/releases/download/1.18.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose</span><br><span class="line">chmod +x /usr/local/bin/docker-compose</span><br><span class="line"><span class="meta">#</span><span class="bash">查看版本</span></span><br><span class="line">docker-compose version</span><br></pre></td></tr></table></figure>
<h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CentOS:</span><br><span class="line">yum install epel-release -y</span><br><span class="line">yum install python-pip -y</span><br><span class="line"></span><br><span class="line">Ubuntu:</span><br><span class="line">apt-get install python-pip -y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通用命令</span></span><br><span class="line">pip --version</span><br><span class="line">pip install --upgrade pip</span><br><span class="line">pip install -U -i https://pypi.tuna.tsinghua.edu.cn/simple docker-compose </span><br><span class="line">docker-compose version</span><br></pre></td></tr></table></figure>
<h3 id="常见命令讲解"><a href="#常见命令讲解" class="headerlink" title="常见命令讲解"></a>常见命令讲解</h3><h4 id="单机docker-compose模版"><a href="#单机docker-compose模版" class="headerlink" title="单机docker-compose模版"></a>单机docker-compose模版</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 定义docker-compose版本，有些参数只有高版本才有，底版本没有</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">'3.4'</span></span><br><span class="line"><span class="comment"># 定义服务，可以是一个，也可以是多个</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">	<span class="comment"># 具体的服务名，其他的服务可以用过这个名字访问</span></span><br><span class="line"><span class="attr">    nginx:</span></span><br><span class="line">    	<span class="comment"># 定义这个服务所使用的镜像以及进项版本，若不指定版本默认是latest，生产环境不建议使用latest</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">nginx:1.13.6-alpine</span></span><br><span class="line">        <span class="comment"># 定义容器启动后的主机名，其他的服务可以用过这个名字访问</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="comment"># 定义暴露端口，若写成 '80:80/tcp' 的格式则表示指定宿主机的80转发到容器的80，若写成 '80/tcp' 则表示Docker将随机分配一个宿主机端口给容器内的80端口，tcp表示协议类型，也可以是udp</span></span><br><span class="line"><span class="attr">        ports:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="number">80</span><span class="string">:80/tcp</span></span><br><span class="line">        <span class="comment"># 网络定义部分</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line">        	<span class="comment"># 定义这个容器运行在哪个虚拟网络里面</span></span><br><span class="line"><span class="attr">            wordpress:</span></span><br><span class="line">            	<span class="comment"># 设置这个容器在网络中的别名，可以是一个，可以是多个，其他的服务可以用过这个名字访问</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">nginx</span></span><br><span class="line">        <span class="comment"># 定义卷，可以是卷，也可以是目录，可以设置容器内的权限是什么</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line">        	<span class="comment"># 将docker-compose的相对目录下的nginx配置文件挂载到容器内的/etc/nginx/nginx.conf地方去，权限是只读</span></span><br><span class="line">        	<span class="comment"># 大致格式：src:dest:mode</span></span><br><span class="line">        	<span class="comment"># src: 可以是卷名，宿主机目录等，可以是文件或者目录，若是文件则文件必须存在，否则会是目录的形式挂载</span></span><br><span class="line">        	<span class="comment"># dest: 容器内的路径，可以是文件可以是目录，若是文件则文件必须存在，否则会是目录的形式挂载</span></span><br><span class="line">        	<span class="comment"># mode: 权限，只读(ro)，可读可写(rw)</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">./nginx/nginx.conf:/etc/nginx/nginx.conf:ro</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">./www:/var/www/html:rw</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line">        <span class="comment"># 日志定义</span></span><br><span class="line"><span class="attr">        logging:</span></span><br><span class="line">        	<span class="comment"># 使用的驱动是什么，官方给出很多方式，具体可以查看官方文档，这里使用的json-file</span></span><br><span class="line"><span class="attr">            driver:</span> <span class="string">json-file</span></span><br><span class="line">            <span class="comment"># 定义日志的参数</span></span><br><span class="line"><span class="attr">            options:</span></span><br><span class="line">            	<span class="comment"># 设置最大文件数3个，每个文件大小为100MB</span></span><br><span class="line"><span class="attr">                max-file:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">                max-size:</span> <span class="number">100</span><span class="string">m</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 下面的部分我只会将上面没有出现的部分注释出来，有的部分不做说明             </span></span><br><span class="line"><span class="attr">    wordpress:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">wordpress:4.9.1-php7.1-fpm-alpine</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">php</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="attr">            wordpress:</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">wordpress</span></span><br><span class="line">        <span class="comment"># 环境变量设置，key=value</span></span><br><span class="line"><span class="attr">        environment:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_HOST=mysql</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_USER=root</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_PASSWORD=root</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_NAME=xbclub</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_TABLE_PREFIX=wp_</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">./www:/var/www/html:rw</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">./php/uploads.ini:/usr/local/etc/php/conf.d/uploads.ini:ro</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line"><span class="attr">        logging:</span></span><br><span class="line"><span class="attr">            driver:</span> <span class="string">json-file</span></span><br><span class="line"><span class="attr">            options:</span></span><br><span class="line"><span class="attr">                max-file:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">                max-size:</span> <span class="number">100</span><span class="string">m</span></span><br><span class="line"><span class="attr">    mysql:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">mysql:5.7.20</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">mysql</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="attr">            wordpress:</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">mysql</span></span><br><span class="line"><span class="attr">        environment:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">MYSQL_ROOT_PASSWORD=root</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">./mysql:/var/lib/mysql</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line"><span class="attr">        logging:</span></span><br><span class="line"><span class="attr">            driver:</span> <span class="string">json-file</span></span><br><span class="line"><span class="attr">            options:</span></span><br><span class="line"><span class="attr">                max-file:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">                max-size:</span> <span class="number">100</span><span class="string">m</span></span><br><span class="line"><span class="attr">    redis:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">redis:4.0.6</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="attr">            wordpress:</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">./redis:/data:rw</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line"><span class="attr">        logging:</span></span><br><span class="line"><span class="attr">            driver:</span> <span class="string">json-file</span></span><br><span class="line"><span class="attr">            options:</span></span><br><span class="line"><span class="attr">                max-file:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">                max-size:</span> <span class="number">100</span><span class="string">m</span></span><br><span class="line"><span class="comment"># 定义这个compose文件中使用的网络</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">	<span class="comment"># 网络名称，和上文中的wordpress一直，这里注意不是上文中出现的wordpress这个服务，而是是网络！！！</span></span><br><span class="line"><span class="attr">    wordpress:</span></span><br><span class="line">    	<span class="comment"># 是否是外部网络，这里可以理解为如果是外部网络那么网络的名字就叫wordpress，这样方便其他的服务接入到这个网络，如果不是，在你使用docker-compose up -d 命令的时候他会以你当前的文件夹的名字加上这里定义的网络名作为你这个compose的网络。比如我的这个compose文件在test下面，如果external为true，那么你需要手动创建这个网络然后去指定命令启动这个compose；如果为flase则网络的名字将会以test_wordpress出现在你的docker network ls中。具体可以自己去试一下就知道大概是什么意思了。</span></span><br><span class="line"><span class="attr">        external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h4 id="集群docker-compose模版"><a href="#集群docker-compose模版" class="headerlink" title="集群docker-compose模版"></a>集群docker-compose模版</h4><p>以下文件中将只会备注单机版中没有说明的部分。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3.4'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">    nginx:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">nginx:1.13.6-alpine</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">nginx</span></span><br><span class="line"><span class="attr">        ports:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="number">3000</span><span class="string">:80/tcp</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="attr">            xbclub:</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">nginx</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/nfs/xbclub/nginx/nginx.conf:/etc/nginx/nginx.conf:ro</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/nfs/xbclub/www:/var/www/html:rw</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line">        <span class="comment"># 定义你这个服务的运行方式</span></span><br><span class="line"><span class="attr">        deploy:</span></span><br><span class="line">        	<span class="comment"># 模式定义，主要两种，全局模式和副本模式(自己翻译的)，全局模式将会在所有的Swarm节点上运行一个实例，副本模式则指定运行你在replicas指定的个数。</span></span><br><span class="line"><span class="attr">            mode:</span> <span class="string">replicated</span></span><br><span class="line"><span class="attr">            replicas:</span> <span class="number">3</span></span><br><span class="line">            <span class="comment"># 服务的运行规则，下面这部分的意识是“这个Nginx服务将只会匹配集群中的工作节点，但是主机名不是‘Docker-Swarm-MySQL’，‘Docker-Swarm-Redis’，‘Docker-Swarm-NFS’的节点上运行这个Nginx服务”。下面的部分基本大同小异，这里就不啰嗦了。</span></span><br><span class="line"><span class="attr">            placement:</span></span><br><span class="line"><span class="attr">                constraints:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.role</span> <span class="string">==</span> <span class="string">worker</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-MySQL</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-Redis</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-NFS</span></span><br><span class="line"><span class="attr">    wordpress:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">wordpress:4.9.1-php7.1-fpm-alpine</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">php</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="attr">            xbclub:</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">wordpress</span></span><br><span class="line"><span class="attr">        environment:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_HOST=mysql</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_USER=root</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_PASSWORD=root</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_NAME=xbclub</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_TABLE_PREFIX=wp_</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/nfs/xbclub/www:/var/www/html:rw</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/nfs/xbclub/php/uploads.ini:/usr/local/etc/php/conf.d/uploads.ini:ro</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line"><span class="attr">        deploy:</span></span><br><span class="line"><span class="attr">            mode:</span> <span class="string">replicated</span></span><br><span class="line"><span class="attr">            replicas:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">            placement:</span></span><br><span class="line"><span class="attr">                constraints:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.role</span> <span class="string">==</span> <span class="string">worker</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-MySQL</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-Redis</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-NFS</span></span><br><span class="line"><span class="attr">    mysql:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">mysql:5.7.20</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">mysql</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="attr">            xbclub:</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">mysql</span></span><br><span class="line"><span class="attr">        environment:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">MYSQL_ROOT_PASSWORD=root</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/mysql/xbclub:/var/lib/mysql</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line"><span class="attr">        deploy:</span></span><br><span class="line"><span class="attr">            mode:</span> <span class="string">replicated</span></span><br><span class="line"><span class="attr">            replicas:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">            placement:</span></span><br><span class="line"><span class="attr">                constraints:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">==</span> <span class="string">Docker-Swarm-MySQL</span></span><br><span class="line"><span class="attr">        logging:</span></span><br><span class="line"><span class="attr">            driver:</span> <span class="string">json-file</span></span><br><span class="line"><span class="attr">            options:</span></span><br><span class="line"><span class="attr">                max-file:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">                max-size:</span> <span class="number">100</span><span class="string">m</span></span><br><span class="line"><span class="attr">    redis:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">redis:4.0.6</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="attr">            xbclub:</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/redis/xbclub:/data:rw</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line"><span class="attr">        deploy:</span></span><br><span class="line"><span class="attr">            mode:</span> <span class="string">replicated</span></span><br><span class="line"><span class="attr">            replicas:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">            placement:</span></span><br><span class="line"><span class="attr">                constraints:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">==</span> <span class="string">Docker-Swarm-Redis</span></span><br><span class="line"><span class="comment"># 这里需要说明，集群环境下你需要执行“docker network create --driver overlay NetworkName”命令创建，网络的SCOPE部分显示的是Swarm才是对的。</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line"><span class="attr">    xbclub:</span></span><br><span class="line"><span class="attr">        external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>这里我只是把我常用的贴出来加以说明，如果各位有想要补充的可以告诉我，我在加上去，详细介绍可以看官网</p>
<p><a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener">https://docs.docker.com/compose/compose-file/</a></p>
<h2 id="根据项目如何使用Docker部署应用"><a href="#根据项目如何使用Docker部署应用" class="headerlink" title="根据项目如何使用Docker部署应用"></a>根据项目如何使用Docker部署应用</h2><h3 id="Swarm集群下发布基于LRNMP的WordPress应用发布"><a href="#Swarm集群下发布基于LRNMP的WordPress应用发布" class="headerlink" title="Swarm集群下发布基于LRNMP的WordPress应用发布"></a>Swarm集群下发布基于LRNMP的WordPress应用发布</h3><p>​    本实例，默认你已经装好系统，装好Docker并创建好Swarm集群。</p>
<p>​    集群约定，对于无状态应用如Nginx，WordPress我们使用NFS去实现Web站点的数据保存以及共享服务以保证所有容器（Nginx、WordPress）数据一致性问题，MySQL数据库我将指定单台主机去实现MySQL数据库功能，数据库目录将存放在所在宿主机上，那么存在一个问题，MySQL高可用如何去实现，这里可以基于MySQL的架构去实现数据库这块的高可用性本篇不讨论如何实现。</p>
<p>应用目录结构：</p>
<p>站点在NFS主目录位置：/nfs/lnmp</p>
<p>站点目录：/nfs/lnmp/www</p>
<p>Nginx配置文件目录：/nfs/lnmp/nginx</p>
<p>WordPress配合文件目录：/nfs/lnmp/php</p>
<p>Redis数据目录（Docker-Swarm-Redis主机下）：/redis/lnmp</p>
<p>MySQL数据目录（Docker-Swarm-MySQL主机下）：/mysql/lnmp</p>
<p>镜像相关文档：</p>
<p>Redi：<a href="https://hub.docker.com/_/redis/" target="_blank" rel="noopener">https://hub.docker.com/_/redis/</a></p>
<p>Nginx：<a href="https://hub.docker.com/_/nginx/" target="_blank" rel="noopener">https://hub.docker.com/_/nginx/</a></p>
<p>WordPress：<a href="https://hub.docker.com/_/wordpress/" target="_blank" rel="noopener">https://hub.docker.com/_/wordpress/</a></p>
<p>MySQL：<a href="https://hub.docker.com/_/mysql/" target="_blank" rel="noopener">https://hub.docker.com/_/mysql/</a></p>
<p>集群节点清单：</p>
<table>
<thead>
<tr>
<th>主机名</th>
<th style="text-align:center">节点作用</th>
<th style="text-align:right">运行的容器</th>
</tr>
</thead>
<tbody>
<tr>
<td>Docker-Swarm-MySQL</td>
<td style="text-align:center">MySQL节点，只跑MySQL不跑其他的应用</td>
<td style="text-align:right">MySQL</td>
</tr>
<tr>
<td>Docker-Swarm-Redis</td>
<td style="text-align:center">Redis节点，只跑Redis不跑其他的应用</td>
<td style="text-align:right">Redis</td>
</tr>
<tr>
<td>Docker-Swarm-NFS</td>
<td style="text-align:center">NFS节点，只用于数据共享，不运行任何应用</td>
<td style="text-align:right">N/A</td>
</tr>
<tr>
<td>Docker-Swarm-Master01</td>
<td style="text-align:center">Swarm集群管理节点</td>
<td style="text-align:right">N/A</td>
</tr>
<tr>
<td>Docker-Swarm-Node01</td>
<td style="text-align:center">Swarm集群工作节点</td>
<td style="text-align:right">Nginx、WordPress</td>
</tr>
<tr>
<td>Docker-Swarm-Node02</td>
<td style="text-align:center">Swarm集群工作节点</td>
<td style="text-align:right">Nginx、WordPress</td>
</tr>
</tbody>
</table>
<p>准备编排文件，内容如下（docker-compose.yaml）：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">'3.4'</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">    nginx:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">nginx:1.13.6-alpine</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">nginx</span></span><br><span class="line"><span class="attr">        ports:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="number">3000</span><span class="string">:80/tcp</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="attr">            xbclub:</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">nginx</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/nfs/lnmp/nginx/nginx.conf:/etc/nginx/nginx.conf:ro</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/nfs/lnmp/www:/var/www/html:rw</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line"><span class="attr">        deploy:</span></span><br><span class="line"><span class="attr">            mode:</span> <span class="string">replicated</span></span><br><span class="line"><span class="attr">            replicas:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">            placement:</span></span><br><span class="line"><span class="attr">                constraints:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.role</span> <span class="string">==</span> <span class="string">worker</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-MySQL</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-Redis</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-NFS</span></span><br><span class="line"><span class="attr">    wordpress:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">wordpress:4.9.1-php7.1-fpm-alpine</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">php</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="attr">            xbclub:</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">wordpress</span></span><br><span class="line"><span class="attr">        environment:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_HOST=mysql</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_USER=root</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_PASSWORD=root</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_DB_NAME=xbclub</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">WORDPRESS_TABLE_PREFIX=wp_</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/nfs/lnmp/www:/var/www/html:rw</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/nfs/lnmp/php/uploads.ini:/usr/local/etc/php/conf.d/uploads.ini:ro</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line"><span class="attr">        deploy:</span></span><br><span class="line"><span class="attr">            mode:</span> <span class="string">replicated</span></span><br><span class="line"><span class="attr">            replicas:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">            placement:</span></span><br><span class="line"><span class="attr">                constraints:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.role</span> <span class="string">==</span> <span class="string">worker</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-MySQL</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-Redis</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">!=</span> <span class="string">Docker-Swarm-NFS</span></span><br><span class="line"><span class="attr">    mysql:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">mysql:5.7.20</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">mysql</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="attr">            xbclub:</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">mysql</span></span><br><span class="line"><span class="attr">        environment:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">MYSQL_ROOT_PASSWORD=root</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/mysql/lnmp:/var/lib/mysql</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line"><span class="attr">        deploy:</span></span><br><span class="line"><span class="attr">            mode:</span> <span class="string">replicated</span></span><br><span class="line"><span class="attr">            replicas:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">            placement:</span></span><br><span class="line"><span class="attr">                constraints:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">==</span> <span class="string">Docker-Swarm-MySQL</span></span><br><span class="line"><span class="attr">        logging:</span></span><br><span class="line"><span class="attr">            driver:</span> <span class="string">json-file</span></span><br><span class="line"><span class="attr">            options:</span></span><br><span class="line"><span class="attr">                max-file:</span> <span class="string">'3'</span></span><br><span class="line"><span class="attr">                max-size:</span> <span class="number">100</span><span class="string">m</span></span><br><span class="line"><span class="attr">    redis:</span></span><br><span class="line"><span class="attr">        image:</span> <span class="attr">redis:4.0.6</span></span><br><span class="line"><span class="attr">        hostname:</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">        networks:</span></span><br><span class="line"><span class="attr">            xbclub:</span></span><br><span class="line"><span class="attr">                aliases:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">redis</span></span><br><span class="line"><span class="attr">        volumes:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/redis/lnmp:/data:rw</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">/usr/share/zoneinfo/Asia/Shanghai:/etc/localtime:ro</span></span><br><span class="line"><span class="attr">        deploy:</span></span><br><span class="line"><span class="attr">            mode:</span> <span class="string">replicated</span></span><br><span class="line"><span class="attr">            replicas:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">            placement:</span></span><br><span class="line"><span class="attr">                constraints:</span></span><br><span class="line"><span class="bullet">                    -</span> <span class="string">node.hostname</span> <span class="string">==</span> <span class="string">Docker-Swarm-Redis</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line"><span class="attr">    xbclub:</span></span><br><span class="line"><span class="attr">        external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>Nginx配置文件（nginx.conf）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">user  nginx nginx;</span><br><span class="line">worker_processes auto;</span><br><span class="line">error_log  /var/log/nginx/error.log warn;</span><br><span class="line">pid        /var/run/nginx.pid;</span><br><span class="line">worker_rlimit_nofile 51200;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    use epoll;</span><br><span class="line">    worker_connections 51200;</span><br><span class="line">    multi_accept on;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  &apos;&#123;&quot;remote_addr&quot;:&quot;$remote_addr&quot;,&apos;</span><br><span class="line">                      &apos;&quot;http_x_forwarded_for&quot;:&quot;$http_x_forwarded_for&quot;,&apos;</span><br><span class="line">                      &apos;&quot;remote_user&quot;:&quot;$remote_user&quot;,&apos;</span><br><span class="line">                      &apos;&quot;time_local&quot;:&quot;$time_local&quot;,&apos;</span><br><span class="line">                      &apos;&quot;request&quot;:&quot;$request&quot;,&apos;</span><br><span class="line">                      &apos;&quot;status&quot;:&quot;$status&quot;,&apos;</span><br><span class="line">                      &apos;&quot;request_time&quot;:&quot;$request_time&quot;,&apos;</span><br><span class="line">                      &apos;&quot;body_bytes_sent&quot;:&quot;$body_bytes_sent&quot;,&apos;</span><br><span class="line">                      &apos;&quot;http_referer&quot;:&quot;$http_referer&quot;,&apos;</span><br><span class="line">                      &apos;&quot;http_user_agent&quot;:&quot;$http_user_agent&quot;&#125;&apos;;</span><br><span class="line"></span><br><span class="line">    server_names_hash_bucket_size 128;</span><br><span class="line">    client_header_buffer_size 32k;</span><br><span class="line">    large_client_header_buffers 4 32k;</span><br><span class="line">    client_max_body_size 50m;</span><br><span class="line"></span><br><span class="line">    sendfile   on;</span><br><span class="line">    tcp_nopush on;</span><br><span class="line"></span><br><span class="line">    keepalive_timeout 60;</span><br><span class="line"></span><br><span class="line">    tcp_nodelay on;</span><br><span class="line"></span><br><span class="line">    fastcgi_connect_timeout 300;</span><br><span class="line">    fastcgi_send_timeout 300;</span><br><span class="line">    fastcgi_read_timeout 300;</span><br><span class="line">    fastcgi_buffer_size 64k;</span><br><span class="line">    fastcgi_buffers 4 64k;</span><br><span class="line">    fastcgi_busy_buffers_size 128k;</span><br><span class="line">    fastcgi_temp_file_write_size 256k;</span><br><span class="line"></span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_min_length  1k;</span><br><span class="line">    gzip_buffers     4 16k;</span><br><span class="line">    gzip_http_version 1.1;</span><br><span class="line">    gzip_comp_level 2;</span><br><span class="line">    gzip_types     text/plain application/javascript application/x-javascript text/javascript text/css application/xml application/xml+rss;</span><br><span class="line">    gzip_vary on;</span><br><span class="line">    gzip_proxied   expired no-cache no-store private auth;</span><br><span class="line">    gzip_disable   &quot;MSIE [1-6]\.&quot;;</span><br><span class="line"></span><br><span class="line">    server_tokens off;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name _;</span><br><span class="line">        index index.html index.htm index.php;</span><br><span class="line">        location / &#123;</span><br><span class="line">            deny all;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server&#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name www.example.com ;</span><br><span class="line">        server_name _;</span><br><span class="line">        index index.html index.htm index.php default.html default.htm default.php;</span><br><span class="line">        root  /var/www/html;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            try_files $uri $uri/ /index.php?$args;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # Add trailing slash to */wp-admin requests.</span><br><span class="line">        rewrite /wp-admin$ $scheme://$host$uri/ permanent;</span><br><span class="line"></span><br><span class="line">        # Deny access to PHP files in specific directory</span><br><span class="line">        #location ~ /(wp-content|uploads|wp-includes|images)/.*\.php$ &#123; deny all; &#125;</span><br><span class="line"></span><br><span class="line">        location ~ [^/]\.php(/|$) &#123;</span><br><span class="line">          try_files $uri =404;</span><br><span class="line">          fastcgi_pass  wordpress:9000;</span><br><span class="line">          fastcgi_index index.php;</span><br><span class="line">          include fastcgi.conf;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$ &#123;</span><br><span class="line">            expires      30d;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ .*\.(js|css)?$ &#123;</span><br><span class="line">            expires      12h;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ /.well-known &#123;</span><br><span class="line">            allow all;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ /\. &#123;</span><br><span class="line">            deny all;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>WordPress配置文件（uploads.ini）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">file_uploads = On</span><br><span class="line">memory_limit = 64M</span><br><span class="line">upload_max_filesize = 64M</span><br><span class="line">post_max_size = 64M</span><br><span class="line">max_execution_time = 600</span><br></pre></td></tr></table></figure>
<p>本实例项目地址：<a href="https://github.com/buxiaomo/docker-compose/tree/master/wordpress" target="_blank" rel="noopener">https://github.com/buxiaomo/docker-compose/tree/master/wordpress</a></p>
<p>总结：</p>
<p>本实例我们直接使用的是官方的镜像，没有做定制操作，原因如下：</p>
<p>1、不要重复造轮子，官方有镜像尽量使用官方的镜像不要自己构建</p>
<p>2、官方镜像有人维护，不需要自己维护，较少成本</p>
<p>3、官方镜像基本可以满足大部分应用需求，所以基本不需要进行定制化，如果需要定制化可以直接使用FROM BASEIMAGE去做定制化，而不是从头再来。</p>
<h3 id="NodeJS应用发布"><a href="#NodeJS应用发布" class="headerlink" title="NodeJS应用发布"></a>NodeJS应用发布</h3><p>​    针对自己写Dockerfile构将APP镜像，首先需要有一点，你的APP必须可以前台运行！！！</p>
<p>​    由于官方有镜像，我们就直接引用即可，不需要自己去构建NodeJS的镜像，这里我一一个NodeJS的WebUI去实现镜像封装以及运行。对于NodeJS应用，大概分为两部分，下载依赖包，运行分为，这里可以更具实际情况决定Dockerfile如何编写，理论上依赖包只需要下载一次就行了，不需要每次运行分为都去下载镜像包，那么针对这种情况可以在构建的时候把依赖包一起打包到镜像中，当然，将依赖包打包到镜像中构建出来的镜像会有点大，但是好处就是启动服务的时候不需要下载依赖包，启动时间会很快，适合离线环境；一种是在启动的时候去下载依赖包，这样的话镜像会小一点，但是启动时会去下载依赖包，启动时间会比较长，具体方式可以自己选。下面简要说一下步骤：</p>
<p>编写Dockerfile内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">FROM node:9.3.0</span><br><span class="line"></span><br><span class="line">ADD app /app/</span><br><span class="line"></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line">RUN npm i</span><br><span class="line"></span><br><span class="line">EXPOST 7001</span><br><span class="line"></span><br><span class="line">CMD [&quot;npm&quot;,&quot;run&quot;,&quot;dev&quot;]</span><br></pre></td></tr></table></figure>
<p>进入Dockerfile所在目录执行<code>docker build -t=nodejs .</code>构建镜像</p>
<p>待补充</p>
<h3 id="Flask应用发布"><a href="#Flask应用发布" class="headerlink" title="Flask应用发布"></a>Flask应用发布</h3><p>项目代码：<a href="https://github.com/buxiaomo/dockerfile/tree/master/ssserverweb" target="_blank" rel="noopener">https://github.com/buxiaomo/dockerfile/tree/master/ssserverweb</a></p>
<p>​    应用简介：应用通过Docker Engine API对基于Docker Swarm提供的SS服务管理用户添加删除和添加节点的小demo项目，本应用通过Swarm实现。Docker化应用类似于NodeJS。通过阿里云的域名API配置主机IP与域名的关系，本篇只针对应用如何使用Docker部署，代码实现不在本篇讨论范围这里不详细说明。</p>
<p>申明：代码可能存在逻辑问题，不要纠结这个，本篇只讨论如何容器化应用。</p>
<p>可以直接看GitHub的代码查看详情。准备Dockerfile，内容如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">FROM python:2.7.14</span><br><span class="line"></span><br><span class="line">ADD . /app</span><br><span class="line"></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line">RUN pip install -r requirements.txt</span><br><span class="line"></span><br><span class="line">ENV ALIYUN_ID NULL</span><br><span class="line">ENV ALIYUN_Secret NULL</span><br><span class="line">ENV ALIYUN_RegionId cn-hangzhou</span><br><span class="line"></span><br><span class="line">ENV Domain NULL</span><br><span class="line">ENV ManagerIP NULL</span><br><span class="line"></span><br><span class="line">EXPOSE 8000</span><br><span class="line"></span><br><span class="line">CMD [&quot;python&quot;,&quot;ssserver.py&quot;]</span><br></pre></td></tr></table></figure>
<p>进入Dockerfile所在目录执行<code>docker build -t=ssserverweb .</code>构建镜像</p>
<p>启动容器：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name ssserverweb </span><br><span class="line">-p 8080:8000 \</span><br><span class="line">-v /var/run/docker.sock:/var/run/docker.sock:ro \</span><br><span class="line">-e ALIYUN_ID=*** \</span><br><span class="line">-e ManagerIP=*** \</span><br><span class="line">-e ALIYUN_Secret=**** \</span><br><span class="line">-e DomainName=www.example.com \</span><br><span class="line">ssserverweb:latest</span><br></pre></td></tr></table></figure>
<p>查看服务，访问链接：<a href="http://IP:8080" target="_blank" rel="noopener">http://IP:8080</a> 即可访问到访问页面</p>
<h3 id="基于Tomcat封装Jenkins镜像"><a href="#基于Tomcat封装Jenkins镜像" class="headerlink" title="基于Tomcat封装Jenkins镜像"></a>基于Tomcat封装Jenkins镜像</h3><p>待补充</p>
<h2 id="每次代码写好了都要自己构建觉得麻烦怎么办？"><a href="#每次代码写好了都要自己构建觉得麻烦怎么办？" class="headerlink" title="每次代码写好了都要自己构建觉得麻烦怎么办？"></a>每次代码写好了都要自己构建觉得麻烦怎么办？</h2><p>1、可以结合GitHub与Dockerhub做到持续构建。</p>
<p>2、使用GitHub代码托管与daocloud的公有云服务，构建速度不错，比Dockerhub快，不用等太久。</p>
<p>3、Jenkins + github/Gitlab（自己动手丰衣足食）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://SubHyCan.github.io/2019/02/14/Docker-Quick-Start-Guide/" data-id="cjsvb16yb000asyri8a9157br" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>
 


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">下一页&raquo;</a>
  </nav>
</section>
           
    <aside id="sidebar">
  
    
  <div class="widget-wrap">
     
        <h3 class="follow-title ">Follow me</h3>
     
    <div class="widget follow">
      
              <a class="github" aria-hidden="true" href="https://github.com/SubHyCan" target="_blank" title="Github"></a>
      
      
      
      
    </div>
  </div>


  
    
  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title recent-posts">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/02/14/Spotlight for DB2使用/">Spotlight for DB2使用</a>
          </li>
        
          <li>
            <a href="/2019/02/14/Windows-Related/">Windows-Related</a>
          </li>
        
          <li>
            <a href="/2019/02/14/Python-3-Study/">Python 3 Study</a>
          </li>
        
          <li>
            <a href="/2019/02/14/Other/">Other</a>
          </li>
        
          <li>
            <a href="/2019/02/14/Linux下日常安装/">Linux下日常安装</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title archive">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a><span class="archive-list-count">12</span></li></ul>
    </div>
  </div>


  
    
<div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
        <ul>
            
            <li>
                <a href="https://github.com/SubHyCan">github</a>
            </li>
            
        </ul>
    </div>
</div>

  
    <!--微信公众号二维码-->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2019 SubCan&nbsp;|&nbsp;
      主题 <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      联系方式&nbsp;|&nbsp;liyunliang@cymco.cn
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png">
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

  <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
  <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script> 
  <script>
  var gitment = new Gitment({
    // id: '页面 ID', // 可选。默认为 location.href
    owner: 'SubHyCan',
    repo: 'SubHyCan.github.io',
    oauth: {
    client_id: '642ba02e800e02a0a972',
    client_secret: '62f84805c3e00a38ae2b8f62c7ffbb789ea7c4ca',
    }
  })
  gitment.render(document.getElementById("gitment_comments"))
</script>


<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>